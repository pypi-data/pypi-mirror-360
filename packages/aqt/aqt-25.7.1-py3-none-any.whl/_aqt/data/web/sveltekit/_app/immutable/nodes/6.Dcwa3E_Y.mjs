var Nn=Object.defineProperty;var Fn=(n,t,a)=>t in n?Nn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a;var we=(n,t,a)=>Fn(n,typeof t!="symbol"?t+"":t,a);import{L as Vn,M as Hn,N as Bn,O as zn,P as Wn,s as _t,Q as Gn,S as sr,T as Kt,U as ht,V as ut,W as Ss,X as at,Y as bt,Z as Is,_ as gs,$ as jn,a0 as qn,a1 as Un,a2 as Qn,a3 as Yn,a4 as rr,a5 as Kn,a6 as Xn,a7 as Zn,a8 as Jn,a9 as ea}from"../chunks/BbcV3-AD.mjs";import{e as ta,f as sa,b as ra}from"../chunks/DDFQO7nQ.mjs";import{s as d,bc as zr,g as r,Q as Wr,u as s,C as na,aL as xt,G as nr,F as ar,am as or,bd as aa,as as ir,p as be,e as it,f as ce,c as g,d as xe,aZ as oa,aY as Ms,al as ia,h as ee,i as j,_ as $,r as A,b as W,n as re,j as q,k as w,l as ie,m as T,a as Ye,b7 as St,t as Z,aM as la,be as ua}from"../chunks/3W_oWfQO.mjs";import{d as qe,g as je,v as ca,r as Gr,y as da,z as fa,s as F,x as jr,e as Se,c as qr,o as Ns,t as ga}from"../chunks/BmEJtw2x.mjs";import{c as us}from"../chunks/CdvNA3Mj.mjs";import{b as Fs,i as lr,S as va}from"../chunks/DiM0wdUe.mjs";import"../chunks/BbkoyQuY.mjs";import{i as Oe}from"../chunks/BlVs9ZMX.mjs";import{b as Mt}from"../chunks/DAG-5t49.mjs";import{p as V,i as Ve,s as Ur}from"../chunks/D_GJ3sV_.mjs";import{e3 as Qr,t as st,e4 as vs,I as G,aw as mt,e5 as $a,cb as Vs,u as pa,e6 as ha,e7 as ma,q as ot,U as Ke,e8 as ya,e9 as Ca,ea as wa,eb as _a,ec as ka,ed as Pa,ee as ba,ef as xa,eg as Sa,eh as Oa,ei as Ra,ej as Ta,ek as Da,el as ur,em as Ia,en as cr,eo as Aa,ep as Yr,eq as Ea,er as La,es as dr,et as Ma,eu as Na,ev as Fa,ew as Va,ex as fr,ey as Ha,ez as Ba,eA as za,eB as Wa,eC as Ga,eD as ja,eE as qa,eF as Ua,eG as Qa,eH as Ya,eI as Ka,eJ as Xa,eK as Za,eL as Ja,eM as eo,eN as to,eO as so,eP as Kr,eQ as ro,eR as no,eS as ao,eT as oo,eU as io,eV as lo,eW as uo,eX as co,eY as fo,eZ as go,e_ as vo,e$ as $o,f0 as po,f1 as ho,f2 as mo,f3 as yo,f4 as Co,f5 as wo,f6 as _o,f7 as ko,f8 as Po,f9 as bo,fa as xo,fb as So,fc as Oo,fd as Ro,fe as To,ff as Do,fg as Io,fh as Ao,fi as gr,fj as Eo,fk as Lo,fl as Mo,fm as No,fn as Fo,fo as Vo,fp as Ho,fq as vr,fr as Bo,fs as Xr,ft as Zr,fu as Jr,fv as zo,fw as Wo,fx as Go,fy as jo,fz as qo,fA as Uo,fB as Qo,fC as Yo,fD as Ko,fE as Xo,fF as Zo,fG as Jo,fH as cs,fI as $r,fJ as pr,fK as ei,fL as en,fM as ti,fN as tn,fO as si,fP as sn,fQ as ri,fR as hr,fS as ni,fT as ai,fU as rn,fV as oi,fW as ii,fX as li,fY as ui,fZ as ci,f_ as di,f$ as fi,g0 as gi,g1 as mr,g2 as vi,g3 as $i,cH as nn,cp as pi,co as hi,cY as mi,cn as yi,g4 as Ci,g5 as wi,g6 as _i,g7 as ki,g8 as Pi,g9 as bi,ga as xi,gb as Si,gc as Oi,gd as Ri,ge as Ti,gf as Di,gg as Hs,gh as Ii,gi as Ai,gj as Ei,dB as Li,gk as Mi,gl as an,gm as on,gn as Ni,go as ln,gp as Fi,gq as Vi,gr as Hi,gs as Bi,gt as un,gu as As,gv as zi,gw as Wi,gx as Gi,gy as ji,gz as qi,gA as cn,gB as dn,gC as Ui,gD as fn,gE as Qi,gF as Yi,gG as Ki,gH as Xi,gI as Zi,gJ as yr,gK as Ji,gL as el,gM as tl,gN as sl,gO as rl,gP as nl,gQ as al,gR as ol,gS as il,gT as ll,gU as ul,gV as cl,gW as dl,gX as fl,gY as gl,gZ as vl,g_ as $l,g$ as pl,h0 as hl,V as ml,h1 as yl,h2 as Cl,h3 as wl,h4 as _l,h5 as kl,h6 as Pl,h7 as bl,h8 as xl,h9 as gn,ha as Cr,hb as Sl,hc as Ol,hd as Rl,he as Tl,hf as Dl,hg as Il,hh as Al,hi as El,hj as Ll,hk as Ml,hl as Nl,hm as wr,hn as Fl,ho as Vl,hp as Hl,hq as Bl,hr as zl,hs as Wl,ht as Gl,hu as _r,hv as jl,hw as ql,hx as Ul}from"../chunks/6fBxLty2.mjs";import{b as Je}from"../chunks/CuVdaCGl.mjs";import{a as ye,s as ze,b as vt,m as Ot,d as te,e as Ql}from"../chunks/D-RwVtBd.mjs";import{C as Yl}from"../chunks/C5p6UDop.mjs";import{e as Zt,i as ms,R as Ue,p as Kl}from"../chunks/2Hmh4aao.mjs";import{c as Es}from"../chunks/CAnfnSx8.mjs";import{T as lt}from"../chunks/4aNVjcN1.mjs";import{b as et,H as pe,a as $t,M as vn}from"../chunks/9vZc7UWW.mjs";import{d as Jt,M as $n,S as Xl,k as Zl,l as Jl,m as eu,p as tu,a as pn,W as su,P as ru,D as Xt}from"../chunks/BSYLJw7M.mjs";import{a as nu}from"../chunks/CcaWrs5J.mjs";import{C as Tt,R as es,a as se,S as Xe,E as gt}from"../chunks/Bgmg1D9F.mjs";import{c as ts,b as Os}from"../chunks/DIbnkDWM.mjs";import{a as $s,j as au,I as kr,c as hn,$ as ou}from"../chunks/B5Gv54Mr.mjs";import{C as kt}from"../chunks/2Z13KoIg.mjs";import{j as Pr,S as iu,g as br,p as lu}from"../chunks/DHCXFtPH.mjs";import{W as Qe}from"../chunks/joBonB4r.mjs";import{m as mn}from"../chunks/Dbye-yJ_.mjs";import{L as uu,S as cu}from"../chunks/CCWZSJ_4.mjs";import{I as du}from"../chunks/C1GC07It.mjs";import{r as fu}from"../chunks/0q811vLG.mjs";import{r as ps}from"../chunks/Bo3FIg7_.mjs";import{k as gu}from"../chunks/ByZLrhA1.mjs";import{ac as Bs,y as xr,z as Sr,A as Or,C as vu,B as $u,D as pu,E as hu,H as Rr,F as mu,b as yu,G as Tr,I as Cu,M as wu,L as _u,J as ku,K as Pu,N as bu}from"../chunks/1INhHkSM.mjs";import{I as xu,i as Su,c as Ou,C as Ru,T as Tu}from"../chunks/CIx9M82R.mjs";import{t as Rs,T as ct,c as Du,a as Iu,e as Au}from"../chunks/Cwi7iDyn.mjs";import{t as Eu}from"../chunks/BMwUKMgT.mjs";import{S as Dr,a as Lu}from"../chunks/DB8w6JNV.mjs";function Mu(n){d(n,n.v+1)}function Nu(n){let t=0,a=na(0),i;return()=>{zr()&&(r(a),Wr(()=>(t===0&&(i=s(()=>n(()=>Mu(a)))),t+=1,()=>{xt().then(()=>{t-=1,t===0&&(i==null||i(),i=void 0)})})))}}function Fu(n,t){var a=or,i=ir,e=n();const o=qe(e,m=>{var p=e!==n(),u,f=ir,c=or;nr(i),ar(a);try{u=aa(()=>{Wr(()=>{const k=n();p&&m(k)})})}finally{nr(f),ar(c)}return p=!0,u});return t?{set:t,update:m=>t(m(n())),subscribe:o.subscribe}:{subscribe:o.subscribe}}function Vu(n){let t;const a=Nu(e=>{let o=!1;const m=n.subscribe(p=>{t=p,o&&e()});return o=!0,m});function i(){return zr()?(a(),t):je(n)}return"set"in n?{get current(){return i()},set current(e){n.set(e)}}:{get current(){return i()}}}const Hu=Object.freeze(Object.defineProperty({__proto__:null,derived:ca,fromStore:Vu,get:je,readable:Gr,readonly:da,toStore:Fu,writable:qe},Symbol.toStringTag,{value:"Module"}));function Bu(n,t,...a){return zu(n,Su,t,a)}function zu(n,t,a,i){return function e(o,m){if(m>=i.length)return a(o);const p=new xu,u=i[m++];let f=-1;for(const c of o){const k=u(c,++f,o),y=p.get(k);y?y.push(c):p.set(k,[c])}for(const[c,k]of p)p.set(c,e(k,m));return t(p)}(n,0)}const Wu=Ou("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Gu(n,t){for(var a=-1,i=n==null?0:n.length,e=Array(i);++a<i;)e[a]=t(n[a],a,n);return e}var Ir=Dr?Dr.prototype:void 0,Ar=Ir?Ir.toString:void 0;function yn(n){if(typeof n=="string")return n;if(Jt(n))return Gu(n,yn)+"";if(Bs(n))return Ar?Ar.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function ju(n){return n}var qu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uu=/^\w*$/;function zs(n,t){if(Jt(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||Bs(n)?!0:Uu.test(n)||!qu.test(n)||t!=null&&n in Object(t)}var Qu="Expected a function";function Ws(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(Qu);var a=function(){var i=arguments,e=t?t.apply(this,i):i[0],o=a.cache;if(o.has(e))return o.get(e);var m=n.apply(this,i);return a.cache=o.set(e,m)||o,m};return a.cache=new(Ws.Cache||$n),a}Ws.Cache=$n;var Yu=500;function Ku(n){var t=Ws(n,function(i){return a.size===Yu&&a.clear(),i}),a=t.cache;return t}var Xu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zu=/\\(\\)?/g,Ju=Ku(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(Xu,function(a,i,e,o){t.push(e?o.replace(Zu,"$1"):i||a)}),t});function ec(n){return n==null?"":yn(n)}function Cn(n,t){return Jt(n)?n:zs(n,t)?[n]:Ju(ec(n))}function ys(n){if(typeof n=="string"||Bs(n))return n;var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function wn(n,t){t=Cn(t,n);for(var a=0,i=t.length;n!=null&&a<i;)n=n[ys(t[a++])];return a&&a==i?n:void 0}function tc(n,t,a){var i=n==null?void 0:wn(n,t);return i===void 0?a:i}var sc=1,rc=2;function nc(n,t,a,i){var e=a.length,o=e;if(n==null)return!o;for(n=Object(n);e--;){var m=a[e];if(m[2]?m[1]!==n[m[0]]:!(m[0]in n))return!1}for(;++e<o;){m=a[e];var p=m[0],u=n[p],f=m[1];if(m[2]){if(u===void 0&&!(p in n))return!1}else{var c=new Xl,k;if(!(k===void 0?Fs(f,u,sc|rc,i,c):k))return!1}}return!0}function _n(n){return n===n&&!Lu(n)}function ac(n){for(var t=Zl(n),a=t.length;a--;){var i=t[a],e=n[i];t[a]=[i,e,_n(e)]}return t}function kn(n,t){return function(a){return a==null?!1:a[n]===t&&(t!==void 0||n in Object(a))}}function oc(n){var t=ac(n);return t.length==1&&t[0][2]?kn(t[0][0],t[0][1]):function(a){return a===n||nc(a,n,t)}}function ic(n,t){return n!=null&&t in Object(n)}function lc(n,t,a){t=Cn(t,n);for(var i=-1,e=t.length,o=!1;++i<e;){var m=ys(t[i]);if(!(o=n!=null&&a(n,m)))break;n=n[m]}return o||++i!=e?o:(e=n==null?0:n.length,!!e&&Jl(e)&&eu(m,e)&&(Jt(n)||tu(n)))}function uc(n,t){return n!=null&&lc(n,t,ic)}var cc=1,dc=2;function fc(n,t){return zs(n)&&_n(t)?kn(ys(n),t):function(a){var i=tc(a,n);return i===void 0&&i===t?uc(a,n):Fs(t,i,cc|dc)}}function gc(n){return function(t){return t==null?void 0:t[n]}}function vc(n){return function(t){return wn(t,n)}}function $c(n){return zs(n)?gc(ys(n)):vc(n)}function pc(n){return typeof n=="function"?n:n==null?ju:typeof n=="object"?Jt(n)?fc(n[0],n[1]):oc(n):$c(n)}function hc(n,t,a){a=typeof a=="function"?a:void 0;var i=a?a(n,t):void 0;return i===void 0?Fs(n,t,void 0,a):!!i}function mc(n,t){for(var a,i=-1,e=n.length;++i<e;){var o=t(n[i]);o!==void 0&&(a=a===void 0?o:a+o)}return a}function yc(n,t){return n&&n.length?mc(n,pc(t)):0}function Ls(){let n;return[new Promise(a=>n=a),n]}class Cc{constructor(t,a){we(this,"currentConfig");we(this,"currentAuxData");we(this,"configList");we(this,"cardStateCustomizer");we(this,"currentDeck");we(this,"deckLimits");we(this,"defaults");we(this,"addonComponents");we(this,"newCardsIgnoreReviewLimit");we(this,"applyAllParentLimits");we(this,"fsrs");we(this,"fsrsReschedule",qe(!1));we(this,"fsrsHealthCheck");we(this,"legacyEvaluate");we(this,"daysSinceLastOptimization");we(this,"currentPresetName");we(this,"originalConfigsPromise");we(this,"originalConfigsResolve");we(this,"targetDeckId");we(this,"configs");we(this,"selectedIdx");we(this,"configListSetter");we(this,"modifiedConfigs",new Set);we(this,"removedConfigs",[]);we(this,"schemaModified");we(this,"_presetAssignmentsChanged",!1);we(this,"loadedPresets",new Set);var i,e;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=qe(a.cardStateCustomizer),this.deckLimits=qe((e=(i=a.currentDeck)==null?void 0:i.limits)!=null?e:_c()),this.newCardsIgnoreReviewLimit=qe(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=qe(a.applyAllParentLimits),this.fsrs=qe(a.fsrs),this.fsrsHealthCheck=qe(a.fsrsHealthCheck),this.legacyEvaluate=a.fsrsLegacyEvaluate,this.daysSinceLastOptimization=qe(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=qe(this.getCurrentConfig()),this.currentAuxData=qe(this.getCurrentAuxData()),this.currentPresetName=qe(this.configs[this.selectedIdx].config.name),this.configList=Gr(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=a.schemaModified,this.addonComponents=qe([]),je(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=Ls()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(t&&!a.has(t)){a.add(t);const i=await this.originalConfigsPromise,e=i.configs.findIndex(o=>o.id===t);e!==-1&&(i.configs[e]=us(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),xt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),i=this.configs[this.selectedIdx].config;i.name=a,i.id&&this.modifiedConfigs.add(i.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const i=this.ensureNewNameUnique(t),o={config:new Vn({id:0n,name:i,config:new Hn(us(a))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(t){const i=[...this.configs.map(e=>e.config).filter((e,o)=>o!==this.selectedIdx&&(e.id===0n||this.modifiedConfigs.has(e.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:i,mode:t,cardStateCustomizer:je(this.cardStateCustomizer),limits:je(this.deckLimits),newCardsIgnoreReviewLimit:je(this.newCardsIgnoreReviewLimit),applyAllParentLimits:je(this.applyAllParentLimits),fsrs:je(this.fsrs),fsrsReschedule:je(this.fsrsReschedule),fsrsHealthCheck:je(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Bn(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;lr(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();lr(a,t)||this.currentConfig.update(i=>{const e=new TextEncoder().encode(JSON.stringify(t));return i.other=e,i})}ensureNewNameUnique(t){return this.configs.findIndex(i=>i.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return us(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return wc(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,i)=>ta(a.config.name,i.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,i)=>{const e=a.useCount+(i===this.selectedIdx?1:0);return{name:a.config.name,current:i===this.selectedIdx,idx:i,useCount:e}})}getAllConfigs(){return us({configs:this.configs.map(t=>t.config),cardStateCustomizer:je(this.cardStateCustomizer),limits:je(this.deckLimits),newCardsIgnoreReviewLimit:je(this.newCardsIgnoreReviewLimit),applyAllParentLimits:je(this.applyAllParentLimits),fsrs:je(this.fsrs),fsrsReschedule:je(this.fsrsReschedule),currentConfig:je(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!hc(t,a,(i,e)=>{if(typeof i=="number"&&typeof e=="number")return Math.fround(i)===Math.fround(e)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function wc(n){if(!n.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(n))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function _c(){return new zn({})}class wt{constructor(t,a,i,e,o){we(this,"title");we(this,"value");we(this,"setter");we(this,"disabledValue");we(this,"startValue");we(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=i,this.disabledValue=e,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,i;this.value=(i=(a=this.value)!=null?a:this.startValue)!=null?i:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Gs(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await xt()}function ds(n){return n.fsrsParams6?n.fsrsParams6:n.fsrsParams5?n.fsrsParams5:n.fsrsParams4}const kc=async({params:n})=>{const t=Number(n.deckId),a=BigInt(t),i=await Wn({did:a});return{state:new Cc(BigInt(a),i)}},ig=Object.freeze(Object.defineProperty({__proto__:null,load:kc},Symbol.toStringTag,{value:"Module"}));Qr("svelte",fa);Qr("svelte/store",Hu);function Pc(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$components",a),o=()=>ye(u,"$auxData",a);let m=V(t,"state",8);const p=m().addonComponents,u=m().currentAuxData;Oe();var f=it(),c=ce(f);{var k=y=>{lt(y,{title:"Add-ons",children:(h,x)=>{var v=it(),C=ce(v);Zt(C,1,e,ms,(O,D)=>{var S=it(),R=ce(S);Es(R,()=>r(D).component,(H,U)=>{U(H,Ur(()=>r(D),{get data(){return Ot(),o()},set data(Y){vt(u,Y)},$$legacy:!0}))}),g(O,S)}),g(h,v)},$$slots:{default:!0}})};Ve(c,y=>{e(),s(()=>e().length)&&y(k)})}g(n,f),xe(),i()}function Ts(n,t){let a,i;if(t instanceof Element){if(a=t,i=Array.prototype.indexOf.call(n,a),i<0)return null}else if(typeof t=="string"){const e=n.namedItem(t);if(!e||(a=e,i=Array.prototype.indexOf.call(n,a),i<0))return null}else if(t<0){i=n.length+t;const e=n.item(i);if(!e)return null;a=e}else{i=t;const e=n.item(i);if(!e)return null;a=e}return[a,i]}class bc{constructor(t){we(this,"parent");this.parent=t}insertElement(t,a){const i=Ts(this.parent.children,a);if(!i)return-1;const[e,o]=i;return this.parent.insertBefore(t,e[0]),o}appendElement(t,a){var p;const i=Ts(this.parent.children,a);if(!i)return-1;const[e,o]=i,m=(p=e.nextElementSibling)!=null?p:null;return this.parent.insertBefore(t,m),o+1}updateElement(t,a){const i=Ts(this.parent.children,a);return i?(t(...i),!0):!1}}function xc(n){return new bc(n)}function Sc(n){return n.nodeType===Node.ELEMENT_NODE}function Oc(n){function t(i){ia(n,i)}return[{get(){return Ms(n)},available(){return oa(n)}},t]}function Rc(n,t,a,i){const e=qe([]);e.subscribe(t);function o(x,v){e.update(C=>(C.splice(x,0,v),C))}const[m,p]=Ls(),u=m.then(xc),f=qe([]);async function c(x,v){const[C,O]=Ls(),D=await u,S=n();function R(L){return!x.id||L.id===x.id}async function H(L,E){for(const M of L)for(const P of M.addedNodes){if(!Sc(P)||!R(P))continue;const b=v(P,D);return b>=0&&o(b,S),O(void 0),E.disconnect()}}new MutationObserver(H).observe(D.parent,{childList:!0});const Y={component:x,hostProps:S};return f.update(L=>(L.push(Y),L)),await C,{destroy(){f.update(L=>(nu(L,Y),L))}}}async function k(x,v){return(await u).updateElement((O,D)=>{e.update(S=>(S[D]=x(S[D]),S))},v)}const y=i({addComponent:c,updateProps:k});function h(){const x=n();return e.update(v=>(v.push(x),v)),x}return a({getProps:h}),{dynamicSlotted:f,resolveSlotContainer:p,slotsInterface:y}}function Tc(){return{detach:qe(!1)}}function Dc({addComponent:n,updateProps:t}){function a(p,u=0){return n(p,(f,c)=>c.insertElement(f,u))}function i(p,u=-1){return n(p,(f,c)=>c.appendElement(f,u))}function e(p){return t(u=>(u.detach.set(!1),u),p)}function o(p){return t(u=>(u.detach.set(!0),u),p)}function m(p){return t(u=>(u.detach.update(f=>!f),u),p)}return{insert:a,append:i,show:e,hide:o,toggle:m}}const Ic=Symbol("dynamicSlotting"),[Er,Ac]=Oc(Ic);var Ec=ee('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function dt(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(h,"$dynamicSlotted",a);function o(D){return D}let m=V(t,"slotHost",8),p=V(t,"createProps",8,Tc),u=V(t,"updatePropsList",8,o),f=V(t,"setSlotHostContext",8,Ac),c=V(t,"createInterface",8,Dc);const{slotsInterface:k,resolveSlotContainer:y,dynamicSlotted:h}=Rc(p(),u(),f(),c());let x=V(t,"api",8);Object.assign(x(),k),Oe();var v=Ec(),C=j(v);_t(C,t,"default",{});var O=$(C,2);Zt(O,1,e,({component:D,hostProps:S})=>D.id,(D,S)=>{let R=()=>r(S).component,H=()=>r(S).hostProps;var U=it(),Y=ce(U);Es(Y,m,(L,E)=>{E(L,{get id(){return R(),s(()=>R().id)},get hostProps(){return H()},children:(M,P)=>{var l=it(),b=ce(l);Es(b,()=>R().component,(K,z)=>{z(K,Ur(()=>R().props))}),g(M,l)},$$slots:{default:!0}})}),g(D,U)}),A(v),pn(v,D=>y==null?void 0:y(D)),g(n,v),xe(),i()}var Lc=ee('<div class="item svelte-u5rx4p"><!></div>');function J(n,t){var k;be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$detach",a);let o=V(t,"id",8,void 0),m=V(t,"hostProps",8,void 0);Er.available()||console.log("Item: should always have a slotHostContext");const{detach:p}=(k=m())!=null?k:Er.get().getProps();Oe();var u=Lc(),f=j(u);{var c=y=>{var h=it(),x=ce(h);_t(x,t,"default",{}),g(y,h)};Ve(f,y=>{e()||y(c)})}A(u),W(()=>st(u,"id",o())),g(n,u),xe(),i()}var Mc=ee(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Rt(n,t){be(t,!1);let a=V(t,"title",8);Oe(),re();var i=Mc(),e=ce(i),o=$(e),m=j(o);$s(m,{get icon(){return au}}),A(o),W(p=>{var u;F(e,`${(u=a())!=null?u:""} `),st(o,"title",p)},[()=>(w(G),s(()=>vs()))],q),g(n,i),xe()}var Nc=ee('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Fc=ee('<div class="m-2"><!></div>');function Vc(n,t){let a=V(t,"value",12),i=V(t,"title",8);var e=Fc(),o=j(e);Tt(o,{children:(m,p)=>{var u=Nc(),f=j(u),c=j(f);Rt(c,{get title(){return i()}}),A(f);var k=$(f,2),y=j(k);jr(y),A(k),A(u),ts(y,a),g(m,u)},$$slots:{default:!0,revert:(m,p)=>{es(m,{slot:"revert",defaultValue:"",get value(){return a()},set value(u){a(u)},$$legacy:!0})}}}),A(e),g(n,e)}var Hc=ee('<span class="invisible svelte-xwrhci"> </span>'),Bc=ee('<span class="suffix svelte-xwrhci"></span>'),zc=ee('<div tabindex="-1" role="button"><!></div> <div tabindex="-1" role="button"><!></div>',1),Wc=ee('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"/> <!> <!></div>');function Pn(n,t){be(t,!1);const a=T();let i=V(t,"value",12),e=V(t,"step",8,1),o=V(t,"min",8,1),m=V(t,"max",8,9999),p=V(t,"percentage",8,!1),u=T(),f=V(t,"focused",12,!1),c=T();function k(_){Number.isNaN(_)||i(Math.min(m(),Math.max(o(),_))),xt().then(()=>{St(u,r(u).value=r(h)),S(r(h))})}function y(_){if(Math.floor(_)===_)return 0;const N=_.toString().split(".")[1].length||0,Q=p()?N-2:N;return Math.max(0,Q)}let h=T();function x(){k(parseFloat(this.value)/r(c))}function v(_){f()&&(k(i()+(_.deltaY<0?e():-e())),_.preventDefault())}function C(_){k(i()+_),r(U)&&setTimeout(()=>C(_),Y)}const O=[1500,1250,1e3,750,500,250];async function D(_){d(U,!0),Y=128,d(L,setTimeout(_,250));for(const N of O)Y=await new Promise(Q=>setTimeout(()=>Q(r(U)?Y/2:128),N))}function S(_){d(H,$a({pct:_}).replaceAll("%","-%-").split("-"))}function R(){S(r(u).value)}let H=T(),U=T(!1),Y,L=T();ie(()=>w(p()),()=>{d(c,p()?100:1)}),ie(()=>(w(i()),r(c),w(e())),()=>{d(h,(i()*r(c)).toFixed(y(e())))}),ie(()=>r(h),()=>{S(r(h))}),ie(()=>(w(p()),r(H)),()=>{d(a,p()&&!r(H)[0]?"2.2ch":void 0)}),Ye(),Oe();var E=Wc(),M=j(E);mt(M);let P;Mt(M,_=>d(u,_),()=>r(u));var l=$(M,2);{var b=_=>{var N=Bc();Zt(N,5,()=>r(H),ms,(Q,le)=>{var ae=it(),ve=ce(ae);{var X=de=>{var he=Z("%");g(de,he)},Re=de=>{var he=Hc(),Pe=j(he,!0);A(he),W(()=>F(Pe,r(le))),g(de,he)};Ve(ve,de=>{r(le)=="%"?de(X):de(Re,!1)})}g(Q,ae)}),A(N),g(_,N)};Ve(l,_=>{p()&&_(b)})}var K=$(l,2);{var z=_=>{var N=zc(),Q=ce(N);let le;var ae=j(Q);kr(ae,{children:(de,he)=>{$s(de,{get icon(){return hn}})},$$slots:{default:!0}}),A(Q);var ve=$(Q,2);let X;var Re=j(ve);kr(Re,{children:(de,he)=>{$s(de,{get icon(){return ou}})},$$slots:{default:!0}}),A(ve),W((de,he,Pe,Te)=>{le=ot(Q,1,"spinner decrement svelte-xwrhci",null,le,de),st(Q,"title",he),X=ot(ve,1,"spinner increment svelte-xwrhci",null,X,Pe),st(ve,"title",Te)},[()=>({active:i()>o()}),()=>(w(G),s(()=>ha())),()=>({active:i()<m()}),()=>(w(G),s(()=>ma()))],q),Se("click",Q,()=>{r(u).focus(),i()>o()&&C(-e())}),Se("mousedown",Q,()=>D(()=>{i()>o()&&C(-e())})),Se("mouseup",Q,()=>{clearTimeout(r(L)),d(U,!1)}),Se("click",ve,()=>{r(u).focus(),i()<m()&&C(e())}),Se("mousedown",ve,()=>D(()=>{i()<m()&&C(e())})),Se("mouseup",ve,()=>{clearTimeout(r(L)),d(U,!1)}),g(_,N)};Ve(K,_=>{w(Pr),s(Pr)&&_(z)})}A(E),W(()=>{st(M,"min",o()*r(c)),st(M,"max",m()*r(c)),st(M,"step",e()*r(c)),Vs(M,r(h)),P=pa(M,"",P,{"padding-left":r(a)})}),Se("blur",M,x),Se("change",M,x),Se("input",M,R),Se("focusin",M,()=>f(!0)),Se("focusout",M,()=>f(!1)),Se("wheel",E,v),g(n,E),xe()}var Gc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),jc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ft(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8),e=V(t,"min",8,0),o=V(t,"max",8,9999),m=V(t,"step",8,.01),p=V(t,"percentage",8,!1),u=V(t,"focused",12,!1);var f=jc(),c=ce(f);Ke(c,()=>({"--cols":13})),Ue(c.lastChild,{children:(k,y)=>{var h=Gc(),x=ce(h);Ke(x,()=>({"--col-size":7})),kt(x.lastChild,{breakpoint:"xs",children:(C,O)=>{var D=it(),S=ce(D);_t(S,t,"default",{}),g(C,D)},$$slots:{default:!0}}),A(x);var v=$(x,2);Ke(v,()=>({"--col-size":6})),kt(v.lastChild,{breakpoint:"xs",children:(C,O)=>{Tt(C,{children:(D,S)=>{Pn(D,{get min(){return e()},get max(){return o()},get step(){return m()},get percentage(){return p()},get value(){return a()},set value(R){a(R)},get focused(){return u()},set focused(R){u(R)},$$legacy:!0})},$$slots:{default:!0,revert:(D,S)=>{es(D,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(R){a(R)},$$legacy:!0})}}})},$$slots:{default:!0}}),A(v),g(k,h)},$$slots:{default:!0}}),A(c),g(n,f)}var qc=ee("<!> <!>",1),Uc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Qc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function tt(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8),e=V(t,"min",8,0),o=V(t,"max",8,9999);var m=Qc(),p=ce(m);Ke(p,()=>({"--cols":13})),Ue(p.lastChild,{children:(u,f)=>{var c=Uc(),k=ce(c);Ke(k,()=>({"--col-size":7})),kt(k.lastChild,{breakpoint:"xs",children:(h,x)=>{var v=it(),C=ce(v);_t(C,t,"default",{}),g(h,v)},$$slots:{default:!0}}),A(k);var y=$(k,2);Ke(y,()=>({"--col-size":6})),kt(y.lastChild,{breakpoint:"xs",children:(h,x)=>{Ue(h,{class:"flex-grow-1",children:(v,C)=>{var O=qc(),D=ce(O);_t(D,t,"tabs",{});var S=$(D,2);Tt(S,{children:(R,H)=>{Pn(R,{get min(){return e()},get max(){return o()},get value(){return a()},set value(U){a(U)},$$legacy:!0})},$$slots:{default:!0,revert:(R,H)=>{es(R,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(U){a(U)},$$legacy:!0})}}}),g(v,O)},$$slots:{default:!0}})},$$slots:{default:!0}}),A(y),g(u,c)},$$slots:{default:!0}}),A(p),g(n,m)}var Yc=ee('<input type="date" class="svelte-67zife"/>'),Kc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Xc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Zc=ee("<div><!></div>");function Jc(n,t){be(t,!1);let a=V(t,"date",12);ie(()=>w(a()),()=>{a(a()?a():"1970-01-01")}),Ye();var i=Zc(),e=j(i);Tt(e,{children:(o,m)=>{var p=Xc(),u=ce(p);Ke(u,()=>({"--cols":13})),Ue(u.lastChild,{children:(f,c)=>{var k=Kc(),y=ce(k);Ke(y,()=>({"--col-size":7})),kt(y.lastChild,{breakpoint:"xs",children:(x,v)=>{var C=it(),O=ce(C);_t(O,t,"default",{}),g(x,C)},$$slots:{default:!0}}),A(y);var h=$(y,2);Ke(h,()=>({"--col-size":6})),kt(h.lastChild,{breakpoint:"xs",children:(x,v)=>{var C=Yc();mt(C),ts(C,a),g(x,C)},$$slots:{default:!0}}),A(h),g(f,k)},$$slots:{default:!0}}),A(u),g(o,p)},$$slots:{default:!0}}),A(i),g(n,i),xe()}var ed=ee("<!> <!> <!> <!> <!>",1),td=ee("<!> <!> <!>",1),sd=ee("<!> <!> <!> <!>",1);function rd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(y,"$config",a),o=()=>ye(v,"$fsrs",a),m=()=>ye(x,"$cardStateCustomizer",a),p=T(),u=T(),f=T();let c=V(t,"state",8),k=V(t,"api",8);const y=c().currentConfig,h=c().defaults,x=c().cardStateCustomizer,v=c().fsrs,C={maximumInterval:{title:Yr(),help:Aa(),url:pe.DeckOptions.maximumInterval},historicalRetention:{title:cr(),help:Ia(),sched:et.FSRS},ignoreRevlogsBeforeMs:{title:ur(),help:Da(),sched:et.FSRS},startingEase:{title:Ta(),help:Ra(),url:pe.DeckOptions.startingEase,sched:et.SM2},easyBonus:{title:Oa(),help:Sa(),url:pe.DeckOptions.easyBonus,sched:et.SM2},intervalModifier:{title:xa(),help:ba(),url:pe.DeckOptions.intervalModifier,sched:et.SM2},hardInterval:{title:Pa(),help:ka(),url:pe.DeckOptions.hardInterval,sched:et.SM2},newInterval:{title:_a(),help:wa(),url:pe.DeckOptions.newInterval,sched:et.SM2},customScheduling:{title:Ca(),help:ya(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling",global:!0}},O=Object.values(C);let D=T(null),S="";function R(b){S!=b&&(U&&b&&b!="1970-01-01"?(S=b,Gn({search:e().paramSearch||`preset:"${c().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:b}).then(K=>{d(D,K)})):d(D,null),U=!0)}let H=T(void 0),U=!0;const Y=1e3;let L=T("alert-warning"),E=T(),M=T();function P(b){r(E).show(),r(M).to(b)}ie(()=>e(),()=>{d(p,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ie(()=>(e(),G),()=>{d(u,e().maximumReviewInterval<180?Ea():"")}),ie(()=>(r(H),e()),()=>{clearTimeout(r(H)),d(H,setTimeout(()=>{R(e().ignoreRevlogsBeforeDate)},Y))}),ie(()=>r(D),()=>{r(D)&&(Number(r(D).included)/Number(r(D).total)<.1?d(L,"alert-danger"):r(D).included!=r(D).total?d(L,"alert-warning"):d(L,"alert-info"))}),ie(()=>(r(D),G),()=>{d(f,r(D)?La({included:r(D).included.toString(),totalCards:r(D).total.toString()}):"")}),Ye(),Oe();const l=q(()=>(w(G),s(()=>dr())));lt(n,{get title(){return r(l)},children:(b,K)=>{dt(b,{get slotHost(){return J},get api(){return k()},children:(z,_)=>{var N=sd(),Q=ce(N);J(Q,{children:(de,he)=>{tt(de,{get defaultValue(){return s(()=>h.maximumReviewInterval)},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(Pe){te(y,s(e).maximumReviewInterval=Pe,s(e))},children:(Pe,Te)=>{se(Pe,{$$events:{click:()=>P(Object.keys(C).indexOf("maximumInterval"))},children:(oe,_e)=>{re();var He=Z();W(()=>F(He,s(()=>C.maximumInterval.title))),g(oe,He)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=$(Q,2);J(le,{children:(de,he)=>{Qe(de,{get warning(){return r(u)},get className(){return r(p)}})},$$slots:{default:!0}});var ae=$(le,2);{var ve=de=>{var he=ed(),Pe=ce(he);J(Pe,{children:(Le,Me)=>{ft(Le,{get defaultValue(){return s(()=>h.initialEase)},min:1.31,max:5,get value(){return e().initialEase},set value(me){te(y,s(e).initialEase=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>P(Object.keys(C).indexOf("startingEase"))},children:(Ae,De)=>{re();var Ie=Z();W(()=>F(Ie,s(()=>C.startingEase.title))),g(Ae,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Te=$(Pe,2);J(Te,{children:(Le,Me)=>{ft(Le,{get defaultValue(){return s(()=>h.easyMultiplier)},min:1,max:5,get value(){return e().easyMultiplier},set value(me){te(y,s(e).easyMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>P(Object.keys(C).indexOf("easyBonus"))},children:(Ae,De)=>{re();var Ie=Z();W(()=>F(Ie,s(()=>C.easyBonus.title))),g(Ae,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var oe=$(Te,2);J(oe,{children:(Le,Me)=>{ft(Le,{get defaultValue(){return s(()=>h.intervalMultiplier)},min:.5,max:2,get value(){return e().intervalMultiplier},set value(me){te(y,s(e).intervalMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>P(Object.keys(C).indexOf("intervalModifier"))},children:(Ae,De)=>{re();var Ie=Z();W(()=>F(Ie,s(()=>C.intervalModifier.title))),g(Ae,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _e=$(oe,2);J(_e,{children:(Le,Me)=>{ft(Le,{get defaultValue(){return s(()=>h.hardMultiplier)},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(me){te(y,s(e).hardMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>P(Object.keys(C).indexOf("hardInterval"))},children:(Ae,De)=>{re();var Ie=Z();W(()=>F(Ie,s(()=>C.hardInterval.title))),g(Ae,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var He=$(_e,2);J(He,{children:(Le,Me)=>{ft(Le,{get defaultValue(){return s(()=>h.lapseMultiplier)},max:1,get value(){return e().lapseMultiplier},set value(me){te(y,s(e).lapseMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>P(Object.keys(C).indexOf("newInterval"))},children:(Ae,De)=>{re();var Ie=Z();W(()=>F(Ie,s(()=>C.newInterval.title))),g(Ae,Ie)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(de,he)},X=de=>{var he=td(),Pe=ce(he);ft(Pe,{get defaultValue(){return s(()=>h.historicalRetention)},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(_e){te(y,s(e).historicalRetention=_e,s(e))},children:(_e,He)=>{se(_e,{$$events:{click:()=>P(Object.keys(C).indexOf("historicalRetention"))},children:(Le,Me)=>{re();var me=Z();W(ke=>F(me,ke),[()=>(w(G),s(()=>cr()))],q),g(Le,me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Te=$(Pe,2);J(Te,{children:(_e,He)=>{Jc(_e,{get date(){return e().ignoreRevlogsBeforeDate},set date(Le){te(y,s(e).ignoreRevlogsBeforeDate=Le,s(e))},children:(Le,Me)=>{se(Le,{$$events:{click:()=>P(Object.keys(C).indexOf("ignoreRevlogsBeforeMs"))},children:(me,ke)=>{re();var Ae=Z();W(De=>F(Ae,De),[()=>(w(G),s(()=>ur()))],q),g(me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var oe=$(Te,2);J(oe,{children:(_e,He)=>{Qe(_e,{get warning(){return r(f)},get className(){return r(L)}})},$$slots:{default:!0}}),g(de,he)};Ve(ae,de=>{o()?de(X,!1):de(ve)})}var Re=$(ae,2);J(Re,{children:(de,he)=>{Vc(de,{get title(){return s(()=>C.customScheduling.title)},get value(){return Ot(),m()},set value(Pe){vt(x,Pe)},$$events:{click:()=>P(Object.keys(C).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),g(z,N)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(b,K)=>{const z=q(()=>(w(G),s(()=>dr())));$t(b,{get title(){return r(z)},get url(){return w(pe),s(()=>pe.DeckOptions.advanced)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return O},$$events:{mount:_=>{d(E,_.detail.modal),d(M,_.detail.carousel)}}})}}}),xe(),i()}var nd=ee("<!> <!>",1);function ad(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$config",a);let o=V(t,"state",8),m=V(t,"api",8);const p=o().currentConfig,u=o().defaults,f={disableAutoplay:{title:Va(),help:Fa()},skipQuestionWhenReplaying:{title:Na(),help:Ma()}},c=Object.values(f);let k=T(),y=T();function h(v){r(k).show(),r(y).to(v)}Oe();const x=q(()=>(w(G),s(()=>fr())));lt(n,{get title(){return r(x)},children:(v,C)=>{dt(v,{get slotHost(){return J},get api(){return m()},children:(O,D)=>{var S=nd(),R=ce(S);J(R,{children:(U,Y)=>{Xe(U,{get defaultValue(){return s(()=>u.disableAutoplay)},get value(){return e().disableAutoplay},set value(L){te(p,s(e).disableAutoplay=L,s(e))},children:(L,E)=>{se(L,{$$events:{click:()=>h(Object.keys(f).indexOf("disableAutoplay"))},children:(M,P)=>{re();var l=Z();W(()=>F(l,s(()=>f.disableAutoplay.title))),g(M,l)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=$(R,2);J(H,{children:(U,Y)=>{Xe(U,{get defaultValue(){return s(()=>u.skipQuestionWhenReplayingAnswer)},get value(){return e().skipQuestionWhenReplayingAnswer},set value(L){te(p,s(e).skipQuestionWhenReplayingAnswer=L,s(e))},children:(L,E)=>{se(L,{$$events:{click:()=>h(Object.keys(f).indexOf("skipQuestionWhenReplaying"))},children:(M,P)=>{re();var l=Z();W(()=>F(l,s(()=>f.skipQuestionWhenReplaying.title))),g(M,l)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(O,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(v,C)=>{const O=q(()=>(w(G),s(()=>fr())));$t(v,{get title(){return r(O)},get url(){return w(pe),s(()=>pe.DeckOptions.audio)},slot:"tooltip",get helpSections(){return c},$$events:{mount:D=>{d(k,D.detail.modal),d(y,D.detail.carousel)}}})}}}),xe(),i()}function Lr(){return[{label:Ua(),value:ht.DECK},{label:Qa(),value:ht.DECK_THEN_RANDOM_NOTES},{label:Ya(),value:ht.LOWEST_POSITION},{label:Ka(),value:ht.HIGHEST_POSITION},{label:Xa(),value:ht.RANDOM_NOTES},{label:Za(),value:ht.RANDOM_CARDS}]}function Mr(){return[{label:Ja(),value:ut.TEMPLATE},{label:eo(),value:ut.NO_SORT},{label:to(),value:ut.TEMPLATE_THEN_RANDOM},{label:so(),value:ut.RANDOM_NOTE_THEN_TEMPLATE},{label:Kr(),value:ut.RANDOM_CARD}]}function hs(n){return[{label:oo(),value:at.DAY},{label:io(),value:at.DAY_THEN_DECK},{label:lo(),value:at.DECK_THEN_DAY},{label:uo(),value:at.INTERVALS_ASCENDING},{label:co(),value:at.INTERVALS_DESCENDING},...od(n),{label:fo(),value:at.RETRIEVABILITY_ASCENDING},{label:go(),value:at.RETRIEVABILITY_DESCENDING},{label:Kr(),value:at.RANDOM},{label:vo(),value:at.ADDED},{label:$o(),value:at.REVERSE_ADDED}]}function fs(){return[{label:ro(),value:Ss.MIX_WITH_REVIEWS},{label:no(),value:Ss.AFTER_REVIEWS},{label:ao(),value:Ss.BEFORE_REVIEWS}]}function Nr(){return[{label:Co(),value:bt.SUSPEND},{label:wo(),value:bt.TAG_ONLY}]}function Fr(){return[{label:_o(),value:Is.DUE},{label:ko(),value:Is.RANDOM}]}function Vr(){return[{label:za(),value:Kt.BURY_CARD},{label:Wa(),value:Kt.ANSWER_AGAIN},{label:Ga(),value:Kt.ANSWER_GOOD},{label:ja(),value:Kt.ANSWER_HARD},{label:qa(),value:Kt.SHOW_REMINDER}]}function Hr(){return[{label:Ha(),value:sr.SHOW_ANSWER},{label:Ba(),value:sr.SHOW_REMINDER}]}function od(n){const t=[{label:n?po():ho(),value:at.EASE_ASCENDING},{label:n?mo():yo(),value:at.EASE_DESCENDING}];return n&&t.reverse(),t}var id=ee("<!> <!> <!> <!> <!>",1);function ld(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$config",a);let o=V(t,"state",8),m=V(t,"api",8);const p=o().currentConfig,u=o().defaults,f={secondsToShowQuestion:{title:Ao(),help:Io()},secondsToShowAnswer:{title:Do(),help:To()},waitForAudio:{title:Ro(),help:Oo()},questionAction:{title:So(),help:xo()},answerAction:{title:bo(),help:Po()}},c=Object.values(f);let k=T(),y=T();function h(v){r(k).show(),r(y).to(v)}Oe();const x=q(()=>(w(G),s(()=>gr())));lt(n,{get title(){return r(x)},children:(v,C)=>{dt(v,{get slotHost(){return J},get api(){return m()},children:(O,D)=>{var S=id(),R=ce(S);J(R,{children:(E,M)=>{ft(E,{get defaultValue(){return s(()=>u.secondsToShowQuestion)},step:.1,get value(){return e().secondsToShowQuestion},set value(P){te(p,s(e).secondsToShowQuestion=P,s(e))},children:(P,l)=>{se(P,{$$events:{click:()=>h(Object.keys(f).indexOf("secondsToShowQuestion"))},children:(b,K)=>{re();var z=Z();W(()=>F(z,s(()=>f.secondsToShowQuestion.title))),g(b,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=$(R,2);J(H,{children:(E,M)=>{ft(E,{get defaultValue(){return s(()=>u.secondsToShowAnswer)},step:.1,get value(){return e().secondsToShowAnswer},set value(P){te(p,s(e).secondsToShowAnswer=P,s(e))},children:(P,l)=>{se(P,{$$events:{click:()=>h(Object.keys(f).indexOf("secondsToShowAnswer"))},children:(b,K)=>{re();var z=Z();W(()=>F(z,s(()=>f.secondsToShowAnswer.title))),g(b,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=$(H,2);J(U,{children:(E,M)=>{Xe(E,{get defaultValue(){return s(()=>u.waitForAudio)},get value(){return e().waitForAudio},set value(P){te(p,s(e).waitForAudio=P,s(e))},children:(P,l)=>{se(P,{$$events:{click:()=>h(Object.keys(f).indexOf("waitForAudio"))},children:(b,K)=>{re();var z=Z();W(()=>F(z,s(()=>f.waitForAudio.title))),g(b,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=$(U,2);J(Y,{children:(E,M)=>{const P=q(()=>(w(Hr),s(Hr)));gt(E,{get defaultValue(){return s(()=>u.questionAction)},get choices(){return r(P)},get value(){return e().questionAction},set value(l){te(p,s(e).questionAction=l,s(e))},children:(l,b)=>{se(l,{$$events:{click:()=>h(Object.keys(f).indexOf("questionAction"))},children:(K,z)=>{re();var _=Z();W(()=>F(_,s(()=>f.questionAction.title))),g(K,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=$(Y,2);J(L,{children:(E,M)=>{const P=q(()=>(w(Vr),s(Vr)));gt(E,{get defaultValue(){return s(()=>u.answerAction)},get choices(){return r(P)},get value(){return e().answerAction},set value(l){te(p,s(e).answerAction=l,s(e))},children:(l,b)=>{se(l,{$$events:{click:()=>h(Object.keys(f).indexOf("answerAction"))},children:(K,z)=>{re();var _=Z();W(()=>F(_,s(()=>f.answerAction.title))),g(K,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(O,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(v,C)=>{const O=q(()=>(w(G),s(()=>gr())));$t(v,{get title(){return r(O)},get url(){return w(pe),s(()=>pe.DeckOptions.autoAdvance)},slot:"tooltip",get helpSections(){return c},$$events:{mount:D=>{d(k,D.detail.modal),d(y,D.detail.carousel)}}})}}}),xe(),i()}var ud=ee("<!> <!> <!>",1);function cd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$config",a);let o=V(t,"state",8),m=V(t,"api",8);const p=o().currentConfig,u=o().defaults,f=`

`+Eo(),c={buryNewSiblings:{title:Ho(),help:Vo()+f},buryReviewSiblings:{title:Fo(),help:No()+f},buryInterdayLearningSiblings:{title:Mo(),help:Lo()+f}},k=Object.values(c);let y=T(),h=T();function x(C){r(y).show(),r(h).to(C)}Oe();const v=q(()=>(w(G),s(()=>vr())));lt(n,{get title(){return r(v)},children:(C,O)=>{dt(C,{get slotHost(){return J},get api(){return m()},children:(D,S)=>{var R=ud(),H=ce(R);J(H,{children:(L,E)=>{Xe(L,{get defaultValue(){return s(()=>u.buryNew)},get value(){return e().buryNew},set value(M){te(p,s(e).buryNew=M,s(e))},children:(M,P)=>{se(M,{$$events:{click:()=>x(Object.keys(c).indexOf("buryNewSiblings"))},children:(l,b)=>{re();var K=Z();W(()=>F(K,s(()=>c.buryNewSiblings.title))),g(l,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=$(H,2);J(U,{children:(L,E)=>{Xe(L,{get defaultValue(){return s(()=>u.buryReviews)},get value(){return e().buryReviews},set value(M){te(p,s(e).buryReviews=M,s(e))},children:(M,P)=>{se(M,{$$events:{click:()=>x(Object.keys(c).indexOf("buryReviewSiblings"))},children:(l,b)=>{re();var K=Z();W(()=>F(K,s(()=>c.buryReviewSiblings.title))),g(l,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=$(U,2);J(Y,{children:(L,E)=>{Xe(L,{get defaultValue(){return s(()=>u.buryInterdayLearning)},get value(){return e().buryInterdayLearning},set value(M){te(p,s(e).buryInterdayLearning=M,s(e))},children:(M,P)=>{se(M,{$$events:{click:()=>x(Object.keys(c).indexOf("buryInterdayLearningSiblings"))},children:(l,b)=>{re();var K=Z();W(()=>F(K,s(()=>c.buryInterdayLearningSiblings.title))),g(l,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(D,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,O)=>{const D=q(()=>(w(G),s(()=>vr())));$t(C,{get title(){return r(D)},get url(){return w(pe),s(()=>pe.Studying.siblingsAndBurying)},slot:"tooltip",get helpSections(){return k},$$events:{mount:S=>{d(y,S.detail.modal),d(h,S.detail.carousel)}}})}}}),xe(),i()}function dd(){}var fd=ee('<hr class="dropdown-divider"/>');function gd(n){var t=fd();g(n,t)}var vd=ee('<div class="save svelte-ymxw35"> </div>'),$d=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),pd=ee("<!> <!> <!> <!> <!> <!>",1),hd=ee('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function md(n,t){be(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",i=qr();let e=V(t,"state",8);async function o(){if(await xt(),e().defaultConfigSelected()){alert(Go());return}const x=(e().removalWilLForceFullSync()?jo()+" ":"")+qo({name:e().getCurrentName()});if(confirm(sa(x)))try{e().removeCurrentConfig(),i("remove")}catch(v){alert(v)}}async function m(x){await Gs(),e().save(x)}const p="Control+Enter";let u=T(!1);Oe();var f=hd(),c=j(f);const k=q(()=>(w(br),s(()=>br(p))));Ke(c,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),uu(c.lastChild,{primary:!0,get tooltip(){return r(k)},$$events:{click:()=>m(gs.NORMAL)},children:(x,v)=>{var C=vd(),O=j(C,!0);A(C),W(D=>F(O,D),[()=>(w(G),s(()=>Bo()))],q),g(x,C)},$$slots:{default:!0}}),A(c);var y=$(c,2);iu(y,{keyCombination:p,$$events:{action:()=>m(gs.NORMAL)}});var h=$(y,2);su(h,{get show(){return r(u)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>d(u,!1)},$$slots:{reference:(x,v)=>{var C=$d(),O=ce(C);Ke(O,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),du(O.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>d(u,!r(u))},children:(D,S)=>{$s(D,{get icon(){return hn}})},$$slots:{default:!0}}),A(O),g(x,C)},floating:(x,v)=>{ru(x,{slot:"floating",children:(C,O)=>{var D=pd(),S=ce(D);Xt(S,{$$events:{click:()=>i("add")},children:(E,M)=>{re();var P=Z();W(l=>F(P,l),[()=>(w(G),s(()=>Xr()))],q),g(E,P)},$$slots:{default:!0}});var R=$(S,2);Xt(R,{$$events:{click:()=>i("clone")},children:(E,M)=>{re();var P=Z();W(l=>F(P,l),[()=>(w(G),s(()=>Zr()))],q),g(E,P)},$$slots:{default:!0}});var H=$(R,2);Xt(H,{$$events:{click:()=>i("rename")},children:(E,M)=>{re();var P=Z();W(l=>F(P,l),[()=>(w(G),s(()=>Jr()))],q),g(E,P)},$$slots:{default:!0}});var U=$(H,2);Xt(U,{$$events:{click:o},children:(E,M)=>{re();var P=Z();W(l=>F(P,l),[()=>(w(G),s(()=>zo()))],q),g(E,P)},$$slots:{default:!0}});var Y=$(U,2);gd(Y);var L=$(Y,2);Xt(L,{$$events:{click:()=>m(gs.APPLY_TO_CHILDREN)},children:(E,M)=>{re();var P=Z();W(l=>F(P,l),[()=>(w(G),s(()=>Wo()))],q),g(E,P)},$$slots:{default:!0}}),g(C,D)},$$slots:{default:!0}})}}}),A(f),g(n,f),xe()}var yd=ee('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text"/></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Cd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(Kl,"$pageTheme",a),o=T();let m=V(t,"title",8),p=V(t,"prompt",8),u=V(t,"initialValue",8,""),f=V(t,"onOk",8);const c=Math.random().toString(36).substring(2),k=Ms(mn);let y=T(),h,x=T();function v(){f()(r(x).value),h.hide(),d(o,u())}function C(){h.hide(),d(o,u())}function O(){r(x).focus(),S(!0)}function D(){S(!1)}const{set:S,remove:R}=fu(C);Ns(()=>{r(y).addEventListener("shown.bs.modal",O),r(y).addEventListener("hidden.bs.modal",D),h=new vn(r(y),{keyboard:!1}),k.set(c,h)}),ga(()=>{R(),r(y).removeEventListener("shown.bs.modal",O),r(y).removeEventListener("hidden.bs.modal",D)}),ie(()=>w(u()),()=>{d(o,u())}),Ye(),Oe();var H=yd(),U=j(H),Y=j(U);let L;var E=j(Y),M=j(E),P=j(M,!0);A(M);var l=$(M,2);let b;A(E);var K=$(E,2),z=j(K),_=j(z),N=j(_),Q=j(N);A(N);var le=$(N,2);mt(le);let ae;Mt(le,he=>d(x,he),()=>r(x)),A(_),A(z),A(K);var ve=$(K,2),X=j(ve),Re=$(X,2);A(ve),A(Y),A(U),A(H),Mt(H,he=>d(y,he),()=>r(y)),W((he,Pe,Te)=>{var oe;L=ot(Y,1,"modal-content svelte-18qg9px",null,L,he),F(P,m()),b=ot(l,1,"btn-close svelte-18qg9px",null,b,Pe),F(Q,`${(oe=p())!=null?oe:""}:`),ae=ot(le,1,"form-control svelte-18qg9px",null,ae,Te)},[()=>({"default-colors":e().isDark}),()=>({invert:e().isDark}),()=>({nightMode:e().isDark})],q),ts(le,()=>r(o),he=>d(o,he)),Se("submit",z,lu(v)),Se("click",X,C),Se("click",Re,v),g(n,H),Je(t,"modalKey",c);var de=xe({modalKey:c});return i(),de}var wd=ee('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),_d=ee('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function kd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$configList",a),o=T(),m=T();let p=V(t,"state",8);const u=p().configList,f=qr(),c=()=>f("presetchange");function k(l){const b=Uo({decks:l.useCount});return`${l.name} (${b})`}function y(l){p().setCurrentIndex(l.detail.value),c()}function h(l){const b=l.trim();b.length&&(p().addConfig(b),c())}function x(l){const b=l.trim();b.length&&(p().cloneConfig(b),c())}function v(l){p().setCurrentName(l)}const C=Ms(mn);let O=T(),D=T(""),S=T(""),R=T(dd);function H(){d(S,Xr()),d(R,h),d(D,""),C.get(r(O)).show()}function U(){d(S,Zr()),d(R,x),d(D,p().getCurrentName()),C.get(r(O)).show()}function Y(){d(S,Jr()),d(R,v),d(D,p().getCurrentName()),C.get(r(O)).show()}ie(()=>e(),()=>{d(o,e().findIndex(l=>l.current))}),ie(()=>(e(),r(o)),()=>{d(m,k(e()[r(o)]))}),Ye(),Oe();var L=_d(),E=ce(L);const M=q(()=>(w(G),s(()=>Qo())));Cd(E,{get title(){return r(S)},get prompt(){return r(M)},get initialValue(){return r(D)},get onOk(){return r(R)},get modalKey(){return r(O)},set modalKey(l){d(O,l)},$$legacy:!0});var P=$(E,2);Ke(P,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),cu(P.lastChild,{breakpoint:"sm",children:(l,b)=>{var K=wd(),z=j(K);va(z,{class:"flex-grow-1 mr1",get label(){return r(m)},get list(){return e()},parser:N=>({content:k(N),value:N.idx}),get value(){return r(o)},set value(N){d(o,N)},$$events:{change:y},$$legacy:!0});var _=$(z,2);md(_,{get state(){return p()},$$events:{add:H,clone:U,rename:Y,remove:c}}),A(K),g(l,K)},$$slots:{default:!0}}),A(P),g(n,L),xe(),i()}var Pd=ee('<li><button class="svelte-11xpnuy"> </button></li>'),bd=ee('<ul class="svelte-11xpnuy"></ul>');function Br(n,t){be(t,!1);let a=V(t,"tabs",8),i=V(t,"value",12),e=T(o());function o(){const f=a().slice().reverse().findIndex(c=>c.value!==null);return f===-1?0:a().length-f-1}function m(f){for(const[c,k]of a().entries())f===c?k.enable(i()):f>c?k.reset():k.disable()}const p=f=>()=>d(e,f);ie(()=>r(e),()=>{m(r(e))}),ie(()=>(w(a()),r(e)),()=>{var f;i((f=a()[r(e)].value)!=null?f:0)}),ie(()=>(w(a()),r(e),w(i())),()=>{a()[r(e)].setValue(i())}),Ye(),Oe();var u=bd();Zt(u,5,a,ms,(f,c,k)=>{var y=Pd();let h;var x=j(y),v=la(()=>p(k)),C=j(x,!0);A(x),A(y),W(O=>{h=ot(y,1,"svelte-11xpnuy",null,h,O),F(C,(r(c),s(()=>r(c).title)))},[()=>({active:r(e)===k})],q),Se("click",x,function(...O){var D;(D=r(v))==null||D.apply(this,O)}),g(f,y)}),A(u),g(n,u),xe()}var xd=ee("<!> <!> <!> <!> <!>",1);function Sd(n,t){var _,N,Q,le,ae,ve;be(t,!1);const[a,i]=ze(),e=()=>ye(y,"$config",a),o=()=>ye(h,"$limits",a),m=()=>ye(v,"$newCardsIgnoreReviewLimit",a),p=()=>ye(C,"$applyAllParentLimits",a),u=T();let f=V(t,"state",8),c=V(t,"api",8);function k(){St(H,r(H)[0]=new wt(cs(),e().newPerDay,X=>te(y,s(e).newPerDay=X,s(e)),e().newPerDay,null)),St(U,r(U)[0]=new wt(cs(),e().reviewsPerDay,X=>te(y,s(e).reviewsPerDay=X,s(e)),e().reviewsPerDay,null))}const y=f().currentConfig,h=f().deckLimits,x=f().defaults,v=f().newCardsIgnoreReviewLimit,C=f().applyAllParentLimits,O=`

`+Yo()+`

`+Ko(),D=`

`+Xo()+O,S=vs()+`

`+Zo(),R=vs()+`

`+Jo(),H=T([new wt(cs(),e().newPerDay,X=>te(y,s(e).newPerDay=X,s(e)),e().newPerDay,null),new wt($r(),(_=o().new)!=null?_:null,X=>te(h,s(o).new=X!=null?X:void 0,s(o)),null,null),new wt(pr(),o().newTodayActive&&(N=o().newToday)!=null?N:null,X=>te(h,s(o).newToday=X!=null?X:void 0,s(o)),null,(Q=o().newToday)!=null?Q:null)]),U=T([new wt(cs(),e().reviewsPerDay,X=>te(y,s(e).reviewsPerDay=X,s(e)),e().reviewsPerDay,null),new wt($r(),(le=o().review)!=null?le:null,X=>te(h,s(o).review=X!=null?X:void 0,s(o)),null,null),new wt(pr(),o().reviewTodayActive&&(ae=o().reviewToday)!=null?ae:null,X=>te(h,s(o).reviewToday=X!=null?X:void 0,s(o)),null,(ve=o().reviewToday)!=null?ve:null)]);let Y=T(0),L=T(0);const E={newLimit:{title:sn(),help:si()+O,url:pe.DeckOptions.newCardsday},reviewLimit:{title:tn(),help:ti()+D,url:pe.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:en(),help:S,url:pe.DeckOptions.newCardsday,global:!0},applyAllParentLimits:{title:ei(),help:R,url:pe.DeckOptions.newCardsday,global:!0}},M=Object.values(E);let P=T(),l=T();function b(X){r(P).show(),r(l).to(X)}ie(()=>(r(Y),r(L),G),()=>{d(u,Math.min(9999,r(Y)*10)>r(L)?ri({cards:r(Y),expected:Math.min(9999,r(Y)*10)}):"")}),Ye(),Oe();const K=q(()=>(w(G),s(()=>hr())));lt(n,{get title(){return r(K)},children:(X,Re)=>{dt(X,{get slotHost(){return J},get api(){return c()},children:(de,he)=>{var Pe=xd(),Te=ce(Pe);J(Te,{children:(Me,me)=>{tt(Me,{get defaultValue(){return s(()=>x.newPerDay)},get value(){return r(Y)},set value(ke){d(Y,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>b(Object.keys(E).indexOf("newLimit"))},children:(De,Ie)=>{re();var rt=Z();W(()=>F(rt,s(()=>E.newLimit.title))),g(De,rt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ke,Ae)=>{Br(ke,{slot:"tabs",get tabs(){return r(H)},get value(){return r(Y)},set value(De){d(Y,De)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var oe=$(Te,2);J(oe,{children:(Me,me)=>{tt(Me,{get defaultValue(){return s(()=>x.reviewsPerDay)},get value(){return r(L)},set value(ke){d(L,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>b(Object.keys(E).indexOf("reviewLimit"))},children:(De,Ie)=>{re();var rt=Z();W(()=>F(rt,s(()=>E.reviewLimit.title))),g(De,rt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ke,Ae)=>{Br(ke,{slot:"tabs",get tabs(){return r(U)},get value(){return r(L)},set value(De){d(L,De)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var _e=$(oe,2);J(_e,{children:(Me,me)=>{Qe(Me,{get warning(){return r(u)}})},$$slots:{default:!0}});var He=$(_e,2);J(He,{children:(Me,me)=>{Xe(Me,{defaultValue:!1,get value(){return Ot(),m()},set value(ke){vt(v,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>b(Object.keys(E).indexOf("newCardsIgnoreReviewLimit"))},children:(De,Ie)=>{Rt(De,{get title(){return s(()=>E.newCardsIgnoreReviewLimit.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Le=$(He,2);J(Le,{children:(Me,me)=>{Xe(Me,{defaultValue:!1,get value(){return Ot(),p()},set value(ke){vt(C,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>b(Object.keys(E).indexOf("applyAllParentLimits"))},children:(De,Ie)=>{Rt(De,{get title(){return s(()=>E.applyAllParentLimits.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(de,Pe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(X,Re)=>{const de=q(()=>(w(G),s(()=>hr())));$t(X,{get title(){return r(de)},get url(){return w(pe),s(()=>pe.DeckOptions.dailyLimits)},slot:"tooltip",get helpSections(){return M},$$events:{mount:he=>{d(P,he.detail.modal),d(l,he.detail.carousel)}}})}}}),Je(t,"onPresetChange",k);var z=xe({onPresetChange:k});return i(),z}var Od=ee("<!> <!> <!> <!> <!>",1);function Rd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$config",a),o=()=>ye(c,"$fsrs",a);let m=V(t,"state",8),p=V(t,"api",8);const u=m().currentConfig,f=m().defaults,c=m().fsrs,k=`

`+ni();let y=T([]);const h={newGatherPriority:{title:gi(),help:fi()+k},newCardSortOrder:{title:di(),help:ci()+k},newReviewPriority:{title:ui(),help:li()+k},interdayStepPriority:{title:ii(),help:oi()+k},reviewSortOrder:{title:rn(),help:ai()+k}},x=Object.values(h);let v=T(),C=T();function O(S){r(v).show(),r(C).to(S)}ie(()=>(e(),r(y),ht),()=>{switch(e().newCardGatherPriority){case ht.RANDOM_NOTES:d(y,[ut.TEMPLATE_THEN_RANDOM,ut.RANDOM_NOTE_THEN_TEMPLATE]);break;case ht.RANDOM_CARDS:d(y,[ut.TEMPLATE_THEN_RANDOM,ut.RANDOM_NOTE_THEN_TEMPLATE,ut.RANDOM_CARD]);break;default:d(y,[]);break}r(y).includes(e().newCardSortOrder)&&te(u,s(e).newCardSortOrder=0,s(e)),e().newCardSortOrder in ut||te(u,s(e).newCardSortOrder=0,s(e))}),Ye(),Oe();const D=q(()=>(w(G),s(()=>mr())));lt(n,{get title(){return r(D)},children:(S,R)=>{dt(S,{get slotHost(){return J},get api(){return p()},children:(H,U)=>{var Y=Od(),L=ce(Y);J(L,{children:(b,K)=>{const z=q(()=>(w(Lr),s(Lr)));gt(b,{get defaultValue(){return s(()=>f.newCardGatherPriority)},get choices(){return r(z)},get value(){return e().newCardGatherPriority},set value(_){te(u,s(e).newCardGatherPriority=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>O(Object.keys(h).indexOf("newGatherPriority"))},children:(Q,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>h.newGatherPriority.title))),g(Q,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(L,2);J(E,{children:(b,K)=>{const z=q(()=>(w(Mr),s(Mr)));gt(b,{get defaultValue(){return s(()=>f.newCardSortOrder)},get choices(){return r(z)},get disabledChoices(){return r(y)},get value(){return e().newCardSortOrder},set value(_){te(u,s(e).newCardSortOrder=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>O(Object.keys(h).indexOf("newCardSortOrder"))},children:(Q,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>h.newCardSortOrder.title))),g(Q,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var M=$(E,2);J(M,{children:(b,K)=>{const z=q(()=>(w(fs),s(fs)));gt(b,{get defaultValue(){return s(()=>f.newMix)},get choices(){return r(z)},get value(){return e().newMix},set value(_){te(u,s(e).newMix=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>O(Object.keys(h).indexOf("newReviewPriority"))},children:(Q,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>h.newReviewPriority.title))),g(Q,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var P=$(M,2);J(P,{children:(b,K)=>{const z=q(()=>(w(fs),s(fs)));gt(b,{get defaultValue(){return s(()=>f.interdayLearningMix)},get choices(){return r(z)},get value(){return e().interdayLearningMix},set value(_){te(u,s(e).interdayLearningMix=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>O(Object.keys(h).indexOf("interdayStepPriority"))},children:(Q,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>h.interdayStepPriority.title))),g(Q,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var l=$(P,2);J(l,{children:(b,K)=>{const z=q(()=>(w(hs),o(),s(()=>hs(o()))));gt(b,{get defaultValue(){return s(()=>f.reviewOrder)},get choices(){return r(z)},get value(){return e().reviewOrder},set value(_){te(u,s(e).reviewOrder=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>O(Object.keys(h).indexOf("reviewSortOrder"))},children:(Q,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>h.reviewSortOrder.title))),g(Q,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(H,Y)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,R)=>{const H=q(()=>(w(G),s(()=>mr())));$t(S,{get title(){return r(H)},get url(){return w(pe),s(()=>pe.DeckOptions.displayOrder)},slot:"tooltip",get helpSections(){return x},$$events:{mount:U=>{d(v,U.detail.modal),d(C,U.detail.carousel)}}})}}}),xe(),i()}var Td=ee('<textarea class="w-100 svelte-29jwoy"></textarea>');function Dd(n,t){be(t,!1);let a=V(t,"value",12),i=V(t,"defaults",8),e=T(),o=T();function m(){r(o)&&(St(o,r(o).style.height="auto"),St(o,r(o).style.height=`${r(o).scrollHeight+2}px`))}function p(k){return k.map(y=>y.toFixed(4)).join(", ")}const u=[0,17,19,21];function f(k){const y=k.target,h=y.value.replace(/ /g,"").split(",").filter(x=>x).map(x=>Number(x));u.includes(h.length)?a(h):(alert(vi()),y.value=r(e))}ie(()=>(w(a()),xt),()=>{d(e,p(a())),xt().then(m)}),Ye(),Oe();var c=Td();Se("resize",ua,m),jr(c),Mt(c,k=>d(o,k),()=>r(o)),W(k=>{Vs(c,r(e)),st(c,"placeholder",k)},[()=>(w(i()),s(()=>p(i())))],q),Se("blur",c,f),g(n,c),xe()}var Id=ee("<!> <!>",1);function Ad(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8),e=V(t,"defaults",8);var o=Id(),m=ce(o);_t(m,t,"default",{});var p=$(m,2);Tt(p,{children:(u,f)=>{Dd(u,{get defaults(){return e()},get value(){return a()},set value(c){a(c)},$$legacy:!0})},$$slots:{default:!0,revert:(u,f)=>{es(u,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(c){a(c)},$$legacy:!0})}}}),g(n,o)}var Ed=ee('<input type="text" class="w-100 mb-1"/>');function Ld(n,t){let a=V(t,"value",12),i=V(t,"placeholder",8);Tt(n,{children:(e,o)=>{var m=Ed();mt(m),W(()=>st(m,"placeholder",i())),ts(m,a),g(e,m)},$$slots:{default:!0}})}var Be=(n=>(n[n.time=0]="time",n[n.count=1]="count",n[n.memorized=2]="memorized",n))(Be||{});function Ds(n,t,a,i){const e=xr(n);if(e.selectAll(".lines").remove(),e.selectAll(".hover-columns").remove(),e.selectAll(".focus-line").remove(),e.selectAll(".legend").remove(),a.length==0)return Sr(e,!1),[];const o=e.transition().duration(600),m=new Date,p=a.map(l=>({...l,date:new Date(m.getTime()+l.x*24*60*60*1e3)})),u=m,f=Or(p,l=>l.date),c=Eu().domain([u,f]).range([t.marginLeft,t.width-t.marginRight]);e.select(".x-ticks").call(l=>l.transition(o).call(vu(c).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const k=l=>i==0?Rs(l,!0):l.toString(),y={1:p.map(l=>({...l,y:l.count})),0:p.map(l=>({...l,y:l.timeCost})),2:p.map(l=>({...l,y:l.memorized}))}[i],h=Or(y,l=>l.y),x=$u().range([t.height-t.marginBottom,t.marginTop]).domain([0,h]).nice();e.select(".y-ticks").call(l=>l.transition(o).call(pu(x).ticks(t.height/50).tickSizeOuter(0).tickFormat(k))).attr("direction","ltr"),e.select(".y-ticks .y-axis-title").remove(),e.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const v=y.map(l=>[c(l.date),x(l.y),l.label]),C=Bu(v,l=>Object.assign(l,{z:l[0][2]}),l=>l[2]),O=Wu;e.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(C.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(l,b)=>O[b%O.length]).attr("d",l=>hu()(l[1].map(b=>[b[0],b[1]]))).attr("data-group",l=>l[0]);const D=e.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),S=Array.from(C.values()).reduce((l,b)=>l.length>b.length?l:b),R=t.width/S.length;e.append("g").attr("class","hover-columns").selectAll("rect").data(S).join("rect").attr("x",l=>l[0]-R/2).attr("y",t.marginTop).attr("width",R).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",U).on("mouseout",()=>{D.style("opacity",0),Rr()});const H={0:Rs,1:l=>nn({reviews:Math.round(l)}),2:l=>$i({memorized:Math.round(l).toFixed(0)})}[i];function U(l,b){mu(l,document.body);const K=c.invert(b[0]),z={};C.forEach((Q,le)=>{const ae=yu(Re=>c.invert(Re[0])).left,ve=ae(Q,K),X=Q[ve];X&&(z[le]=x.invert(X[1]))}),D.attr("x1",b[0]).attr("x2",b[0]).style("opacity",1);const _=+((K.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let N=`Date: ${ra(K)}<br>In ${_} Days<br>`;for(const[Q,le]of Object.entries(z))e.select(`path[data-group="${Q}"]`).classed("hidden")||(N+=`<span style="color:${O[(parseInt(Q)-1)%O.length]}"></span> #${Q}: ${H(le)}<br>`);Tr(N,l.pageX,l.pageY)}const Y=e.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(C.keys())).join("g").attr("transform",(l,b)=>`translate(0,${b*20})`).attr("cursor","pointer").on("click",(l,b)=>M(l,b)).on("mousemove",E).on("mouseout",Rr),L={1:mi,0:({count:l})=>Rs(l),2:hi}[i];function E(l,b){const K=y.filter(N=>N.label==b),z=i==2?K[K.length-1].memorized-K[0].memorized:yc(K,N=>N.y),_=z/((K==null?void 0:K.length)||1);Tr(`#${b}:<br/>
                ${pi()}: ${L({count:_})}<br/>
                ${yi()}: ${H(z)}`,l.pageX,l.pageY)}Y.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(l,b)=>O[b%O.length]),Y.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(l=>`#${l}`);const M=(l,b)=>{const K=b,z=e.select(`path[data-group="${K}"]`),_=z.classed("hidden"),N=l.currentTarget;z.classed("hidden",!_),z.style("display",()=>_?null:"none"),xr(N).select("rect").style("opacity",_?1:.5)};return Sr(e,!0),[]}var Md=ee('<tr><td class="day svelte-47inpr"> </td><td colspan="3" class="svelte-47inpr"><input type="range" list="easy_day_steplist" class="svelte-47inpr"/></td></tr>'),Nd=ee('<div class="easy-days-settings svelte-47inpr"><table class="svelte-47inpr"><thead><tr><th class="svelte-47inpr"></th><th class="header min-col svelte-47inpr"><span> </span></th><th class="header text-center svelte-47inpr"><span> </span></th><th class="header normal-col svelte-47inpr"><span> </span></th></tr></thead><tbody></tbody></table></div>');function bn(n,t){be(t,!1);const a=[Ci(),wi(),_i(),ki(),Pi(),bi(),xi()];let i=V(t,"values",28,()=>[0,0,0,0,0,0,0]);Oe(),J(n,{children:(e,o)=>{var m=Nd(),p=j(m),u=j(p),f=j(u),c=$(j(f)),k=j(c),y=j(k,!0);A(k),A(c);var h=$(c),x=j(h),v=j(x,!0);A(x),A(h);var C=$(h),O=j(C),D=j(O,!0);A(O),A(C),A(f),A(u);var S=$(u);Zt(S,5,()=>a,ms,(R,H,U)=>{var Y=Md(),L=j(Y),E=j(L,!0);A(L);var M=$(L),P=j(M);mt(P),st(P,"step",.5),st(P,"max",1),st(P,"min",0),A(M),A(Y),W(()=>F(E,r(H))),ts(P,()=>i()[U],l=>i(i()[U]=l,!0)),g(R,Y)}),A(S),A(p),A(m),W((R,H,U)=>{F(y,R),F(v,H),F(D,U)},[()=>(w(G),s(()=>Si())),()=>(w(G),s(()=>Oi())),()=>(w(G),s(()=>Ri()))],q),g(e,m)},$$slots:{default:!0}}),xe()}var Fd=ee(" <!>",1),Vd=ee("<div> </div>"),Hd=ee('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),Bd=ee('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),zd=ee('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <div style="display:none;"><details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!></details></div> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function Wd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(S,"$config",a),o=()=>ye(Y,"$fsrs",a),m=()=>ye(l,"$newCardsIgnoreReviewLimit",a),p=T(),u=T(),f=T(),c=T(),k=T(),y=T(),h=[];let x=V(t,"state",8),v=V(t,"simulateFsrsRequest",12),C=V(t,"computing",8),O=V(t,"openHelpModal",8),D=V(t,"onPresetChange",8);const S=x().currentConfig;let R=T(Be.count),H=T([]),U=T(!1);const Y=x().fsrs,L=Pu();let E=T(null),M=0,P=T([]);const l=x().newCardsIgnoreReviewLimit;let b=T(!0),K=T(e().leechAction==bt.SUSPEND),z=T(e().leechThreshold),_=T(null),N=T(!1),Q=T(void 0);function le(I,ue){const ne=[];for(let Ce=0;Ce<I.length;Ce++){let fe=0,$e=0;for(let Fe=Math.max(0,Ce-ue+1);Fe<=Ce;Fe++)fe+=I[Fe],$e++;ne.push(fe/$e)}return ne}function ae(I,ue){return I.map((ne,Ce)=>ne+ue[Ce])}function ve(I){return I?Gi({num:I.toFixed(2)}):""}function X(){v(v().daysToSimulate=r(p),!0),v(v().deckSize=r(u),!0),v(v().suspendAfterLapseCount=r(K)?r(z):void 0,!0),v(v().easyDaysPercentages=r(y),!0)}function Re(I){return I?Bi({count:I.current}):""}async function de(){let I;X();try{await ps(async()=>{d(N,!0),I=await jn(v())},ue=>{ue.value.case==="computeRetention"&&d(Q,ue.value.value)})}finally{d(N,!1),I&&d(_,I.optimalRetention)}}async function he(){let I;X();try{await ps(async()=>{d(U,!0),I=await qn(v())},()=>{})}finally{if(d(U,!1),I){M+=1;const ue=ae(I.dailyReviewCount,I.dailyNewCount),ne=I.accumulatedKnowledgeAcquisition;d(P,r(P).concat(I.dailyTimeCost.map((Ce,fe)=>({x:fe,timeCost:Ce,count:ue[fe],memorized:ne[fe],label:M})))),d(H,Ds(r(E),L,r(P),r(R)))}}}function Pe(){d(P,r(P).filter(I=>I.label!==M)),M=Math.max(0,M-1),d(H,Ds(r(E),L,r(P),r(R)))}let Te=V(t,"modal",12,null);function oe(I){return Te(new vn(I)),{destroy(){var ue;(ue=Te())==null||ue.dispose(),Te(null)}}}ie(()=>{},()=>{d(p,365)}),ie(()=>{},()=>{d(u,0)}),ie(()=>r(p),()=>{d(f,Math.ceil(r(p)/365))}),ie(()=>(r(U),r(N)),()=>{d(c,r(U)||r(N))}),ie(()=>r(Q),()=>{d(k,Re(r(Q)))}),ie(()=>(r(E),r(P),r(b),r(f),r(R)),()=>{if(r(E)){let I=r(P);if(r(b)){const ue=r(P).reduce((ne,Ce)=>(ne[Ce.label]=ne[Ce.label]||[],ne[Ce.label].push(Ce),ne),{});I=Object.values(ue).flatMap(ne=>{const Ce=le(ne.map(Fe=>Fe.timeCost),r(f)),fe=le(ne.map(Fe=>Fe.count),r(f)),$e=le(ne.map(Fe=>Fe.memorized),r(f));return ne.map((Fe,Lt)=>({...Fe,timeCost:Ce[Lt],count:fe[Lt],memorized:$e[Lt]}))})}d(H,Ds(r(E),L,I,r(R)))}}),ie(()=>e(),()=>{d(y,[...e().easyDaysPercentages])}),Ye(),Oe();var _e=zd(),He=j(_e),Le=j(He),Me=j(Le),me=j(Me),ke=j(me,!0);A(me);var Ae=$(me,2);A(Me);var De=$(Me,2),Ie=j(De);tt(Ie,{defaultValue:365,min:1,max:3650,get value(){return r(p)},set value(I){d(p,I)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Ti()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var rt=$(Ie,2);tt(rt,{defaultValue:0,min:0,max:1e5,get value(){return r(u)},set value(I){d(u,I)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Di()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=$(rt,2);ft(Nt,{get defaultValue(){return e(),s(()=>e().desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return v().desiredRetention},set value(I){v(v().desiredRetention=I,!0)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("desiredRetention")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Hs()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=$(Nt,2);tt(Ft,{get defaultValue(){return e(),s(()=>e().newPerDay)},min:0,max:9999,get value(){return v().newLimit},set value(I){v(v().newLimit=I,!0)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>sn()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Vt=$(Ft,2);tt(Vt,{get defaultValue(){return e(),s(()=>e().reviewsPerDay)},min:0,max:9999,get value(){return v().reviewLimit},set value(I){v(v().reviewLimit=I,!0)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>tn()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Dt=$(Vt,2),Ht=j(Dt),ss=j(Ht,!0);A(Ht);var yt=$(Ht,2);gu(yt,()=>r(y),I=>{bn(I,{get values(){return r(y)},set values(ue){d(y,ue)},$$legacy:!0})}),A(Dt);var Bt=$(Dt,2),zt=j(Bt),Cs=j(zt,!0);A(zt);var Wt=$(zt,2);tt(Wt,{get defaultValue(){return e(),s(()=>e().maximumReviewInterval)},min:1,max:36500,get value(){return v().maxInterval},set value(I){v(v().maxInterval=I,!0)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Yr()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var rs=$(Wt,2);const ns=q(()=>(w(hs),o(),s(()=>hs(o()))));gt(rs,{get defaultValue(){return e(),s(()=>e().reviewOrder)},get choices(){return r(ns)},get value(){return v().reviewOrder},set value(I){v(v().reviewOrder=I,!0)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>rn()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var as=$(rs,2);Xe(as,{get defaultValue(){return m()},get value(){return v().newCardsIgnoreReviewLimit},set value(I){v(v().newCardsIgnoreReviewLimit=I,!0)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{const fe=q(()=>(w(G),s(()=>en())));Rt(ne,{get title(){return r(fe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var os=$(as,2);Xe(os,{defaultValue:!0,get value(){return r(b)},set value(I){d(b,I)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Ii()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var is=$(os,2);const Gt=q(()=>(e(),w(bt),s(()=>e().leechAction==bt.SUSPEND)));Xe(is,{get defaultValue(){return r(Gt)},get value(){return r(K)},set value(I){d(K,I)},children:(I,ue)=>{se(I,{$$events:{click:()=>O()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Ai()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ls=$(is,2);{var jt=I=>{tt(I,{get defaultValue(){return e(),s(()=>e().leechThreshold)},min:1,max:9999,get value(){return r(z)},set value(ue){d(z,ue)},children:(ue,ne)=>{se(ue,{$$events:{click:()=>O()("simulateFsrsReview")},children:(Ce,fe)=>{re();var $e=Z();W(Fe=>F($e,Fe),[()=>(w(G),s(()=>un()))],q),g(Ce,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Ve(ls,I=>{r(K)&&I(jt)})}A(Bt);var qt=$(Bt,2),It=j(qt),Pt=j(It),ws=j(Pt,!0);A(Pt);var Ct=$(Pt,2),B=j(Ct);{var ge=I=>{var ue=Z();W(ne=>F(ue,ne),[()=>(w(G),s(()=>As()))],q),g(I,ue)},Ne=I=>{var ue=Z();W(ne=>F(ue,ne),[()=>(w(G),s(()=>zi()))],q),g(I,ue)};Ve(B,I=>{r(N)?I(ge):I(Ne,!1)})}A(Ct);var We=$(Ct,2);{var Ee=I=>{var ue=Fd(),ne=ce(ue),Ce=$(ne);{var fe=$e=>{const Fe=q(()=>(w(G),s(()=>ji())));Qe($e,{get warning(){return r(Fe)},className:"alert-warning"})};Ve(Ce,$e=>{r(_),e(),s(()=>r(_)-e().desiredRetention>=.01)&&$e(fe)})}W($e=>F(ne,`${$e!=null?$e:""} `),[()=>(r(_),s(()=>ve(r(_))))],q),g(I,ue)};Ve(We,I=>{r(_)&&I(Ee)})}var Ge=$(We,2);{var Ze=I=>{var ue=Vd(),ne=j(ue,!0);A(ue),W(()=>F(ne,r(k))),g(I,ue)};Ve(Ge,I=>{r(N)&&I(Ze)})}A(It),A(qt);var nt=$(qt,2),Sn=j(nt,!0);A(nt);var At=$(nt,2),On=j(At,!0);A(At);var Et=$(At,2),Rn=j(Et,!0);A(Et);var js=$(Et,2);{var Tn=I=>{var ue=Z();W(ne=>F(ue,ne),[()=>(w(G),s(()=>Wi()))],q),g(I,ue)};Ve(js,I=>{r(c)&&I(Tn)})}var Dn=$(js,2);Cu(Dn,{children:(I,ue)=>{var ne=Bd(),Ce=ce(ne),fe=j(Ce);wu(fe,{children:(_s,_f)=>{var Qs=Hd(),ks=ce(Qs),Ut=j(ks);mt(Ut);var Ys,En=$(Ut);A(ks);var Ps=$(ks,2),Qt=j(Ps);mt(Qt);var Ks,Ln=$(Qt);A(Ps);var Xs=$(Ps,2),Yt=j(Xs);mt(Yt);var Zs,Mn=$(Yt);A(Xs),W((pt,bs,xs)=>{var Js,er,tr;Ys!==(Ys=(w(Be),s(()=>Be.count)))&&(Ut.value=(Js=Ut.__value=(w(Be),s(()=>Be.count)))!=null?Js:""),F(En,` ${pt!=null?pt:""}`),Ks!==(Ks=(w(Be),s(()=>Be.time)))&&(Qt.value=(er=Qt.__value=(w(Be),s(()=>Be.time)))!=null?er:""),F(Ln,` ${bs!=null?bs:""}`),Zs!==(Zs=(w(Be),s(()=>Be.memorized)))&&(Yt.value=(tr=Yt.__value=(w(Be),s(()=>Be.memorized)))!=null?tr:""),F(Mn,` ${xs!=null?xs:""}`)},[()=>(w(G),s(()=>Ei())),()=>(w(G),s(()=>Li())),()=>(w(G),s(()=>Mi()))],q),Os(h,[],Ut,()=>(w(Be),s(()=>Be.count),r(R)),pt=>d(R,pt)),Os(h,[],Qt,()=>(w(Be),s(()=>Be.time),r(R)),pt=>d(R,pt)),Os(h,[],Yt,()=>(w(Be),s(()=>Be.memorized),r(R)),pt=>d(R,pt)),g(_s,Qs)},$$slots:{default:!0}}),A(Ce);var $e=$(Ce,2),Fe=j($e),Lt=j(Fe);Ru(Lt);var qs=$(Lt);_u(qs);var Us=$(qs);ku(Us,{get bounds(){return L}});var In=$(Us);bu(In,{get bounds(){return L}}),A(Fe),Mt(Fe,_s=>d(E,_s),()=>r(E)),A($e);var An=$($e,2);Tu(An,{get tableData(){return r(H)}}),W(()=>st(Fe,"viewBox",s(()=>`0 0 ${L.width} ${L.height}`))),g(I,ne)},$$slots:{default:!0}}),A(De),A(Le),A(He),A(_e),pn(_e,I=>oe==null?void 0:oe(I)),W((I,ue,ne,Ce,fe,$e,Fe)=>{F(ke,I),F(ss,ue),F(Cs,ne),F(ws,Ce),ot(Ct,1,`btn ${r(N)?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),Ct.disabled=!r(N)&&C(),ot(nt,1,`btn ${C()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),nt.disabled=C(),F(Sn,fe),ot(At,1,`btn ${C()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),At.disabled=C(),F(On,$e),ot(Et,1,`btn ${C()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),Et.disabled=C(),F(Rn,Fe)},[()=>(w(G),s(()=>an())),()=>(w(G),s(()=>on())),()=>(w(G),s(()=>Ni())),()=>(w(G),s(()=>ln())),()=>(w(G),s(()=>Fi())),()=>(w(G),s(()=>Vi())),()=>(w(G),s(()=>Hi()))],q),Se("click",Ae,()=>{var I;return(I=Te())==null?void 0:I.hide()}),Se("click",Ct,()=>de()),Se("click",nt,he),Se("click",At,Pe),Se("click",Et,()=>{te(S,s(e).newPerDay=v().newLimit,s(e)),te(S,s(e).reviewsPerDay=v().reviewLimit,s(e)),te(S,s(e).maximumReviewInterval=v().maxInterval,s(e)),te(S,s(e).desiredRetention=v().desiredRetention,s(e)),vt(l,v().newCardsIgnoreReviewLimit),te(S,s(e).reviewOrder=v().reviewOrder,s(e)),te(S,s(e).leechAction=r(K)?bt.SUSPEND:bt.TAG_ONLY,s(e)),te(S,s(e).leechThreshold=r(z),s(e)),te(S,s(e).easyDaysPercentages=[...r(y)],s(e)),D()()}),g(n,_e),xe(),i()}var Gd=ee("<button><!></button>"),jd=ee('<!> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"/> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!>',1);function qd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(P,"$daysSinceLastOptimization",a),o=()=>ye(L,"$config",a),m=()=>ye(r(C),"$newCardsIgnoreReviewLimit",a),p=()=>ye(le,"$healthCheck",a),u=()=>ye(M,"$fsrsReschedule",a),f=T(),c=T(),k=T(),y=T(),h=T(),x=T(),v=T(),C=T(),O=T(),D=T(),S=T();let R=V(t,"state",8),H=V(t,"openHelpModal",8),U=V(t,"onPresetChange",8),Y=V(t,"newlyEnabled",8,!1);const L=R().currentConfig,E=R().defaults,M=R().fsrsReschedule,P=R().daysSinceLastOptimization;let l=T(!1),b=T(!1),K=T(!1);const z=o().desiredRetention.toFixed(2);let _=T(),N=T(!1),Q=T(!1);const le=R().fsrsHealthCheck;let ae=T(void 0);const ve=100;let X=T("");const Re=.8,de=.95;function he(B){return B<Re?Yi():B>de?Ki():""}async function Pe(B,ge){if(+z==r(h)){d(X,Xi());return}const Ne=new Qn({w:ge,search:r(y),before:+z,after:B}),We=await Yn(Ne);d(X,Zi({factor:We.factor.toFixed(2),previousDr:(+z*100).toString()}))}function Te(B){return B<.7||B>.97?"alert-danger":B<Re||B>de?"alert-warning":"alert-info"}function oe(){return BigInt(o().ignoreRevlogsBeforeDate?new Date(o().ignoreRevlogsBeforeDate).getTime():0)}async function _e(){if(r(N)){await rr({});return}if(R().presetAssignmentsChanged()){alert(yr());return}d(N,!0),d(_,void 0);try{await ps(async()=>{const B=ds(o()),ge=o().relearnSteps;let Ne=0,We=0;for(let Ze=0;Ze<ge.length&&(We+=ge[Ze],!(We>=1440));Ze++)Ne++;const Ee=await Kn({search:o().paramSearch?o().paramSearch:r(y),ignoreRevlogsBeforeMs:oe(),currentParams:B,numOfRelearningSteps:Ne,healthCheck:p()}),Ge=B.length&&B.every((Ze,nt)=>Ze.toFixed(4)===Ee.params[nt].toFixed(4))||Ee.params.length===0;if(Ee.healthCheckPassed!==void 0)Ee.healthCheckPassed?setTimeout(()=>alert(Ji()),200):setTimeout(()=>alert(el()),200);else if(Ge){const Ze=Ee.fsrsItems?tl():sl();setTimeout(()=>alert(Ze),200)}Ge||(te(L,s(o).fsrsParams6=Ee.params,s(o)),setTimeout(()=>{d(K,!0)},201)),r(_)&&St(_,r(_).current=r(_).total)},B=>{B.value.case==="computeParams"&&d(_,B.value.value)})}finally{d(N,!1)}}async function He(){if(r(Q)){await rr({});return}if(R().presetAssignmentsChanged()){alert(yr());return}d(Q,!0),d(_,void 0);try{await ps(async()=>{const B=o().paramSearch?o().paramSearch:r(y),ge=await Zn({search:B,ignoreRevlogsBeforeMs:oe(),params:ds(o())});r(_)&&St(_,r(_).current=r(_).total),setTimeout(()=>alert(`Log loss: ${ge.logLoss.toFixed(4)}, RMSE(bins): ${(ge.rmseBins*100).toFixed(2)}%. ${il()}`),200)},B=>{B.value.case==="computeParams"&&d(_,B.value.value)})}finally{d(Q,!1)}}function Le(B){if(!B||!B.total)return"";const ge=(B.current/B.total*100).toFixed(1);return B instanceof Xn?`${ge}%`:B.current===B.total?rl():nl({pct:ge,reviews:B.reviews})}async function Me(){await Gs(),R().save(gs.COMPUTE_ALL_PARAMS)}let me=T();ie(()=>(e(),G),()=>{d(f,e()>30?qi():"")}),ie(()=>r(l),()=>{r(l)&&d(b,!0)}),ie(()=>(w(Y()),r(b),r(K)),()=>{d(c,Y()||r(b)||r(K))}),ie(()=>(r(N),r(Q)),()=>{d(k,r(N)||r(Q))}),ie(()=>w(R()),()=>{d(y,`preset:"${R().getCurrentNameForSearch()}" -is:suspended`)}),ie(()=>o(),()=>{d(h,Number(o().desiredRetention.toFixed(2)))}),ie(()=>r(h),()=>{d(x,he(r(h)))}),ie(()=>(r(ae),r(c),r(h),o()),()=>{clearTimeout(r(ae)),r(c)?d(ae,setTimeout(()=>{Pe(r(h),ds(o()))},ve)):d(X,"")}),ie(()=>r(h),()=>{d(v,Te(r(h)))}),ie(()=>w(R()),()=>{Ql(d(C,R().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ie(()=>(o(),w(R()),m()),()=>{d(O,new Un({params:ds(o()),desiredRetention:o().desiredRetention,newLimit:o().newPerDay,reviewLimit:o().reviewsPerDay,maxInterval:o().maximumReviewInterval,search:`preset:"${R().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:m(),easyDaysPercentages:o().easyDaysPercentages,reviewOrder:o().reviewOrder}))}),ie(()=>r(_),()=>{d(D,Le(r(_)))}),ie(()=>r(_),()=>{var B,ge;d(S,(ge=(B=r(_))==null?void 0:B.reviews)!=null?ge:void 0)}),Ye(),Oe();var ke=jd(),Ae=ce(ke);ft(Ae,{get defaultValue(){return s(()=>E.desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return o().desiredRetention},set value(B){te(L,s(o).desiredRetention=B,s(o))},get focused(){return r(l)},set focused(B){d(l,B)},children:(B,ge)=>{se(B,{$$events:{click:()=>H()("desiredRetention")},children:(Ne,We)=>{re();var Ee=Z();W(Ge=>F(Ee,Ge),[()=>(w(G),s(()=>Hs()))],q),g(Ne,Ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var De=$(Ae,2);Qe(De,{get warning(){return r(X)},className:"alert-info two-line"});var Ie=$(De,2);Qe(Ie,{get warning(){return r(x)},get className(){return r(v)}});var rt=$(Ie,2),Nt=j(rt);Ad(Nt,{defaultValue:[],get defaults(){return s(()=>E.fsrsParams6)},get value(){return o().fsrsParams6},set value(B){te(L,s(o).fsrsParams6=B,s(o))},children:(B,ge)=>{se(B,{$$events:{click:()=>H()("modelParams")},children:(Ne,We)=>{re();var Ee=Z();W(Ge=>F(Ee,Ge),[()=>(w(G),s(()=>cn()))],q),g(Ne,Ee)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=$(Nt,2);Ld(Ft,{get placeholder(){return r(y)},get value(){return o().paramSearch},set value(B){te(L,s(o).paramSearch=B,s(o))},$$legacy:!0});var Vt=$(Ft,2);Xe(Vt,{defaultValue:!1,get value(){return Ot(),u()},set value(B){vt(M,B)},children:(B,ge)=>{se(B,{$$events:{click:()=>H()("rescheduleCardsOnChange")},children:(Ne,We)=>{const Ee=q(()=>(w(G),s(()=>dn())));Rt(Ne,{get title(){return r(Ee)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Dt=$(Vt,2);{var Ht=B=>{const ge=q(()=>(w(G),s(()=>ol())));Qe(B,{get warning(){return r(ge)}})};Ve(Dt,B=>{u()&&B(Ht)})}var ss=$(Dt,2);Xe(ss,{defaultValue:!1,get value(){return Ot(),p()},set value(B){vt(le,B)},children:(B,ge)=>{se(B,{$$events:{click:()=>H()("healthCheck")},children:(Ne,We)=>{const Ee=q(()=>(w(G),s(()=>Ui({text:fn()}))));Rt(Ne,{get title(){return r(Ee)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var yt=$(ss,2),Bt=j(yt);{var zt=B=>{var ge=Z();W(Ne=>F(ge,Ne),[()=>(w(G),s(()=>As()))],q),g(B,ge)},Cs=B=>{var ge=Z();W(Ne=>F(ge,Ne),[()=>(w(G),s(()=>al()))],q),g(B,ge)};Ve(Bt,B=>{r(N)?B(zt):B(Cs,!1)})}A(yt);var Wt=$(yt,2);{var rs=B=>{var ge=Gd(),Ne=j(ge);{var We=Ge=>{var Ze=Z();W(nt=>F(Ze,nt),[()=>(w(G),s(()=>As()))],q),g(Ge,Ze)},Ee=Ge=>{var Ze=Z();W(nt=>F(Ze,nt),[()=>(w(G),s(()=>ll()))],q),g(Ge,Ze)};Ve(Ne,Ge=>{r(Q)?Ge(We):Ge(Ee,!1)})}A(ge),W(()=>{ot(ge,1,`btn ${r(Q)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),ge.disabled=!r(Q)&&r(k)}),Se("click",ge,()=>He()),g(B,ge)};Ve(Wt,B=>{w(R()),s(()=>R().legacyEvaluate)&&B(rs)})}var ns=$(Wt,2),as=j(ns);{var os=B=>{var ge=Z();W(()=>F(ge,r(D))),g(B,ge)},is=(B,ge)=>{{var Ne=We=>{var Ee=Z();W(Ge=>F(Ee,Ge),[()=>(w(G),r(S),s(()=>nn({reviews:r(S)})))],q),g(We,Ee)};Ve(B,We=>{r(S)!==void 0&&We(Ne)},ge)}};Ve(as,B=>{r(N)||r(Q)?B(os):B(is,!1)})}A(ns),A(rt);var Gt=$(rt,2),ls=j(Gt);Qe(ls,{get warning(){return r(f)},className:"alert-warning"});var jt=$(ls,2),qt=j(jt,!0);A(jt),A(Gt);var It=$(Gt,4),Pt=j(It),ws=j(Pt,!0);A(Pt),A(It);var Ct=$(It,2);Wd(Ct,{get state(){return R()},get simulateFsrsRequest(){return r(O)},get computing(){return r(k)},get openHelpModal(){return H()},get onPresetChange(){return U()},get modal(){return r(me)},set modal(B){d(me,B)},$$legacy:!0}),W((B,ge)=>{ot(yt,1,`btn ${r(N)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),yt.disabled=!r(N)&&r(k),F(qt,B),F(ws,ge)},[()=>(w(G),s(()=>Qi())),()=>(w(G),s(()=>an()))],q),Se("click",yt,()=>_e()),Se("click",jt,()=>Me()),Se("click",Pt,()=>{var B;return(B=r(me))==null?void 0:B.show()}),g(n,ke),xe(),i()}var Ud=ee("<!> <!>",1);function Qd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$fsrs",a);let o=V(t,"state",8),m=V(t,"api",8),p=V(t,"onPresetChange",8);const u=o().fsrs;let f=T(!1);const c={fsrs:{title:"FSRS",help:hl(),url:pe.DeckOptions.fsrs,global:!0},desiredRetention:{title:Hs(),help:$l()+`

`+pl(),sched:et.FSRS},modelParams:{title:cn(),help:gl()+`

`+vl(),sched:et.FSRS},rescheduleCardsOnChange:{title:dn(),help:fl(),sched:et.FSRS,global:!0},computeOptimalRetention:{title:ln(),help:dl(),sched:et.FSRS},healthCheck:{title:fn(),help:vs()+`

`+ul()+`

`+cl(),sched:et.FSRS,global:!0}},k=Object.values(c);let y=T(),h=T();function x(v){r(y).show(),r(h).to(v)}ie(()=>e(),()=>{e()||d(f,!0)}),Ye(),Oe(),lt(n,{title:"FSRS",children:(v,C)=>{dt(v,{get slotHost(){return J},get api(){return m()},children:(O,D)=>{var S=Ud(),R=ce(S);J(R,{children:(Y,L)=>{Xe(Y,{defaultValue:!1,get value(){return Ot(),e()},set value(E){vt(u,E)},children:(E,M)=>{se(E,{$$events:{click:()=>x(Object.keys(c).indexOf("fsrs"))},children:(P,l)=>{Rt(P,{get title(){return s(()=>c.fsrs.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var H=$(R,2);{var U=Y=>{qd(Y,{get state(){return o()},get newlyEnabled(){return r(f)},openHelpModal:L=>x(Object.keys(c).indexOf(L)),get onPresetChange(){return p()}})};Ve(H,Y=>{e()&&Y(U)})}g(O,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(v,C)=>{$t(v,{title:"FSRS",get url(){return w(pe),s(()=>pe.DeckOptions.fsrs)},slot:"tooltip",get fsrs(){return e()},get helpSections(){return k},$$events:{mount:O=>{d(y,O.detail.modal),d(h,O.detail.carousel)}}})}}}),xe(),i()}function Yd(n,t){be(t,!1);let a=V(t,"html",8),i=V(t,"mounted",8);Ns(i()),Oe();var e=it(),o=ce(e);ml(o,a),g(n,e),xe()}function Kd(n){switch(n){case ct.Seconds:return"s";case ct.Minutes:return"m";case ct.Hours:return"h";case ct.Days:return"d";default:return""}}function Xd(n){switch(n){case"s":return ct.Seconds;case"h":return ct.Hours;case"d":return ct.Days;default:return ct.Minutes}}function Zd(n){const t=n*60;let a=Du(t);return[ct.Months,ct.Years].includes(a)&&(a=ct.Days),`${Math.round(Iu(a,t))}${Kd(a)}`}function Jd(n){const t=n.match(/(\d+)(.*)/);if(t){const[a,i,e]=t,o=Xd(e),m=Au(o)*parseInt(i,10);return Math.min(m,2**31)/60}else return 0}function ef(n){return n.map(Zd).join(" ")}function tf(n){return n.split(" ").map(Jd).filter(t=>t)}var sf=ee('<input type="text" class="svelte-f5c9s0"/>');function rf(n,t){be(t,!1);let a=V(t,"value",12),i=T();function e(){a(tf(this.value))}ie(()=>w(a()),()=>{d(i,ef(a()))}),Ye(),Oe();var o=sf();mt(o),W(()=>Vs(o,r(i))),Se("blur",o,e),g(n,o),xe()}var nf=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),af=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function xn(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8);var e=af(),o=ce(e);Ke(o,()=>({"--cols":13})),Ue(o.lastChild,{children:(m,p)=>{var u=nf(),f=ce(u);Ke(f,()=>({"--col-size":7})),kt(f.lastChild,{breakpoint:"xs",children:(k,y)=>{var h=it(),x=ce(h);_t(x,t,"default",{}),g(k,h)},$$slots:{default:!0}}),A(f);var c=$(f,2);Ke(c,()=>({"--col-size":6})),kt(c.lastChild,{breakpoint:"xs",children:(k,y)=>{Tt(k,{children:(h,x)=>{rf(h,{get value(){return a()},set value(v){a(v)},$$legacy:!0})},$$slots:{default:!0,revert:(h,x)=>{es(h,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(v){a(v)},$$legacy:!0})}}})},$$slots:{default:!0}}),A(c),g(m,u)},$$slots:{default:!0}}),A(o),g(n,e)}var of=ee("<!> <!> <!> <!> <!> <!>",1);function lf(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$config",a),o=()=>ye(c,"$fsrs",a);let m=V(t,"state",8),p=V(t,"api",24,()=>({}));const u=m().currentConfig,f=m().defaults,c=m().fsrs;let k=T(),y=T();const h={relearningSteps:{title:bl(),help:Pl(),url:pe.DeckOptions.relearningSteps},minimumInterval:{title:kl(),help:_l(),url:pe.DeckOptions.minimumInterval,sched:et.SM2},leechThreshold:{title:un(),help:wl(),url:pe.Leeches.leeches},leechAction:{title:Cl(),help:yl(),url:pe.Leeches.waiting}},x=Object.values(h);let v=T(),C=T();function O(S){r(v).show(),r(C).to(S)}ie(()=>(e(),o(),G),()=>{const S=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;d(k,!o()&&S>e().minimumLapseInterval?xl():""),d(y,o()&&S>=1?gn():"")}),Ye(),Oe();const D=q(()=>(w(G),s(()=>Cr())));lt(n,{get title(){return r(D)},children:(S,R)=>{dt(S,{get slotHost(){return J},get api(){return p()},children:(H,U)=>{var Y=of(),L=ce(Y);J(L,{children:(z,_)=>{xn(z,{get defaultValue(){return s(()=>f.relearnSteps)},get value(){return e().relearnSteps},set value(N){te(u,s(e).relearnSteps=N,s(e))},children:(N,Q)=>{se(N,{$$events:{click:()=>O(Object.keys(h).indexOf("relearningSteps"))},children:(le,ae)=>{re();var ve=Z();W(()=>F(ve,s(()=>h.relearningSteps.title))),g(le,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(L,2);J(E,{children:(z,_)=>{Qe(z,{get warning(){return r(y)}})},$$slots:{default:!0}});var M=$(E,2);{var P=z=>{J(z,{children:(_,N)=>{tt(_,{get defaultValue(){return s(()=>f.minimumLapseInterval)},min:1,get value(){return e().minimumLapseInterval},set value(Q){te(u,s(e).minimumLapseInterval=Q,s(e))},children:(Q,le)=>{se(Q,{$$events:{click:()=>O(Object.keys(h).indexOf("minimumInterval"))},children:(ae,ve)=>{re();var X=Z();W(()=>F(X,s(()=>h.minimumInterval.title))),g(ae,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Ve(M,z=>{o()||z(P)})}var l=$(M,2);J(l,{children:(z,_)=>{Qe(z,{get warning(){return r(k)}})},$$slots:{default:!0}});var b=$(l,2);J(b,{children:(z,_)=>{tt(z,{get defaultValue(){return s(()=>f.leechThreshold)},min:1,get value(){return e().leechThreshold},set value(N){te(u,s(e).leechThreshold=N,s(e))},children:(N,Q)=>{se(N,{$$events:{click:()=>O(Object.keys(h).indexOf("leechThreshold"))},children:(le,ae)=>{re();var ve=Z();W(()=>F(ve,s(()=>h.leechThreshold.title))),g(le,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var K=$(b,2);J(K,{children:(z,_)=>{const N=q(()=>(w(Nr),s(Nr)));gt(z,{get defaultValue(){return s(()=>f.leechAction)},get choices(){return r(N)},breakpoint:"md",get value(){return e().leechAction},set value(Q){te(u,s(e).leechAction=Q,s(e))},children:(Q,le)=>{se(Q,{$$events:{click:()=>O(Object.keys(h).indexOf("leechAction"))},children:(ae,ve)=>{re();var X=Z();W(()=>F(X,s(()=>h.leechAction.title))),g(ae,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(H,Y)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,R)=>{const H=q(()=>(w(G),s(()=>Cr())));$t(S,{get title(){return r(H)},get url(){return w(pe),s(()=>pe.DeckOptions.lapses)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return x},$$events:{mount:U=>{d(v,U.detail.modal),d(C,U.detail.carousel)}}})}}}),xe(),i()}var uf=ee("<!> <!> <!> <!>",1),cf=ee("<!> <!> <!> <!> <!>",1);function df(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(c,"$config",a),o=()=>ye(y,"$fsrs",a),m=T(),p=T();let u=V(t,"state",8),f=V(t,"api",24,()=>({}));const c=u().currentConfig,k=u().defaults,y=u().fsrs;let h=T(),x=T();const v={learningSteps:{title:El(),help:Al(),url:pe.DeckOptions.learningSteps},graduatingInterval:{title:Il(),help:Dl(),url:pe.DeckOptions.graduatingInterval,sched:et.SM2},easyInterval:{title:Tl(),help:Rl(),url:pe.DeckOptions.easyInterval,sched:et.SM2},insertionOrder:{title:Ol(),help:Sl(),url:pe.DeckOptions.insertionOrder}},C=Object.values(v);let O=T(),D=T();function S(H){r(O).show(),r(D).to(H)}ie(()=>(e(),o()),()=>{const H=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;d(h,H>e().graduatingIntervalGood?Ll():""),d(x,o()&&H>=1?gn():"")}),ie(()=>(e(),G),()=>{d(m,e().graduatingIntervalGood>e().graduatingIntervalEasy?Ml():"")}),ie(()=>(e(),G),()=>{d(p,e().newCardInsertOrder==Is.RANDOM?Nl():"")}),Ye(),Oe();const R=q(()=>(w(G),s(()=>wr())));lt(n,{get title(){return r(R)},children:(H,U)=>{dt(H,{get slotHost(){return J},get api(){return f()},children:(Y,L)=>{var E=cf(),M=ce(E);J(M,{children:(_,N)=>{xn(_,{get defaultValue(){return s(()=>k.learnSteps)},get value(){return e().learnSteps},set value(Q){te(c,s(e).learnSteps=Q,s(e))},children:(Q,le)=>{se(Q,{$$events:{click:()=>S(Object.keys(v).indexOf("learningSteps"))},children:(ae,ve)=>{re();var X=Z();W(()=>F(X,s(()=>v.learningSteps.title))),g(ae,X)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var P=$(M,2);J(P,{children:(_,N)=>{Qe(_,{get warning(){return r(x)}})},$$slots:{default:!0}});var l=$(P,2);{var b=_=>{var N=uf(),Q=ce(N);J(Q,{children:(X,Re)=>{tt(X,{get defaultValue(){return s(()=>k.graduatingIntervalGood)},get value(){return e().graduatingIntervalGood},set value(de){te(c,s(e).graduatingIntervalGood=de,s(e))},children:(de,he)=>{se(de,{$$events:{click:()=>S(Object.keys(v).indexOf("graduatingInterval"))},children:(Pe,Te)=>{re();var oe=Z();W(()=>F(oe,s(()=>v.graduatingInterval.title))),g(Pe,oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=$(Q,2);J(le,{children:(X,Re)=>{Qe(X,{get warning(){return r(h)}})},$$slots:{default:!0}});var ae=$(le,2);J(ae,{children:(X,Re)=>{tt(X,{get defaultValue(){return s(()=>k.graduatingIntervalEasy)},get value(){return e().graduatingIntervalEasy},set value(de){te(c,s(e).graduatingIntervalEasy=de,s(e))},children:(de,he)=>{se(de,{$$events:{click:()=>S(Object.keys(v).indexOf("easyInterval"))},children:(Pe,Te)=>{re();var oe=Z();W(()=>F(oe,s(()=>v.easyInterval.title))),g(Pe,oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ve=$(ae,2);J(ve,{children:(X,Re)=>{Qe(X,{get warning(){return r(m)}})},$$slots:{default:!0}}),g(_,N)};Ve(l,_=>{o()||_(b)})}var K=$(l,2);J(K,{children:(_,N)=>{const Q=q(()=>(w(Fr),s(Fr)));gt(_,{get defaultValue(){return s(()=>k.newCardInsertOrder)},get choices(){return r(Q)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(le){te(c,s(e).newCardInsertOrder=le,s(e))},children:(le,ae)=>{se(le,{$$events:{click:()=>S(Object.keys(v).indexOf("insertionOrder"))},children:(ve,X)=>{re();var Re=Z();W(()=>F(Re,s(()=>v.insertionOrder.title))),g(ve,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=$(K,2);J(z,{children:(_,N)=>{Qe(_,{get warning(){return r(p)}})},$$slots:{default:!0}}),g(Y,E)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(H,U)=>{const Y=q(()=>(w(G),s(()=>wr())));$t(H,{get title(){return r(Y)},get url(){return w(pe),s(()=>pe.DeckOptions.newCards)},slot:"tooltip",get helpSections(){return C},get fsrs(){return o()},$$events:{mount:L=>{d(O,L.detail.modal),d(D,L.detail.carousel)}}})}}}),xe(),i()}var ff=ee('<div class="show-timer-switch" style="display: contents;"><!></div>'),gf=ee('<div class="show-timer-switch" style="display: contents;"><!></div>'),vf=ee("<!> <!> <!> <!>",1);function $f(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$config",a),o=T();let m=V(t,"state",8),p=V(t,"api",8);const u=m().currentConfig,f=m().defaults,c={maximumAnswerSecs:{title:Wl(),help:zl()},showAnswerTimer:{title:Bl(),help:Hl()},stopTimerOnAnswer:{title:Vl(),help:Fl()}},k=Object.values(c);let y=T(),h=T();function x(C){r(y).show(),r(h).to(C)}ie(()=>(e(),G),()=>{d(o,e().capAnswerTimeToSecs>600?Gl():"")}),Ye(),Oe();const v=q(()=>(w(G),s(()=>_r())));lt(n,{get title(){return r(v)},children:(C,O)=>{dt(C,{get slotHost(){return J},get api(){return p()},children:(D,S)=>{var R=vf(),H=ce(R);J(H,{children:(E,M)=>{tt(E,{get defaultValue(){return s(()=>f.capAnswerTimeToSecs)},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(P){te(u,s(e).capAnswerTimeToSecs=P,s(e))},children:(P,l)=>{se(P,{$$events:{click:()=>x(Object.keys(c).indexOf("maximumAnswerSecs"))},children:(b,K)=>{re();var z=Z();W(()=>F(z,s(()=>c.maximumAnswerSecs.title))),g(b,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var U=$(H,2);J(U,{children:(E,M)=>{Qe(E,{get warning(){return r(o)}})},$$slots:{default:!0}});var Y=$(U,2);J(Y,{children:(E,M)=>{var P=ff(),l=j(P);Xe(l,{get defaultValue(){return s(()=>f.showTimer)},get value(){return e().showTimer},set value(b){te(u,s(e).showTimer=b,s(e))},children:(b,K)=>{se(b,{$$events:{click:()=>x(Object.keys(c).indexOf("showAnswerTimer"))},children:(z,_)=>{re();var N=Z();W(()=>F(N,s(()=>c.showAnswerTimer.title))),g(z,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),A(P),g(E,P)},$$slots:{default:!0}});var L=$(Y,2);J(L,{children:(E,M)=>{var P=gf(),l=j(P);Xe(l,{get defaultValue(){return s(()=>f.stopTimerOnAnswer)},get value(){return e().stopTimerOnAnswer},set value(b){te(u,s(e).stopTimerOnAnswer=b,s(e))},children:(b,K)=>{se(b,{$$events:{click:()=>x(Object.keys(c).indexOf("stopTimerOnAnswer"))},children:(z,_)=>{re();var N=Z();W(()=>F(N,s(()=>c.stopTimerOnAnswer.title))),g(z,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),A(P),g(E,P)},$$slots:{default:!0}}),g(D,R)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,O)=>{const D=q(()=>(w(G),s(()=>_r())));$t(C,{get title(){return r(D)},get url(){return w(pe),s(()=>pe.DeckOptions.timer)},slot:"tooltip",get helpSections(){return k},$$events:{mount:S=>{d(y,S.detail.modal),d(h,S.detail.carousel)}}})}}}),xe(),i()}var pf=ee("<!> <!> <!>",1),hf=ee('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function mf(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(x,"$config",a),o=()=>ye(y,"$fsrsEnabled",a),m=()=>ye(h,"$reschedule",a),p=T(),u=T(),f=T();let c=V(t,"state",8),k=V(t,"api",8);const y=c().fsrs,h=c().fsrsReschedule,x=c().currentConfig,v=c().defaults,C=e().easyDaysPercentages.slice();ie(()=>e(),()=>{e().easyDaysPercentages.length!==7&&te(x,s(e).easyDaysPercentages=v.easyDaysPercentages.slice(),s(e))}),ie(()=>e(),()=>{d(p,e().easyDaysPercentages.some((R,H)=>R!==C[H]))}),ie(()=>(e(),G),()=>{d(u,e().easyDaysPercentages.some(R=>R===1)?"":jl())}),ie(()=>(r(p),o(),m(),G),()=>{d(f,r(p)&&!(o()&&m())?ql():"")}),Ye(),Oe();var O=hf(),D=$(ce(O),2);const S=q(()=>(w(G),s(()=>on())));lt(D,{get title(){return r(S)},children:(R,H)=>{dt(R,{get slotHost(){return J},get api(){return k()},children:(U,Y)=>{var L=pf(),E=ce(L);bn(E,{get values(){return e().easyDaysPercentages},set values(l){te(x,s(e).easyDaysPercentages=l,s(e))},$$legacy:!0});var M=$(E,2);J(M,{children:(l,b)=>{Qe(l,{get warning(){return r(u)}})},$$slots:{default:!0}});var P=$(M,2);J(P,{children:(l,b)=>{Qe(l,{get warning(){return r(f)}})},$$slots:{default:!0}}),g(U,L)},$$slots:{default:!0}})},$$slots:{default:!0}}),g(n,O),xe(),i()}var yf=ee("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),Cf=ee('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function wf(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(m,"$addons",a);let o=V(t,"state",8);const m=o().addonComponents;function p(){return o().currentAuxData}function u(M){vt(m,[...e(),M])}function f(M,P){vt(m,[...e(),{component:Yd,html:M,mounted:P}])}const c={},k={},y={},h={},x={},v={},C={},O={},D={},S={};let R=T();Oe();var H=Cf(),U=ce(H);kd(U,{get state(){return o()},$$events:{presetchange(...M){var P;(P=r(R))==null||P.apply(this,M)}}});var Y=$(U,2),L=j(Y);Ke(L,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Yl(L.lastChild,{breakpoint:"sm",class:"container-columns",children:(M,P)=>{var l=yf(),b=ce(l),K=j(b);Ue(K,{class:"row-columns",children:(oe,_e)=>{Sd(oe,{get state(){return o()},get api(){return k},get onPresetChange(){return r(R)},set onPresetChange(He){d(R,He)},$$legacy:!0})},$$slots:{default:!0}});var z=$(K,2);Ue(z,{class:"row-columns",children:(oe,_e)=>{df(oe,{get state(){return o()},get api(){return y}})},$$slots:{default:!0}});var _=$(z,2);Ue(_,{class:"row-columns",children:(oe,_e)=>{lf(oe,{get state(){return o()},get api(){return h}})},$$slots:{default:!0}});var N=$(_,2);Ue(N,{class:"row-columns",children:(oe,_e)=>{Rd(oe,{get state(){return o()},get api(){return v}})},$$slots:{default:!0}});var Q=$(N,2);Ue(Q,{class:"row-columns",children:(oe,_e)=>{Qd(oe,{get state(){return o()},api:{},get onPresetChange(){return r(R)},set onPresetChange(He){d(R,He)},$$legacy:!0})},$$slots:{default:!0}}),A(b);var le=$(b,2),ae=j(le);Ue(ae,{class:"row-columns",children:(oe,_e)=>{cd(oe,{get state(){return o()},get api(){return x}})},$$slots:{default:!0}});var ve=$(ae,2);Ue(ve,{class:"row-columns",children:(oe,_e)=>{ad(oe,{get state(){return o()},get api(){return O}})},$$slots:{default:!0}});var X=$(ve,2);Ue(X,{class:"row-columns",children:(oe,_e)=>{$f(oe,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var Re=$(X,2);Ue(Re,{class:"row-columns",children:(oe,_e)=>{ld(oe,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var de=$(Re,2);{var he=oe=>{Ue(oe,{class:"row-columns",children:(_e,He)=>{Pc(_e,{get state(){return o()}})},$$slots:{default:!0}})};Ve(de,oe=>{e(),s(()=>e().length)&&oe(he)})}var Pe=$(de,2);Ue(Pe,{class:"row-columns",children:(oe,_e)=>{mf(oe,{get state(){return o()},get api(){return S}})},$$slots:{default:!0}});var Te=$(Pe,2);Ue(Te,{class:"row-columns",children:(oe,_e)=>{rd(oe,{get state(){return o()},get api(){return D}})},$$slots:{default:!0}}),A(le),g(M,l)},$$slots:{default:!0}}),A(L),A(Y),g(n,H),Je(t,"auxData",p),Je(t,"addSvelteAddon",u),Je(t,"addHtmlAddon",f),Je(t,"options",c),Je(t,"dailyLimits",k),Je(t,"newOptions",y),Je(t,"lapseOptions",h),Je(t,"buryOptions",x),Je(t,"displayOrder",v),Je(t,"timerOptions",C),Je(t,"audioOptions",O),Je(t,"advancedOptions",D),Je(t,"easyDays",S);var E=xe({auxData:p,addSvelteAddon:u,addHtmlAddon:f,options:c,dailyLimits:k,newOptions:y,lapseOptions:h,buryOptions:x,displayOrder:v,timerOptions:C,audioOptions:O,advancedOptions:D,easyDays:S});return i(),E}function lg(n,t){be(t,!1);let a=V(t,"data",8),i=T();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Gs(),(!await a().state.isModified()||confirm(Ul()))&&Jn({})},Ns(()=>{globalThis.$deckOptions=new Promise((e,o)=>{e(r(i))}),a().state.resolveOriginalConfigs(),ea({})}),Oe(),Mt(wf(n,{get state(){return w(a()),s(()=>a().state)},$$legacy:!0}),e=>d(i,e),()=>r(i)),xe()}export{lg as component,ig as universal};
