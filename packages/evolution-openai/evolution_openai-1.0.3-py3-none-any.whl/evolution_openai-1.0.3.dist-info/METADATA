Metadata-Version: 2.3
Name: evolution-openai
Version: 1.0.3
Summary: Evolution OpenAI with automatic token management
Project-URL: Homepage, https://github.com/cloud-ru-tech/evolution-openai-python
Project-URL: Repository, https://github.com/cloud-ru-tech/evolution-openai-python.git
Project-URL: Documentation, https://cloud-ru-tech.github.io/evolution-openai-python/
Project-URL: Bug Reports, https://github.com/cloud-ru-tech/evolution-openai-python/issues
Project-URL: Changelog, https://github.com/cloud-ru-tech/evolution-openai-python/blob/main/CHANGELOG.md
Author-email: Evolution ML Inference Team <support@cloud.ru>
Maintainer-email: Evolution ML Inference Team <support@cloud.ru>
Keywords: ai,api,chatgpt,client,cloud.ru,gpt,ml,openai,sdk
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: MacOS
Classifier: Operating System :: Microsoft :: Windows
Classifier: Operating System :: OS Independent
Classifier: Operating System :: POSIX
Classifier: Operating System :: POSIX :: Linux
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Internet :: WWW/HTTP :: HTTP Servers
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Requires-Python: >=3.8
Requires-Dist: httpx<1,>=0.23.0
Requires-Dist: openai<2,>=1.30.0
Requires-Dist: python-dotenv<2,>=1.0.0
Requires-Dist: requests<3,>=2.25.0
Description-Content-Type: text/markdown

# Evolution OpenAI
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![PyPI version](https://badge.fury.io/py/evolution-openai.svg)](https://badge.fury.io/py/evolution-openai)
[![Coverage](https://cloud-ru-tech.github.io/evolution-openai-python/badges/coverage.svg)](https://github.com/cloud-ru-tech/evolution-openai-python/actions)

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π** Evolution OpenAI client —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∞–º–∏. –ü—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ `OpenAI` –Ω–∞ `EvolutionOpenAI` –∏ –≤—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **100% —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º OpenAI Python SDK
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏** Cloud.ru
- ‚úÖ **Drop-in replacement** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- ‚úÖ **Async/await –ø–æ–¥–¥–µ—Ä–∂–∫–∞** —Å `AsyncOpenAI`
- ‚úÖ **Streaming responses** –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ **Thread-safe** token management
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ 30 —Å–µ–∫—É–Ω–¥ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ .env —Ñ–∞–π–ª–æ–≤** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- ‚úÖ **Evolution Foundation Models** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å `project_id`
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã** –¥–ª—è Foundation Models
- ‚úÖ **–ü–µ—Ä–µ–¥–æ–≤—ã–µ AI –º–æ–¥–µ–ª–∏** –≤–∫–ª—é—á–∞—è DeepSeek-R1, Qwen2.5 –∏ –¥—Ä—É–≥–∏–µ

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install evolution-openai
```

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK

```python
# ‚ùå –ë–´–õ–û (OpenAI SDK)
from openai import OpenAI

client = OpenAI(api_key="sk-...")

# ‚úÖ –°–¢–ê–õ–û (Evolution OpenAI)
from evolution_openai import OpenAI

# –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
client = OpenAI(
    key_id="your_key_id", 
    secret="your_secret", 
    base_url="https://your-model-endpoint.cloud.ru/v1"
)

# –î–ª—è Evolution Foundation Models
client = OpenAI(
    key_id="your_key_id", 
    secret="your_secret", 
    base_url="https://foundation-models.api.cloud.ru/api/gigacube/openai/v1",
    project_id="your_project_id"  # –î–ª—è Evolution Foundation Models
)

# –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–ß–ù–û –¢–ê–ö –ñ–ï!
response = client.chat.completions.create(
    model="default",  # –∏–ª–∏ "deepseek-ai/DeepSeek-R1-Distill-Llama-70B" –¥–ª—è Foundation Models
    messages=[{"role": "user", "content": "Hello!"}]
)
```

### –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –û–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from evolution_openai import OpenAI

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è client –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
client = OpenAI(
    key_id="your_key_id", 
    secret="your_secret", 
    base_url="https://your-model-endpoint.cloud.ru/v1"
)

# Chat Completions
response = client.chat.completions.create(
    model="default",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "What is artificial intelligence?"},
    ],
    max_tokens=150,
)

print(response.choices[0].message.content)
```

#### üöÄ Evolution Foundation Models

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **Evolution Foundation Models** - –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–¥–æ–≤—ã–º–∏ AI –º–æ–¥–µ–ª—è–º–∏ –Ω–∞ Cloud.ru. –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Project ID** - –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-project-id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü–µ—Ä–µ–¥–æ–≤—ã–µ –º–æ–¥–µ–ª–∏** - DeepSeek-R1, Qwen2.5, RefalMachine/RuadaptQwen2.5-7B-Lite-Beta
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π endpoint** - `https://foundation-models.api.cloud.ru/api/gigacube/openai/v1`
- **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å OpenAI SDK - –≤—Å–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ

```python
from evolution_openai import OpenAI

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Evolution Foundation Models
client = OpenAI(
    key_id="your_key_id",
    secret="your_secret", 
    base_url="https://foundation-models.api.cloud.ru/api/gigacube/openai/v1",
    project_id="your_project_id"  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Foundation Models
response = client.chat.completions.create(
    model="deepseek-ai/DeepSeek-R1-Distill-Llama-70B",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "What is artificial intelligence?"},
    ],
    max_tokens=150
)

print(response.choices[0].message.content)
```

### Streaming

```python
# –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
stream = client.chat.completions.create(
    model="default", 
    messages=[{"role": "user", "content": "Tell me a story"}], 
    stream=True
)

# –î–ª—è Foundation Models
stream = client.chat.completions.create(
    model="deepseek-ai/DeepSeek-R1-Distill-Llama-70B", 
    messages=[{"role": "user", "content": "Tell me a story"}], 
    stream=True
)

for chunk in stream:
    if chunk.choices[0].delta.content:
        print(chunk.choices[0].delta.content, end="")
```

### Async/Await

```python
import asyncio
from evolution_openai import AsyncOpenAI


async def main():
    # –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    client = AsyncOpenAI(
        key_id="your_key_id",
        secret="your_secret",
        base_url="https://your-model-endpoint.cloud.ru/v1",
    )

    # –î–ª—è Foundation Models
    client = AsyncOpenAI(
        key_id="your_key_id",
        secret="your_secret",
        base_url="https://foundation-models.api.cloud.ru/api/gigacube/openai/v1",
        project_id="your_project_id",  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è Foundation Models
    )

    response = await client.chat.completions.create(
        model="deepseek-ai/DeepSeek-R1-Distill-Llama-70B",  # –∏–ª–∏ "default" –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        messages=[{"role": "user", "content": "Async hello!"}]
    )

    print(response.choices[0].message.content)


asyncio.run(main())
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ env.example –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ
cp env.example .env
```

#### –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
# .env —Ñ–∞–π–ª
EVOLUTION_KEY_ID=your_key_id_here
EVOLUTION_SECRET=your_secret_here
EVOLUTION_BASE_URL=https://your-model-endpoint.cloud.ru/v1
EVOLUTION_TOKEN_URL=https://iam.api.cloud.ru/api/v1/auth/token
ENABLE_INTEGRATION_TESTS=false
LOG_LEVEL=INFO
```

#### –î–ª—è Evolution Foundation Models:

```bash
# .env —Ñ–∞–π–ª –¥–ª—è Foundation Models
EVOLUTION_KEY_ID=your_key_id_here
EVOLUTION_SECRET=your_secret_here
EVOLUTION_BASE_URL=https://foundation-models.api.cloud.ru/api/gigacube/openai/v1
EVOLUTION_PROJECT_ID=your_project_id_here  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Foundation Models
EVOLUTION_TOKEN_URL=https://iam.api.cloud.ru/api/v1/auth/token
ENABLE_INTEGRATION_TESTS=false
LOG_LEVEL=INFO
```

```python
import os
from evolution_openai import OpenAI
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ .env —Ñ–∞–π–ª–∞
load_dotenv()

client = OpenAI(
    key_id=os.getenv("EVOLUTION_KEY_ID"),
    secret=os.getenv("EVOLUTION_SECRET"),
    base_url=os.getenv("EVOLUTION_BASE_URL"),
    project_id=os.getenv("EVOLUTION_PROJECT_ID"),  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è Foundation Models
)
```

### –£–¥–æ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```python
from evolution_openai import create_client, create_async_client

# Sync client
client = create_client(key_id="...", secret="...", base_url="...", timeout=30.0)

# Async client
async_client = create_async_client(key_id="...", secret="...", base_url="...", max_retries=5)
```

## üìã –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –í–°–ï –º–µ—Ç–æ–¥—ã OpenAI SDK:

```python
# Chat API
client.chat.completions.create(...)
client.chat.completions.create(..., stream=True)

# Models API
client.models.list()
client.models.retrieve("model_id")

# Legacy Completions
client.completions.create(...)

# Advanced features
client.with_options(timeout=30).chat.completions.create(...)
client.chat.completions.with_raw_response.create(...)

# Context manager
with client:
    response = client.chat.completions.create(...)
```


## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API Documentation](https://cloud-ru-tech.github.io/evolution-openai-python)
- [Evolution Foundation Models Guide](https://cloud-ru-tech.github.io/evolution-openai-python/foundation_models)
- [Migration Guide](https://cloud-ru-tech.github.io/evolution-openai-python/migration)
- [Examples](https://github.com/cloud-ru-tech/evolution-openai-python/tree/main/examples/)
- [Changelog](https://github.com/cloud-ru-tech/evolution-openai-python/tree/main/CHANGELOG.md)
- [Environment Configuration](https://github.com/cloud-ru-tech/evolution-openai-python/tree/main/env.example)


## üÜò Support

- [GitHub Issues](https://github.com/cloud-ru-tech/evolution-openai-python/issues)
- [Documentation](https://cloud-ru-tech.github.io/evolution-openai-python)
- Email: support@cloud.ru

## üîó Links

- [PyPI Package](https://pypi.org/project/evolution-openai/)
- [GitHub Repository](https://github.com/cloud-ru-tech/evolution-openai-python)
- [Cloud.ru Platform](https://cloud.ru/)
- [OpenAI Python SDK](https://github.com/openai/openai-python) 