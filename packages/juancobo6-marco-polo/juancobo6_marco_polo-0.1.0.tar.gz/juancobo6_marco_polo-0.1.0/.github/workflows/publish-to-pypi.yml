# .github/workflows/publish-to-pypi.yml

name: Publish Python Package to PyPI

# Run this workflow every time a new release is created
on:
  release:
    types: [published]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1. Check out the repository's code
      - name: Check out repository
        uses: actions/checkout@v4

      # 2. Set up a specific Python version
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      # 3. Install uv using the official action
      - name: Install uv
        uses: astral-sh/setup-uv@v1
        with:
          version: latest

      # 4. Build the package into sdist and wheel
      - name: Build package
        run: uv build --sdist --wheel

      # 5. Publish the package to PyPI using the token
      - name: Publish to PyPI
        run: uv publish --token ${{ secrets.PYPI_API_TOKEN }}