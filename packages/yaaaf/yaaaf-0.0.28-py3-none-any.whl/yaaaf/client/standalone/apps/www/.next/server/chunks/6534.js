"use strict";exports.id=6534,exports.ids=[6534,5821],exports.modules={26534:(e,r,t)=>{t.r(r),t.d(r,{useAudioRecording:()=>c});var o=t(46662),a=t(25821);function c({transcribeAudio:e,onTranscriptionComplete:r}){let[t,c]=(0,o.useState)(!1),[n,s]=(0,o.useState)(!!e),[i,u]=(0,o.useState)(!1),[d,l]=(0,o.useState)(!1),[p,w]=(0,o.useState)(null),f=(0,o.useRef)(null),g=async()=>{u(!1),l(!0);try{a.recordAudio.stop();let t=await f.current;if(e){let o=await e(t);r?.(o)}}catch(e){console.error("Error transcribing audio:",e)}finally{l(!1),c(!1),p&&(p.getTracks().forEach(e=>e.stop()),w(null)),f.current=null}},y=async()=>{if(t)await g();else try{c(!0),u(!0);let e=await navigator.mediaDevices.getUserMedia({audio:!0});w(e),f.current=(0,a.recordAudio)(e)}catch(e){console.error("Error recording audio:",e),c(!1),u(!1),p&&(p.getTracks().forEach(e=>e.stop()),w(null))}};return{isListening:t,isSpeechSupported:n,isRecording:i,isTranscribing:d,audioStream:p,toggleListening:y,stopRecording:g}}},25821:(e,r,t)=>{t.r(r),t.d(r,{recordAudio:()=>o});let o=function(){let e=async function(r){try{let t=new MediaRecorder(r,{mimeType:"audio/webm;codecs=opus"}),o=[];return new Promise((r,a)=>{t.ondataavailable=e=>{e.data.size>0&&o.push(e.data)},t.onstop=()=>{let e=new Blob(o,{type:"audio/webm"});r(e)},t.onerror=()=>{a(Error("MediaRecorder error occurred"))},t.start(1e3),e.currentRecorder=t})}catch(e){throw Error("Failed to start recording: "+(e instanceof Error?e.message:"Unknown error occurred"))}};return e.stop=()=>{let r=e.currentRecorder;r&&"inactive"!==r.state&&r.stop(),delete e.currentRecorder},e}()}};