{% extends 'endpoints/base.html' %}

{% block content %}
<div class="container">
    <h2>{{ object.mnemonic }} - {{ object.hostname }}</h2>

    <div class="mb-3">
        <a href="{% url 'endpoint-list' %}" class="btn btn-secondary">Back to List</a>
        <a href="{% url 'endpoint-update' object.pk %}" class="btn btn-primary">Edit</a>
        <a href="{% url 'endpoint-delete' object.pk %}" class="btn btn-danger">Delete</a>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Basic Information</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-2">
                    <strong>Mnemonic:</strong> {{ object.mnemonic }}
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Hostname:</strong> {{ object.hostname }}
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-2">
                    <strong>Scheme:</strong> {{ object.get_scheme_display }}
                </div>
                <div class="col-md-3 mb-2">
                    <strong>Port:</strong> {{ object.port }}
                </div>
                <div class="col-md-3 mb-2">
                    <strong>Path:</strong> {{ object.path }}
                </div>
                <div class="col-md-3 mb-2">
                    <strong>Verb:</strong> {{ object.get_verb_display }}
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Query Parameters</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-2">
                    <strong>Query:</strong> {{ object.query|default:"None" }}
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Fragment:</strong> {{ object.fragment|default:"None" }}
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Post Parameters</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-12 mb-2">
                    <strong>Body:</strong>
                    {% if object.body %}
                        <pre class="mt-2"><code>{{ object.body|pprint }}</code></pre>
                    {% else %}
                        None
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Response Settings</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-2">
                    <strong>Healthy Status Code:</strong> {{ object.healthy_status_code }}
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Response Format:</strong> {{ object.get_response_format_display }}
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Health Check Configuration</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3 mb-2">
                    <strong>Ignore:</strong> {% if object.ignore %}<span class="badge bg-danger">Yes</span>{% else %}<span class="badge bg-success">No</span>{% endif %}
                </div>
                <div class="col-md-3 mb-2">
                    <strong>TLS Check:</strong> {% if object.tls_check %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-danger">No</span>{% endif %}
                </div>
                <div class="col-md-3 mb-2">
                    <strong>DNS Check:</strong> {% if object.dns_check %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-danger">No</span>{% endif %}
                </div>
                <div class="col-md-3 mb-2">
                    <strong>Health Check:</strong> {% if object.health_check %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-danger">No</span>{% endif %}
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-2">
                    <strong>Status Key:</strong> {{ object.status_key }}
                </div>
                <div class="col-md-4 mb-2">
                    <strong>Healthy Status:</strong> {{ object.healthy_status }}
                </div>
                <div class="col-md-4 mb-2">
                    <strong>Version Key:</strong> {{ object.version_key }}
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Timeout Settings</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-2">
                    <strong>Connect Timeout:</strong> {{ object.connect_timeout }} seconds
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Read Timeout:</strong> {{ object.read_timeout }} seconds
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <h5>Additional Settings</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-12 mb-2">
                    <strong>DNS Resolver List:</strong>
                    {% if object.dns_resolver_list %}
                        {{ object.dns_resolver_list.name }}
                    {% else %}
                        None
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}