{% extends 'endpoints/base.html' %}

{% block content %}
<div class="container">
    <h2>{% if form.instance.pk %}Edit{% else %}Create{% endif %} Endpoint</h2>

    <form method="post" class="mb-4">
        {% csrf_token %}

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Basic Information</legend>
            <div class="row">
                <div class="col-md-6 mb-3">{{ form.mnemonic.label_tag }} {{ form.mnemonic }}</div>
                <div class="col-md-6 mb-3">{{ form.hostname.label_tag }} {{ form.hostname }}</div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3">{{ form.scheme.label_tag }} {{ form.scheme }}</div>
                <div class="col-md-3 mb-3">{{ form.port.label_tag }} {{ form.port }}</div>
                <div class="col-md-3 mb-3">{{ form.path.label_tag }} {{ form.path }}</div>
                <div class="col-md-3 mb-3">{{ form.verb.label_tag }} {{ form.verb }}</div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Query Parameters</legend>
            <div class="row">
                <div class="col-md-6 mb-3">{{ form.query.label_tag }} {{ form.query }}</div>
                <div class="col-md-6 mb-3">{{ form.fragment.label_tag }} {{ form.fragment }}</div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Post Parameters</legend>
            <div class="row">
                <div class="col-12 mb-3">{{ form.body.label_tag }} {{ form.body }}</div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Response Settings</legend>
            <div class="row">
                <div class="col-md-6 mb-3">{{ form.healthy_status_code.label_tag }} {{ form.healthy_status_code }}</div>
                <div class="col-md-6 mb-3">{{ form.response_format.label_tag }} {{ form.response_format }}</div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Health Check Configuration</legend>
            <div class="row">
                <div class="col-md-3 mb-3">{{ form.ignore.label_tag }} {{ form.ignore }}</div>
                <div class="col-md-3 mb-3">{{ form.tls_check.label_tag }} {{ form.tls_check }}</div>
                <div class="col-md-3 mb-3">{{ form.dns_check.label_tag }} {{ form.dns_check }}</div>
                <div class="col-md-3 mb-3">{{ form.health_check.label_tag }} {{ form.health_check }}</div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-3">{{ form.status_key.label_tag }} {{ form.status_key }}</div>
                <div class="col-md-4 mb-3">{{ form.healthy_status.label_tag }} {{ form.healthy_status }}</div>
                <div class="col-md-4 mb-3">{{ form.version_key.label_tag }} {{ form.version_key }}</div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Timeout Settings</legend>
            <div class="row">
                <div class="col-md-6 mb-3">{{ form.connect_timeout.label_tag }} {{ form.connect_timeout }}</div>
                <div class="col-md-6 mb-3">{{ form.read_timeout.label_tag }} {{ form.read_timeout }}</div>
            </div>
        </fieldset>

        <fieldset class="border p-3 mb-4">
            <legend class="w-auto">Additional Settings</legend>
            <div class="row">
                <div class="col-12 mb-3">{{ form.dns_resolver_list.label_tag }} {{ form.dns_resolver_list }}</div>
            </div>
        </fieldset>

        <div class="d-flex justify-content-between">
            <a href="{% url 'endpoint-list' %}" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
    </form>
</div>
{% endblock %}