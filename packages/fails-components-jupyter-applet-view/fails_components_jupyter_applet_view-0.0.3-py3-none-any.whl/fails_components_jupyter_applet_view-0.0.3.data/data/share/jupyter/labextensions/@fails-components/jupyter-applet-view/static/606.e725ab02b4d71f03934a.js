"use strict";(self.webpackChunk_fails_components_jupyter_applet_view=self.webpackChunk_fails_components_jupyter_applet_view||[]).push([[606],{9606:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var o=i(3904),n=i(4805),s=i(4503),a=i(6341),l=i(8805),r=i(9322),d=i(6249),p=i(4602);const c=[{command:"fails-components-jupyter-applet-view:move_view_up",name:"move-view-up"},{command:"fails-components-jupyter-applet-view:move_view_down",name:"move-view-down"},{command:"fails-components-jupyter-applet-view:move_view_app_up",name:"move-view-app-up"},{command:"fails-components-jupyter-applet-view:move_view_app_down",name:"move-view-app-down"},{command:"fails-components-jupyter-applet-view:delete_view",name:"delete-view"}];class h{constructor(e,t,i){this._commands=e,this._launcherInfo=t,this._toolbarFactory=null!=i?i:this.defaultToolbarFactory}get defaultToolbarFactory(){const e=(0,l.createDefaultFactory)(this._commands);return t=>new r.ObservableList({values:c.map((i=>{const o=t.parent.parent.path;return{name:i.name,widget:e(h.FACTORY_NAME,t,{...i,args:{cellid:t.cellid,notepadpath:o,widgetid:t.widgetid}})}}))})}createNew(e){return new u(e,this._toolbarFactory,this._launcherInfo)}}h.FACTORY_NAME="AppletView";class u{constructor(e,t,i){this._isDisposed=!1,this._toolbars=new WeakMap,this._toolbarStore=[],this._notebookpanel=e,this._toolbarFactory=null!=t?t:null,e.revealed.then((()=>{requestAnimationFrame((()=>{var e;if(null===(e=this._notebookpanel)||void 0===e||e.appletViewWidget.viewChanged.connect(this._addToolbar,this),this._addToolbar(),(null==i?void 0:i.inLecture)&&this._setHiddenToolbars(null==i?void 0:i.inLecture),i){let e=!(null==i?void 0:i.inLecture);i.inLectureChanged.connect(((t,i)=>{e!==!i&&(this._setHiddenToolbars(i),e=!i)}))}}))}))}dispose(){this.isDisposed||(this._isDisposed=!0,this._toolbarStore.forEach((e=>e.dispose())),this._toolbarStore=[],this._toolbars=new WeakMap,this._notebookpanel=null,p.Signal.clearData(this))}get isDisposed(){return this._isDisposed}_addToolbar(){var e;const t=this._notebookpanel;if(t&&!t.isDisposed){const i=[],o=null===(e=t.appletViewWidget)||void 0===e?void 0:e.applets,n=e=>{const t=e.clone;if(t){const i=new d.Toolbar;this._toolbars.set(e,i),this._toolbarStore.push(i),i.addClass("fl-jp-AppletViewToolbar"),this._toolbarFactory&&(0,l.setToolbar)(t,this._toolbarFactory,i)}};for(const e of o)for(const t of e.parts){const e=t.clone;if(!this._toolbars.has(t))if(e)n(t);else{const e=()=>{n(t),t.cloned.disconnect(e)};t.cloned.connect(e),this._toolbars.set(t,null)}}Promise.all(i).then((()=>{for(const e of o)for(const t of e.parts){const e=this._toolbars.get(t);if(!e)continue;if(!t.clone||t.clone.isDisposed)continue;const i=t.clone;i&&i.layout.addWidget(e)}})).catch((e=>{console.error("Error rendering buttons of the cell toolbar: ",e)}))}}_setHiddenToolbars(e){var t;const i=this._notebookpanel;if(i&&!i.isDisposed){const o=null===(t=i.appletViewWidget)||void 0===t?void 0:t.applets;for(const t of o)for(const i of t.parts){const t=this._toolbars.get(i);t&&t.setHidden(e)}}}}var v=i(5256),f=i(5399),g=i(4053),_=i(7262),m=i(646);class b extends v.AccordionPanel{constructor(e){super({renderer:new y}),this._viewChanged=new p.Signal(this);const t=(e.translator||s.nullTranslator).load("jupyterlab");if(this._notebook=e.notebook,this._inLecture=!1,this._interceptor=e.interceptor,void 0!==e.applets)this._applets=e.applets.map((({parts:e,appid:t,appname:i},o)=>{const n=null!=t?t:_.UUID.uuid4();return{appid:n,appname:i||"Applet "+(o+1),observer:new ResizeObserver(((e,t)=>this.resizeEvent(n,e,t))),parts:e.map((e=>{var t;return new w({index:null!==(t=e.index)&&void 0!==t?t:-1,cell:e.cell||void 0,notebook:this._notebook})}))}}));else{const e=_.UUID.uuid4();this._applets=[],this.addApplet({appid:e,appname:"Applet 1"})}this.id=`AppletView-${_.UUID.uuid4()}`,this.title.label="Applet area",this.title.icon=d.notebookIcon,this.title.caption=this._notebook.title.label?t.__("For Notebook: %1",this._notebook.title.label):t.__("For Notebook:"),this.addClass("fl-jp-AppletView"),this._notebook.context.ready.then((()=>{this._applets.forEach((({parts:e,appid:t})=>{e.forEach(((e,i)=>{if(!e.cell&&void 0!==e.index&&e.index>=0){const t=this._notebook.content.widgets[e.index];e.cell=t;const i=e.cell.outputArea.model;for(let e=0;e<i.length;e++)i.get(e).changed.connect((()=>{}))}if(e.cell&&!e.added&&(e.clone=this.addCell(t,e.cell,e.id||"undefinedid"),"code"===e.cell.model.type)){let t;for(const i of e.cell.outputArea.widgets)for(const e of Array.from(i.children()))e instanceof f.WidgetRenderer&&e._manager&&(t=e._manager.promise);null==t||t.then((t=>{for(const i of e.clone.widgets)for(const e of Array.from(i.children()))e instanceof f.WidgetRenderer&&(e.manager=t)}))}}))})),this._viewChanged.emit()}))}cloneCell(e,t){if("code"===e.model.type){const i=e,o=i.cloneOutputArea();if(this._interceptor){let e=!1;const t=i.model.outputs;for(let i=0;i<t.length;i++){const o=t.get(i);if(Object.keys(o.data).some((e=>{var t;return!(null===(t=this._interceptor)||void 0===t?void 0:t.isMimeTypeSupported(e))}))){e=!0;break}}e?o.addClass("fl-jl-cell-interceptor-unsupported"):o.removeClass("fl-jl-cell-interceptor-unsupported")}return o.cellid=t,o.widgetid=_.UUID.uuid4(),o}{const i=e.clone();return i.cellid=t,i.widgetid=_.UUID.uuid4(),i}}getWidgetAppId(e){const t=this.widgets.findIndex((t=>Array.from(t.children()).some((t=>t.widgetid===e))));if(-1!==t)return this._applets[t].appid}addToObserver(e,t){this._applets[e].observer.observe(t.node,{box:"border-box"})}removeFromObserver(e,t){this._applets[e].observer.unobserve(t.node)}addCell(e,t,i){const o=this._applets.findIndex((t=>t.appid===e));if(-1===o)throw new Error("Applet not found in addcell");const n=this.widgets[o],s=this.cloneCell(t,i);return s.node.addEventListener("contextmenu",(e=>{e.preventDefault()})),this.addToObserver(o,s),n.addWidget(s),this._viewChanged.emit(),s}insertCell(e,t,i,o){const n=this._applets.findIndex((t=>t.appid===e));if(-1===n)return;const s=this.cloneCell(i,o),a=this.widgets[n];return this.addToObserver(n,s),a.layout.insertWidget(t,s),this._viewChanged.emit(),s}deletePart(e,t){const i=this._applets.findIndex((t=>t.appid===e));if(-1===i)return;const o=this._applets[i],n=o.parts.findIndex((e=>e.id===t));if(-1===n)return;const s=o.parts.splice(n,1);if(s.length>0){const e=s[0].cell;void 0!==e&&this.removeFromObserver(i,e)}this.widgets[i].layout.removeWidgetAt(n),this.informResize(this._applets[i]),this._viewChanged.emit()}movePart(e,t,i){const o=this._applets.findIndex((t=>t.appid===e));if(-1===o)return;const n=this._applets[o],s=n.parts.findIndex((e=>e.id===t));if(-1===s)return;if(s+i<0)return;if(s+i>=n.parts.length)return;const[a]=n.parts.splice(s,1);n.parts.splice(s+i+(i>1?-1:0),0,a);const l=this.widgets[o].layout;l.insertWidget(s+i,l.widgets[s]),this.informResize(this._applets[o]),this._viewChanged.emit()}moveApp(e,t,i){const o=this._applets.findIndex((t=>t.appid===e));if(-1===o)return;const n=this._applets[o],s=n.parts.findIndex((e=>e.id===t));if(-1===s)return;if(0===i)return;if(o+i<0)return;if(o+i>=this._applets.length){if(this._applets[o].parts.length<=1)return!1;this.addApplet({appid:_.UUID.uuid4()})}const a=this._applets[o+i];if(a.parts.some((e=>e.id===t)))return;let l=0;i<0&&(l=a.parts.length);const[r]=n.parts.splice(s,1);a.parts.splice(l,0,r);const d=this.widgets[o],p=this.widgets[o+i],c=d.layout,h=p.layout,u=c.widgets[s];this.removeFromObserver(o,u),this.addToObserver(o+i,u),h.insertWidget(l,u),o===this._applets.length-1&&0===n.parts.length&&(this._applets.splice(o,1),this.layout.removeWidgetAt(o)),this.informResize(this._applets[o]),this.informResize(this._applets[o+i]),this._viewChanged.emit()}saveData(){return{applets:this._applets.map((e=>({parts:e.parts.map((e=>({index:e.index,id:e.id}))),appid:e.appid,appname:e.appname})))}}loadData(e){var t;if(!e)return;let i=e.applets;if(e.parts&&void 0===i&&(i=[{appid:_.UUID.uuid4(),parts:e.parts}]),Array.isArray(i)&&!i.some((({parts:e})=>!Array.isArray(e))))if(this._applets=[],this.layout&&[...this.layout.widgets].forEach((e=>{var t;return null===(t=this.layout)||void 0===t?void 0:t.removeWidget(e)})),0!==i.length)for(const e of i){const i=null!==(t=e.appid)&&void 0!==t?t:_.UUID.uuid4(),o=e.appname;this.addApplet({appid:i,appname:o}),void 0!==this._selectedAppid&&i!==this._selectedAppid&&this.collapse(this._applets.length-1);for(const t of e.parts)(void 0!==t.index||t.id)&&this.addPart(i,{index:t.index,id:t.id})}else{const e=_.UUID.uuid4();this.addApplet({appid:e,appname:"Applet 1"})}}addApplet({appid:e,appname:t}){let i=this._applets.findIndex((t=>t.appid===e));if(-1!==i)return this.widgets[i];i=this._applets.length,t=t||"Applet "+Math.random().toString(36).slice(2,6),this._applets.push({appid:e,appname:t,observer:new ResizeObserver(((t,i)=>this.resizeEvent(e,t,i))),parts:[]});const o=this.layout,n=new v.Panel({});return v.BoxLayout.setStretch(n,1),n.addClass("fl-jp-Applet"),n.title.label=t,n.title.caption=n.title.label,n.title.changed.connect((e=>{this._applets[i].appname=e.label,this._viewChanged.emit()})),o.insertWidget(i,n),n}addPart(e,t){var i;const o=new w({index:void 0!==t.index?t.index:-1,cell:t.cell||void 0,id:t.id||void 0,notebook:this._notebook});let n=void 0===e?0:this._applets.findIndex((t=>t.appid===e));-1===n&&(n=0);const s=this._applets[n].appid,a=this._applets[n];a.parts.some((e=>e.id===o.id||void 0!==e.cell&&e.cell===o.cell))||(null===(i=this._notebook.content.model)||void 0===i||i.cells.changed.connect((e=>{var t;for(const t of e)if(t.id===o.id){if(-1!==g.ArrayExt.findFirstIndex(this._notebook.content.widgets,(e=>e===o.cell)))return;const e=o.clone,t=a.parts.indexOf(o),i=g.ArrayExt.findFirstIndex(this._notebook.content.widgets,(e=>{var t;return e.id===(null===(t=o.cell)||void 0===t?void 0:t.id)}));if(-1===i)throw new Error("Cell does not exist");return o.cell=this._notebook.content.widgets[i],null==e||e.dispose(),void(o.clone=this.insertCell(a.appid,t,o.cell,o.id))}const i=this._applets.findIndex((e=>e.appid===s));if(-1===i)return;const n=this._applets[i],l=n.parts.indexOf(o);-1!==l&&n.parts.splice(l,1),null===(t=o.clone)||void 0===t||t.dispose()})),a.parts.push(o),this._notebook.context.isReady&&(!o.cell&&void 0!==t.index&&t.index>=0&&(o.cell=this._notebook.content.widgets[t.index]),o.cell&&(o.clone=this.addCell(s,o.cell,o.id||"undefinedid"))),this._viewChanged.emit())}firstHasIndex(e){return 0!==this._applets.length&&this._applets[0].parts.some((t=>t.index===e))}selectApplet(e){this._selectedAppid=e;for(let t=0;t<this._applets.length;t++)this._applets[t].appid===e?this.expand(t):this.collapse(t)}unselectApplet(){for(let e=0;e<this._applets.length;e++)this.expand(e)}async takeAppScreenshot(e){if(void 0===this._selectedAppid)throw new Error("No app selected");const{dpi:t}=e,i=this._applets.findIndex((e=>e.appid===this._selectedAppid));if(-1===i)throw new Error("No invalid app selected");try{const e=await(0,m.domToBlob)(this.widgets[i].node,{maximumCanvasSize:4096,scale:t&&t/96||void 0});if(null===e)return;return e}catch(e){console.log("takeAppScreenshot error",e)}}informResize(e){let t=0,i=0;for(const o of e.parts){if(void 0===o.sizes)continue;const{width:e,height:n}=o.sizes;i+=n,t=Math.max(e,t)}this._notebook.appletResizeinfo({appid:e.appid,width:t,height:i})}resizeEvent(e,t,i){const o=this._applets.find((t=>t.appid===e));if(void 0===o)return;let n=!1;for(const e of t){const t=o.parts.find((t=>{var i;return(null===(i=null==t?void 0:t.clone)||void 0===i?void 0:i.node)===e.target}));if(!t)continue;if(!e.borderBoxSize[0])continue;const i=e.borderBoxSize[0];0!==i.inlineSize&&0!==i.blockSize&&(t.sizes={width:i.inlineSize,height:i.blockSize},n=!0)}n&&this.informResize(o)}get applets(){return this._applets}get path(){return this._notebook.context.path}get viewChanged(){return this._viewChanged}set inLecture(e){if(e===this._inLecture)return;this._inLecture=e;this.layout.titleSpace=e?0:22}handleEvent(e){if("click"===e.type){const t=e.target;if("SPAN"===t.tagName||"INPUT"===t.tagName)return}["keydown","keypress","keyup"].includes(e.type)&&"INPUT"===e.target.tagName||super.handleEvent(e)}}class w{constructor(e){var t,i;this._cloned=new p.Signal(this),this._cell=e.cell,this._index=null!==(t=e.index)&&void 0!==t?t:-1,this._id=e.id||(null===(i=this._cell)||void 0===i?void 0:i.model.id),this._notebook=e.notebook}get index(){if(this._id){const e=g.ArrayExt.findFirstIndex(this._notebook.content.widgets,(e=>e.model.id===this._id));if(-1!==e)return e}return this._cell?g.ArrayExt.findFirstIndex(this._notebook.content.widgets,(e=>e===this._cell)):this._index}get cell(){return this._cell}set cell(e){null==e||e.model.id,this._id,this._cell=e}get added(){return!!this._clone}get id(){return this._id}set clone(e){this._clone=e,this._cloned.emit()}get clone(){return this._clone}get path(){return this._notebook.context.path}get cloned(){return this._cloned}}class y extends v.AccordionPanel.Renderer{createSectionTitle(e){const t=document.createElement("h3");t.setAttribute("tabindex","0"),t.id=this.createTitleKey(e),t.className=this.titleClassName;for(const i in e.dataset)t.dataset[i]=e.dataset[i];t.appendChild(this.createCollapseIcon(e)).className="lm-AccordionPanel-titleCollapser";let i=e.caption||e.label;const o=document.createElement("span");o.className="lm-AccordionPanel-titleLabel",o.textContent=e.label,o.title=i,t.appendChild(o);const n=document.createElement("input");return n.className="lm-AccordionPanel-titleLabelEdit",n.type="text",n.value=e.label,n.title=i,o.addEventListener("click",(e=>{t.removeChild(o),t.appendChild(n)})),n.addEventListener("blur",(e=>{n.value!==i&&n.dispatchEvent(new Event("change",{bubbles:!0})),t.removeChild(n),t.appendChild(o)})),n.addEventListener("keydown",(e=>("Enter"===e.key&&(n.value!==i&&n.dispatchEvent(new Event("change",{bubbles:!0})),t.removeChild(n),t.appendChild(o)),!0))),n.addEventListener("change",(s=>{const a=s.target;if(a===n){const t=null==a?void 0:a.value;t&&t!==i&&(i=t,e.caption=i,e.label=i,o.title=i,o.textContent=i)}t.removeChild(n),t.appendChild(o)})),t}}class x extends a.NotebookPanel{constructor(e,t,i){super(e),this._failsLauncherInfo=t;const o=this._content,n=this.layout;n.removeWidget(o);const s=new v.AccordionPanel({spacing:1,orientation:"horizontal",alignment:"justify"});v.BoxLayout.setStretch(s,1),s.addWidget(o);const a=this._appletviewWidget=new b({notebook:this,applets:void 0,translator:e.translator,interceptor:i});s.addWidget(a),n.addWidget(s);const l=s.layout;l.titleSpace=22,(null==t?void 0:t.inLecture)&&(this.toolbar.hide(),this.addClass("fl-jl-notebook-inlecture"),this._appletviewWidget.inLecture=!0,o.hide(),s.setRelativeSizes([0,1]),l.titleSpace=0),t&&(t.inLectureChanged.connect(((e,t)=>{t?(this.toolbar.hide(),this.addClass("fl-jl-notebook-inlecture"),this._appletviewWidget.inLecture=!0,o.hide(),a.show(),l.titleSpace=0,s.setRelativeSizes([0,1])):(this.toolbar.show(),this.removeClass("fl-jl-notebook-inlecture"),this._appletviewWidget.inLecture=!1,o.show(),l.titleSpace=22,s.setRelativeSizes([1,1]),a.unselectApplet(),setTimeout((()=>s.setRelativeSizes([1,1])),1))})),t.inLecture&&void 0!==t.selectedAppid&&a.selectApplet(t.selectedAppid),t.selectedAppidChanged.connect(((e,t)=>{void 0!==t&&a.selectApplet(t)}))),a.viewChanged.connect((e=>{const t=e.saveData();t&&this.context.model.setMetadata("failsApp",t)}));const r=()=>{const{failsApp:e,kernelspec:i}=this.context.model.metadata;(null==t?void 0:t.reportMetadata)&&t.reportMetadata({failsApp:e,kernelspec:i})};this.context.model.metadataChanged.connect(r),r()}appletResizeinfo({appid:e,width:t,height:i}){this._failsLauncherInfo&&(this._failsLauncherInfo.appletSizes[e]={appid:e,width:t,height:i})}get appletViewWidget(){return this._appletviewWidget}async takeAppScreenshot(e){return await this._appletviewWidget.takeAppScreenshot(e)}}class k extends a.NotebookWidgetFactory{constructor(e){super(e),this._failsLauncherInfo=e.failsLauncherInfo,this._failsInterceptor=e.failsInterceptor}createNewWidget(e,t){const i=e.translator,o=new a.NotebookHistory({sessionContext:e.sessionContext,translator:i}),n={rendermime:t?t.content.rendermime:this.rendermime.clone({resolver:e.urlResolver}),contentFactory:this.contentFactory,mimeTypeService:this.mimeTypeService,editorConfig:t?t.content.editorConfig:this._editorConfig,notebookConfig:t?t.content.notebookConfig:this._notebookConfig,translator:i,kernelHistory:o},s=this.contentFactory.createNotebook(n);return new x({context:e,content:s},this._failsLauncherInfo,this._failsInterceptor)}}var C=i(9569),A=i(7225);const I=[{id:"@fails-components/jupyter-applet-view:plugin",description:"An extension, that let's you select cell and switch to an applet mode, where only the selected cells are visible. This is used for fails-components to have jupyter applets in interactive teaching. ",requires:[n.IDocumentManager,a.INotebookTracker,s.ITranslator],optional:[o.ILayoutRestorer,A.IFailsLauncherInfo,C.IFailsInterceptor],autoStart:!0,activate:function(e,t,i,o,n,s,a){if("JupyterLite Server"===e.namespace)return;console.log("JupyterLab extension @fails-components/jupyter-applet-view is activated!");const l=o.load("fails_components_jupyter_applet_view"),{commands:r,shell:p}=e,c=e.docRegistry.getWidgetFactory("Notebook");if(void 0!==c){const t=new k({name:"Notebook",label:l.__("Notebook"),fileTypes:["notebook"],modelName:"notebook",defaultFor:["notebook"],preferKernel:c.preferKernel,canStartKernel:!0,rendermime:c.rendermime,contentFactory:c.contentFactory,editorConfig:c.editorConfig,notebookConfig:c.notebookConfig,mimeTypeService:c.mimeTypeService,toolbarFactory:c._toolbarFactory,translator:o,failsLauncherInfo:null!==s?s:void 0,failsInterceptor:null!==a?a:void 0});let n=0;t.widgetCreated.connect(((t,o)=>{var s,a;o.id=o.id||"splitviewnotebook-"+ ++n;const l=e.docRegistry.getFileType("notebook");o.title.icon=null==l?void 0:l.icon,o.title.iconClass=null!==(s=null==l?void 0:l.iconClass)&&void 0!==s?s:"",o.title.iconLabel=null!==(a=null==l?void 0:l.iconLabel)&&void 0!==a?a:"";const r=i;o.context.fileChanged.connect((()=>{const e=o.context.model.getMetadata("failsApp"),t=o;if(t.appletViewWidget&&e){const i=t.appletViewWidget;void 0!==i&&i.loadData(e)}})),o.context.saveState.connect(((e,t)=>{if("started"===t){const e=o.appletViewWidget;if(void 0!==e){const t=e.saveData();t&&o.context.model.setMetadata("failsApp",t)}}})),r.add(o),i.currentWidget||(r._pool.current=o)})),e.docRegistry._widgetFactories.notebook&&delete e.docRegistry._widgetFactories.notebook,e.docRegistry.addWidgetFactory(t),e.docRegistry.setDefaultWidgetFactory("notebook","Notebook")}const h=()=>{if(null===i.currentWidget||i.currentWidget!==p.currentWidget)return!1;const{content:e}=i.currentWidget,t=e.activeCellIndex;for(let i=0;i<e.widgets.length;++i)if(e.isSelected(e.widgets[i])&&i!==t)return!1;const o=i.currentWidget;if(o.appletViewWidget){const e=o.appletViewWidget;if(void 0!==e&&e.firstHasIndex(t))return!1}return!0};function u(e){let o;if("string"!=typeof e.notebookpath){if(o=i.currentWidget,!o)return}else{const i=e.notebookpath;if(o=t.findWidget(i,"Notebook"),!o)return}return o}function v(e,t){const i=u(e);if(!i)return;const o=i;if(o.appletViewWidget){const i=o.appletViewWidget,n=e.cellid,s=e.widgetid,a=i.getWidgetAppId(s);void 0!==a&&i.movePart(a,n,t)}}function f(e,t){const i=u(e);if(!i)return;const o=i;if(o.appletViewWidget){const i=o.appletViewWidget,n=e.cellid,s=e.widgetid,a=i.getWidgetAppId(s);void 0!==a&&i.moveApp(a,n,t)}}r.addCommand("fails-components-jupyter-applet-view:add_to_view",{label:"Add Output to first Applet view",execute:async e=>{const o=e.path;let n,s,a=e.index;if(o&&null!=a){if(n=t.findWidget(o,"Notebook"),!n)return}else{if(n=i.currentWidget,!n)return;s=n.content.activeCell,a=n.content.activeCellIndex}const l=n;if(l.appletViewWidget){const e=l.appletViewWidget;void 0===e||e.firstHasIndex(a)||e.addPart(void 0,{cell:s,index:a})}},icon:e=>e.toolbar?d.addIcon:void 0,isEnabled:h,isVisible:h}),r.addCommand("fails-components-jupyter-applet-view:move_view_up",{label:"Move view up",execute:async e=>{v(e,-1)},icon:e=>e.toolbar?d.moveUpIcon:void 0,isEnabled:()=>!0,isVisible:()=>!0}),r.addCommand("fails-components-jupyter-applet-view:move_view_down",{label:"Move view down",execute:async e=>{v(e,1)},icon:e=>e.toolbar?d.moveDownIcon:void 0,isEnabled:()=>!0,isVisible:()=>!0}),r.addCommand("fails-components-jupyter-applet-view:move_view_app_up",{label:"Move view up to other app",execute:async e=>{f(e,-1)},icon:e=>e.toolbar?d.caretUpIcon:void 0,isEnabled:()=>!0,isVisible:()=>!0}),r.addCommand("fails-components-jupyter-applet-view:move_view_app_down",{label:"Move view down to other app",execute:async e=>{f(e,1)},icon:e=>e.toolbar?d.caretDownIcon:void 0,isEnabled:()=>!0,isVisible:()=>!0}),r.addCommand("fails-components-jupyter-applet-view:delete_view",{label:"Delete view",execute:async e=>{const t=u(e);if(!t)return;const i=t;if(i.appletViewWidget){const t=i.appletViewWidget,o=e.cellid,n=e.widgetid,s=t.getWidgetAppId(n);void 0!==s&&t.deletePart(s,o)}},icon:e=>e.toolbar?d.deleteIcon:void 0,isEnabled:()=>!0,isVisible:()=>!0})}},{id:"@fails-components/jupyter-applet-view:toolbar",description:"Add the applet view toolbar during editing.",autoStart:!0,activate:async(e,t)=>{e.docRegistry.addWidgetExtension("Notebook",new h(e.commands,t,void 0))},optional:[A.IFailsLauncherInfo]}]}}]);