(function(){"use strict";const Et="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";var ie=(t=>(t[t.NUMBER=0]="NUMBER",t[t.STRING=1]="STRING",t[t.BOOLEAN=2]="BOOLEAN",t[t.DATE=3]="DATE",t[t.LOOKUP=4]="LOOKUP",t[t.UNKNOWN=5]="UNKNOWN",t))(ie||{});function Cr(){return this._source.cancel()}function vt(t){return/^[nf]$/i.test(t)?!1:/^[yt]$/i.test(t)?!0:null}function Ct(t){return new Date(+t.substring(0,4),t.substring(4,6)-1,+t.substring(6,8))}function ye(t){return!(t=t.trim())||isNaN(t=+t)?null:t}function wt(t){return t.trim()||null}var wr={B:ye,C:wt,D:Ct,F:ye,L:vt,M:ye,N:ye};function Sr(){var t=this,e=1;return t._source.slice(t._recordLength).then(function(r){return r&&r[0]!==26?{done:!1,value:t._fields.reduce(function(n,s){return n[s.name]=wr[s.type](t._decode(r.subarray(e,e+=s.length))),n},{})}:{done:!0,value:void 0}})}var St={B:ye,C:wt,D:Ct,F:ye,L:vt,M:ye,N:ye};const xr={B:ie.NUMBER,C:ie.STRING,D:ie.DATE,F:ie.NUMBER,L:ie.BOOLEAN,M:ie.NUMBER,N:ie.NUMBER};function $r(t,e){const r=new Uint8Array(t),n=new DataView(t.slice(0,32)),s=n.getUint16(8,!0),i=new DataView(t.slice(32,s)),o=new xt(r,e,n,i),a={},u=Math.round((r.byteLength-s-1)/o._recordLength);o._fields.length;for(const g of o._fields){const d=xr[g.type],R={values:St[g.type]===ye?new Float32Array(u):[],name:g.name,type:d};a[g.name]=R}let l=0;const h=r.byteLength;try{for(;;){const g=s+l*o._recordLength;if(g+o._recordLength>h)break;const d=r.slice(g,g+o._recordLength);if(d&&d[0]!==26){let b=1;o._fields.reduce(function(R,v){const P=St[v.type](o._decode(d.slice(b,b+v.length)));a[v.name].values[l]=P,b=b+v.length},{})}else break;l++}}catch(g){console.warn(g)}return console.log("dbf total records",l),a}function xt(t,e,r,n){this._source=t,this._decode=e.decode.bind(e),this._recordLength=r.getUint16(10,!0),this._fields=[];for(var s=0;n.getUint8(s)!==13;s+=32){for(var i=0;i<11&&n.getUint8(s+i)!==0;++i);this._fields.push({name:this._decode(new Uint8Array(n.buffer,n.byteOffset+s,i)),type:String.fromCharCode(n.getUint8(s+11)),length:n.getUint8(s+16)})}}var $t=xt.prototype;$t.read=Sr,$t.cancel=Cr;var Nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Or(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Nt={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,n){t.exports=n()})(Nr,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,i=s&&/blob:/i.test((n.location||{}).protocol),o={},a=0,u={},l=[];if(u.parse=function(p,f){var c=(f=f||{}).dynamicTyping||!1;if(x(c)&&(f.dynamicTypingFunction=c,c={}),f.dynamicTyping=c,f.transform=!!x(f.transform)&&f.transform,f.worker&&u.WORKERS_SUPPORTED){var w=function(){if(!u.WORKERS_SUPPORTED)return!1;var H=(A=n.URL||n.webkitURL||null,M=r.toString(),u.BLOB_URL||(u.BLOB_URL=A.createObjectURL(new Blob(["(",M,")();"],{type:"text/javascript"})))),m=new n.Worker(H),A,M;return m.onmessage=z,m.id=a++,o[m.id]=m}();return w.userStep=f.step,w.userChunk=f.chunk,w.userComplete=f.complete,w.userError=f.error,f.step=x(f.step),f.chunk=x(f.chunk),f.complete=x(f.complete),f.error=x(f.error),delete f.worker,void w.postMessage({input:p,config:f,workerId:w.id})}var C=null;return u.NODE_STREAM_INPUT,typeof p=="string"?C=f.download?new d(f):new R(f):p.readable===!0&&x(p.read)&&x(p.on)?C=new v(f):(n.File&&p instanceof File||p instanceof Object)&&(C=new b(f)),C.stream(p)},u.unparse=function(p,f){var c=!1,w=!0,C=",",H=`\r
`,m='"',A=m+m,M=!1,_=null,U=!1;(function(){if(typeof f=="object"){if(typeof f.delimiter!="string"||u.BAD_DELIMITERS.filter(function(N){return f.delimiter.indexOf(N)!==-1}).length||(C=f.delimiter),(typeof f.quotes=="boolean"||typeof f.quotes=="function"||Array.isArray(f.quotes))&&(c=f.quotes),typeof f.skipEmptyLines!="boolean"&&typeof f.skipEmptyLines!="string"||(M=f.skipEmptyLines),typeof f.newline=="string"&&(H=f.newline),typeof f.quoteChar=="string"&&(m=f.quoteChar),typeof f.header=="boolean"&&(w=f.header),Array.isArray(f.columns)){if(f.columns.length===0)throw new Error("Option columns is empty");_=f.columns}f.escapeChar!==void 0&&(A=f.escapeChar+m),(typeof f.escapeFormulae=="boolean"||f.escapeFormulae instanceof RegExp)&&(U=f.escapeFormulae instanceof RegExp?f.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var T=new RegExp(B(m),"g");if(typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(p)){if(!p.length||Array.isArray(p[0]))return X(null,p,M);if(typeof p[0]=="object")return X(_||Object.keys(p[0]),p,M)}else if(typeof p=="object")return typeof p.data=="string"&&(p.data=JSON.parse(p.data)),Array.isArray(p.data)&&(p.fields||(p.fields=p.meta&&p.meta.fields||_),p.fields||(p.fields=Array.isArray(p.data[0])?p.fields:typeof p.data[0]=="object"?Object.keys(p.data[0]):[]),Array.isArray(p.data[0])||typeof p.data[0]=="object"||(p.data=[p.data])),X(p.fields||[],p.data||[],M);throw new Error("Unable to serialize unrecognized input");function X(N,G,q){var O="";typeof N=="string"&&(N=JSON.parse(N)),typeof G=="string"&&(G=JSON.parse(G));var j=Array.isArray(N)&&0<N.length,ee=!Array.isArray(G[0]);if(j&&w){for(var E=0;E<N.length;E++)0<E&&(O+=C),O+=Y(N[E],E);0<G.length&&(O+=H)}for(var S=0;S<G.length;S++){var y=j?N.length:G[S].length,$=!1,F=j?Object.keys(G[S]).length===0:G[S].length===0;if(q&&!j&&($=q==="greedy"?G[S].join("").trim()==="":G[S].length===1&&G[S][0].length===0),q==="greedy"&&j){for(var L=[],k=0;k<y;k++){var K=ee?N[k]:k;L.push(G[S][K])}$=L.join("").trim()===""}if(!$){for(var I=0;I<y;I++){0<I&&!F&&(O+=C);var ve=j&&ee?N[I]:I;O+=Y(G[S][ve],I)}S<G.length-1&&(!q||0<y&&!F)&&(O+=H)}}return O}function Y(N,G){if(N==null)return"";if(N.constructor===Date)return JSON.stringify(N).slice(1,25);var q=!1;U&&typeof N=="string"&&U.test(N)&&(N="'"+N,q=!0);var O=N.toString().replace(T,A);return(q=q||c===!0||typeof c=="function"&&c(N,G)||Array.isArray(c)&&c[G]||function(j,ee){for(var E=0;E<ee.length;E++)if(-1<j.indexOf(ee[E]))return!0;return!1}(O,u.BAD_DELIMITERS)||-1<O.indexOf(C)||O.charAt(0)===" "||O.charAt(O.length-1)===" ")?m+O+m:O}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=J,u.ParserHandle=P,u.NetworkStreamer=d,u.FileStreamer=b,u.StringStreamer=R,u.ReadableStreamStreamer=v,n.jQuery){var h=n.jQuery;h.fn.parse=function(p){var f=p.config||{},c=[];return this.each(function(H){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var m=0;m<this.files.length;m++)c.push({file:this.files[m],inputElem:this,instanceConfig:h.extend({},f)})}),w(),this;function w(){if(c.length!==0){var H,m,A,M,_=c[0];if(x(p.before)){var U=p.before(_.file,_.inputElem);if(typeof U=="object"){if(U.action==="abort")return H="AbortError",m=_.file,A=_.inputElem,M=U.reason,void(x(p.error)&&p.error({name:H},m,A,M));if(U.action==="skip")return void C();typeof U.config=="object"&&(_.instanceConfig=h.extend(_.instanceConfig,U.config))}else if(U==="skip")return void C()}var T=_.instanceConfig.complete;_.instanceConfig.complete=function(X){x(T)&&T(X,_.file,_.inputElem),C()},u.parse(_.file,_.instanceConfig)}else x(p.complete)&&p.complete()}function C(){c.splice(0,1),w()}}}function g(p){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],comments:[],meta:{}},function(f){var c=ce(f);c.chunkSize=parseInt(c.chunkSize),f.step||f.chunk||(c.chunkSize=null),this._handle=new P(c),(this._handle.streamer=this)._config=c}.call(this,p),this.parseChunk=function(f,c){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var w=this._config.beforeFirstChunk(f);w!==void 0&&(f=w)}this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+f;this._partialLine="";var H=this._handle.parse(C,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var m=H.meta.cursor;this._finished||(this._partialLine=C.substring(m-this._baseIndex),this._baseIndex=m),H&&H.data&&(this._rowCount+=H.data.length);var A=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)n.postMessage({results:H,workerId:u.WORKER_ID,finished:A});else if(x(this._config.chunk)&&!c){if(this._config.chunk(H,this._handle),l=[],this._handle.paused()||this._handle.aborted())return void(this._halted=!0);H=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(H.data),this._completeResults.errors=this._completeResults.errors.concat(H.errors),this._completeResults.comments=this._completeResults.comments.concat(H.comments),this._completeResults.meta=H.meta),this._completed||!A||!x(this._config.complete)||H&&H.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||H&&H.meta.paused||this._nextChunk(),H}this._halted=!0},this._sendError=function(f){x(this._config.error)?this._config.error(f):i&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:f,finished:!1})}}function d(p){var f;(p=p||{}).chunkSize||(p.chunkSize=u.RemoteChunkSize),g.call(this,p),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(f=new XMLHttpRequest,this._config.withCredentials&&(f.withCredentials=this._config.withCredentials),s||(f.onload=W(this._chunkLoaded,this),f.onerror=W(this._chunkError,this)),f.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var c=this._config.downloadRequestHeaders;for(var w in c)f.setRequestHeader(w,c[w])}if(this._config.chunkSize){var C=this._start+this._config.chunkSize-1;f.setRequestHeader("Range","bytes="+this._start+"-"+C)}try{f.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}s&&f.status===0&&this._chunkError()}},this._chunkLoaded=function(){var c;f.readyState===4&&(f.status<200||400<=f.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:f.responseText.length,this._finished=!this._config.chunkSize||this._start>=((c=f.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1),this.parseChunk(f.responseText)))},this._chunkError=function(c){var w=f.statusText||c;this._sendError(new Error(w))}}function b(p){var f,c;(p=p||{}).chunkSize||(p.chunkSize=u.LocalChunkSize),g.call(this,p);var w=typeof FileReader<"u";this.stream=function(C){this._input=C,c=C.slice||C.webkitSlice||C.mozSlice,w?((f=new FileReader).onload=W(this._chunkLoaded,this),f.onerror=W(this._chunkError,this)):f=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var C=this._input;if(this._config.chunkSize){var H=Math.min(this._start+this._config.chunkSize,this._input.size);C=c.call(C,this._start,H)}var m=f.readAsText(C,this._config.encoding);w||this._chunkLoaded({target:{result:m}})},this._chunkLoaded=function(C){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(C.target.result)},this._chunkError=function(){this._sendError(f.error)}}function R(p){var f;g.call(this,p=p||{}),this.stream=function(c){return f=c,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var c,w=this._config.chunkSize;return f=w?(c=f.substring(0,w),f.substring(w)):(c=f,""),this._finished=!f,this.parseChunk(c)}}}function v(p){g.call(this,p=p||{});var f=[],c=!0,w=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(C){this._input=C,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&f.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),f.length?this.parseChunk(f.shift()):c=!0},this._streamData=W(function(C){try{f.push(typeof C=="string"?C:C.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(f.shift()))}catch(H){this._streamError(H)}},this),this._streamError=W(function(C){this._streamCleanUp(),this._sendError(C)},this),this._streamEnd=W(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function P(p){var f,c,w,C=Math.pow(2,53),H=-C,m=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,M=this,_=0,U=0,T=!1,X=!1,Y=[],N={data:[],errors:[],comments:[],meta:{}};if(x(p.step)){var G=p.step;p.step=function(S){if(N=S,j())O();else{if(O(),N.data.length===0)return;_+=S.data.length,p.preview&&_>p.preview?c.abort():(N.data=N.data[0],G(N,M))}}}function q(S){return p.skipEmptyLines==="greedy"?S.join("").trim()==="":S.length===1&&S[0].length===0}function O(){return N&&w&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),w=!1),p.skipEmptyLines&&(N.data=N.data.filter(function(S){return!q(S)})),j()&&function(){if(!N)return;function S($,F){x(p.transformHeader)&&($=p.transformHeader($,F)),Y.push($)}if(Array.isArray(N.data[0])){for(var y=0;j()&&y<N.data.length;y++)N.data[y].forEach(S);N.data.splice(0,1)}else N.data.forEach(S)}(),function(){if(!N||!p.header&&!p.dynamicTyping&&!p.transform)return N;function S($,F){var L,k=p.header?{}:[];for(L=0;L<$.length;L++){var K=L,I=$[L];p.header&&(K=L>=Y.length?"__parsed_extra":Y[L]),p.transform&&(I=p.transform(I,K)),I=ee(K,I),K==="__parsed_extra"?(k[K]=k[K]||[],k[K].push(I)):k[K]=I}return p.header&&(L>Y.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+Y.length+" fields but parsed "+L,U+F):L<Y.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+Y.length+" fields but parsed "+L,U+F)),k}var y=1;return!N.data.length||Array.isArray(N.data[0])?(N.data=N.data.map(S),y=N.data.length):N.data=S(N.data,0),p.header&&N.meta&&(N.meta.fields=Y),U+=y,N}()}function j(){return p.header&&Y.length===0}function ee(S,y){return $=S,p.dynamicTypingFunction&&p.dynamicTyping[$]===void 0&&(p.dynamicTyping[$]=p.dynamicTypingFunction($)),(p.dynamicTyping[$]||p.dynamicTyping)===!0?y==="true"||y==="TRUE"||y!=="false"&&y!=="FALSE"&&(y.startsWith('"')?y.slice(1):function(F){if(m.test(F)){var L=parseFloat(F);if(H<L&&L<C)return!0}return!1}(y)?parseFloat(y):A.test(y)?new Date(y):y===""?null:y):y;var $}function E(S,y,$,F){var L={type:S,code:y,message:$};F!==void 0&&(L.row=F),N.errors.push(L)}this.parse=function(S,y,$){var F=p.quoteChar||'"';if(p.newline||(p.newline=function(K,I){K=K.substring(0,1048576);var ve=new RegExp(B(I)+"([^]*?)"+B(I),"gm"),pe=(K=K.replace(ve,"")).split("\r"),fe=K.split(`
`),Ce=1<fe.length&&fe[0].length<pe[0].length;if(pe.length===1||Ce)return`
`;for(var Ae=0,he=0;he<pe.length;he++)pe[he][0]===`
`&&Ae++;return Ae>=pe.length/2?`\r
`:"\r"}(S,F)),w=!1,p.delimiter)x(p.delimiter)&&(p.delimiter=p.delimiter(S),N.meta.delimiter=p.delimiter);else{var L=function(K,I,ve,pe,fe){var Ce,Ae,he,re;fe=fe||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var we=0;we<fe.length;we++){var se=fe[we],Se=0,Re=0,vr=0;he=void 0;for(var Ue=new J({comments:pe,delimiter:se,newline:I,preview:10}).parse(K),je=0;je<Ue.data.length;je++)if(ve&&q(Ue.data[je]))vr++;else{var Ge=Ue.data[je].length;Re+=Ge,he!==void 0?0<Ge&&(Se+=Math.abs(Ge-he),he=Ge):he=Ge}0<Ue.data.length&&(Re/=Ue.data.length-vr),(Ae===void 0||Se<=Ae)&&(re===void 0||re<Re)&&1.99<Re&&(Ae=Se,Ce=se,re=Re)}return{successful:!!(p.delimiter=Ce),bestDelimiter:Ce}}(S,p.newline,p.skipEmptyLines,p.comments,p.delimitersToGuess);L.successful?p.delimiter=L.bestDelimiter:(w=!0,p.delimiter=u.DefaultDelimiter),N.meta.delimiter=p.delimiter}var k=ce(p);return p.preview&&p.header&&k.preview++,f=S,c=new J(k),N=c.parse(f,y,$),O(),T?{meta:{paused:!0}}:N||{meta:{paused:!1}}},this.paused=function(){return T},this.pause=function(){T=!0,c.abort(),f=x(p.chunk)?"":f.substring(c.getCharIndex())},this.resume=function(){M.streamer._halted?(T=!1,M.streamer.parseChunk(f,!0)):setTimeout(M.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,c.abort(),N.meta.aborted=!0,x(p.complete)&&p.complete(N),f=""}}function B(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function J(p){var f,c=(p=p||{}).delimiter,w=p.newline,C=p.comments,H=p.step,m=p.preview,A=p.fastMode,M=f=p.quoteChar===void 0||p.quoteChar===null?'"':p.quoteChar;if(p.escapeChar!==void 0&&(M=p.escapeChar),(typeof c!="string"||-1<u.BAD_DELIMITERS.indexOf(c))&&(c=","),C===c)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<u.BAD_DELIMITERS.indexOf(C))&&(C=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var _=0,U=!1;this.parse=function(T,X,Y){if(typeof T!="string")throw new Error("Input must be a string");var N=T.length,G=c.length,q=w.length,O=C.length,j=x(H),ee=[],E=[],S=[],y=_=0;if(!T)return re();if(A||A!==!1&&T.indexOf(f)===-1){for(var $=T.split(w),F=0;F<$.length;F++){if(S=$[F],_+=S.length,F!==$.length-1)_+=w.length;else if(Y)return re();if(C&&S.substring(0,O)===C)l.push(S);else{if(j){if(ee=[],fe(S.split(c)),we(),U)return re()}else fe(S.split(c));if(m&&m<=F)return ee=ee.slice(0,m),re(!0)}}return re()}for(var L=T.indexOf(c,_),k=T.indexOf(w,_),K=new RegExp(B(M)+B(f),"g"),I=T.indexOf(f,_);;)if(T[_]!==f)if(C&&S.length===0&&T.substring(_,_+O)===C){if(k===-1)return re();_=k+q,k=T.indexOf(w,_),L=T.indexOf(c,_)}else if(L!==-1&&(L<k||k===-1))S.push(T.substring(_,L)),_=L+G,L=T.indexOf(c,_);else{if(k===-1)break;if(S.push(T.substring(_,k)),he(k+q),j&&(we(),U))return re();if(m&&ee.length>=m)return re(!0)}else for(I=_,_++;;){if((I=T.indexOf(f,I+1))===-1)return Y||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ee.length,index:_}),Ae();if(I===N-1)return Ae(T.substring(_,I).replace(K,f));if(f!==M||T[I+1]!==M){if(f===M||I===0||T[I-1]!==M){L!==-1&&L<I+1&&(L=T.indexOf(c,I+1)),k!==-1&&k<I+1&&(k=T.indexOf(w,I+1));var ve=Ce(k===-1?L:Math.min(L,k));if(T.substr(I+1+ve,G)===c){S.push(T.substring(_-1,I).replace(K,f)),T[_=I+1+ve+G]!==f&&(I=T.indexOf(f,_)),L=T.indexOf(c,_),k=T.indexOf(w,_);break}var pe=Ce(k);if(T.substring(I+1+pe,I+1+pe+q)===w){if(S.push(T.substring(_-1,I).replace(K,f)),he(I+1+pe+q),L=T.indexOf(c,_),I=T.indexOf(f,_),j&&(we(),U))return re();if(m&&ee.length>=m)return re(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ee.length,index:_}),I++}}else I++}return Ae();function fe(se){ee.push(se),y=_}function Ce(se){var Se=0;if(se!==-1){var Re=T.substring(I+1,se);Re&&Re.trim()===""&&(Se=Re.length)}return Se}function Ae(se){return Y||(se===void 0&&(se=T.substring(_)),S.push(se),_=N,fe(S),j&&we()),re()}function he(se){_=se,fe(S),S=[],k=T.indexOf(w,_)}function re(se){var Se=JSON.parse(JSON.stringify(l));return{data:ee,errors:E,comments:Se,meta:{delimiter:c,linebreak:w,aborted:U,truncated:!!se,cursor:y+(X||0)}}}function we(){H(re()),ee=[],E=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return _}}function z(p){var f=p.data,c=o[f.workerId],w=!1;if(f.error)c.userError(f.error,f.file);else if(f.results&&f.results.data){var C={abort:function(){w=!0,le(f.workerId,{data:[],comments:[],errors:[],meta:{aborted:!0}})},pause:te,resume:te};if(x(c.userStep)){for(var H=0;H<f.results.data.length&&(c.userStep({data:f.results.data[H],errors:f.results.errors,comments:f.results.comments,meta:f.results.meta},C),!w);H++);delete f.results}else x(c.userChunk)&&(c.userChunk(f.results,C,f.file),delete f.results)}f.finished&&!w&&le(f.workerId,f.results)}function le(p,f){var c=o[p];x(c.userComplete)&&c.userComplete(f),c.terminate(),delete o[p]}function te(){throw new Error("Not implemented.")}function ce(p){if(typeof p!="object"||p===null)return p;var f=Array.isArray(p)?[]:{};for(var c in p)f[c]=ce(p[c]);return f}function W(p,f){return function(){p.apply(f,arguments)}}function x(p){return typeof p=="function"}return i&&(n.onmessage=function(p){var f=p.data;if(u.WORKER_ID===void 0&&f&&(u.WORKER_ID=f.workerId),typeof f.input=="string")n.postMessage({workerId:u.WORKER_ID,results:u.parse(f.input,f.config),finished:!0});else if(n.File&&f.input instanceof File||f.input instanceof Object){var c=u.parse(f.input,f.config);c&&n.postMessage({workerId:u.WORKER_ID,results:c,finished:!0})}}),(d.prototype=Object.create(g.prototype)).constructor=d,(b.prototype=Object.create(g.prototype)).constructor=b,(R.prototype=Object.create(R.prototype)).constructor=R,(v.prototype=Object.create(g.prototype)).constructor=v,u})})(Nt);var Tr=Nt.exports,Lr=Ze(Tr),Hr={},kr=Object.freeze({__proto__:null,default:Hr}),Ot=Or(kr),ze={};(function(t){t.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1,t.find=(e,r)=>e.nodes.find(n=>n.type===r),t.exceedsLimit=(e,r,n=1,s)=>s===!1||!t.isInteger(e)||!t.isInteger(r)?!1:(Number(r)-Number(e))/Number(n)>=s,t.escapeNode=(e,r=0,n)=>{const s=e.nodes[r];s&&(n&&s.type===n||s.type==="open"||s.type==="close")&&s.escaped!==!0&&(s.value="\\"+s.value,s.escaped=!0)},t.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0),t.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1,t.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0,t.reduce=e=>e.reduce((r,n)=>(n.type==="text"&&r.push(n.value),n.type==="range"&&(n.type="text"),r),[]),t.flatten=(...e)=>{const r=[],n=s=>{for(let i=0;i<s.length;i++){const o=s[i];if(Array.isArray(o)){n(o);continue}o!==void 0&&r.push(o)}return r};return n(e),r}})(ze);const Tt=ze;var Ve=(t,e={})=>{const r=(n,s={})=>{const i=e.escapeInvalid&&Tt.isInvalidBrace(s),o=n.invalid===!0&&e.escapeInvalid===!0;let a="";if(n.value)return(i||o)&&Tt.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(const u of n.nodes)a+=r(u);return a};return r(t)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Ir=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1};/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const Lt=Ir,xe=(t,e,r)=>{if(Lt(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(Lt(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let s=String(n.relaxZeros),i=String(n.shorthand),o=String(n.capture),a=String(n.wrap),u=t+":"+e+"="+s+i+o+a;if(xe.cache.hasOwnProperty(u))return xe.cache[u].result;let l=Math.min(t,e),h=Math.max(t,e);if(Math.abs(l-h)===1){let v=t+"|"+e;return n.capture?`(${v})`:n.wrap===!1?v:`(?:${v})`}let g=Mt(t)||Mt(e),d={min:t,max:e,a:l,b:h},b=[],R=[];if(g&&(d.isPadded=g,d.maxLen=String(d.max).length),l<0){let v=h<0?Math.abs(h):1;R=Ht(v,Math.abs(l),d,n),l=d.a=0}return h>=0&&(b=Ht(l,h,d,n)),d.negatives=R,d.positives=b,d.result=Fr(R,b),n.capture===!0?d.result=`(${d.result})`:n.wrap!==!1&&b.length+R.length>1&&(d.result=`(?:${d.result})`),xe.cache[u]=d,d.result};function Fr(t,e,r){let n=Ye(t,e,"-",!1)||[],s=Ye(e,t,"",!1)||[],i=Ye(t,e,"-?",!0)||[];return n.concat(i).concat(s).join("|")}function Pr(t,e){let r=1,n=1,s=It(t,r),i=new Set([e]);for(;t<=s&&s<=e;)i.add(s),r+=1,s=It(t,r);for(s=Ft(e+1,n)-1;t<s&&s<=e;)i.add(s),n+=1,s=Ft(e+1,n)-1;return i=[...i],i.sort(Ur),i}function Mr(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=Br(t,e),s=n.length,i="",o=0;for(let a=0;a<s;a++){let[u,l]=n[a];u===l?i+=u:u!=="0"||l!=="9"?i+=Gr(u,l):o++}return o&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[o],digits:s}}function Ht(t,e,r,n){let s=Pr(t,e),i=[],o=t,a;for(let u=0;u<s.length;u++){let l=s[u],h=Mr(String(o),String(l),n),g="";if(!r.isPadded&&a&&a.pattern===h.pattern){a.count.length>1&&a.count.pop(),a.count.push(h.count[0]),a.string=a.pattern+Pt(a.count),o=l+1;continue}r.isPadded&&(g=zr(l,r,n)),h.string=g+h.pattern+Pt(h.count),i.push(h),o=l+1,a=h}return i}function Ye(t,e,r,n,s){let i=[];for(let o of t){let{string:a}=o;!n&&!kt(e,"string",a)&&i.push(r+a),n&&kt(e,"string",a)&&i.push(r+a)}return i}function Br(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function Ur(t,e){return t>e?1:e>t?-1:0}function kt(t,e,r){return t.some(n=>n[e]===r)}function It(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function Ft(t,e){return t-t%Math.pow(10,e)}function Pt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function Gr(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function Mt(t){return/^-?(0+)\d/.test(t)}function zr(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),s=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return s?"0?":"0";case 2:return s?"0{0,2}":"00";default:return s?`0{0,${n}}`:`0{${n}}`}}xe.cache={},xe.clearCache=()=>xe.cache={};var Kr=xe;/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const Dr=Ot,Bt=Kr,Ut=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),Wr=t=>e=>t===!0?Number(e):String(e),Je=t=>typeof t=="number"||typeof t=="string"&&t!=="",He=t=>Number.isInteger(+t),et=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},Xr=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,qr=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},Ke=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Qr=(t,e,r)=>{t.negatives.sort((a,u)=>a<u?-1:a>u?1:0),t.positives.sort((a,u)=>a<u?-1:a>u?1:0);let n=e.capture?"":"?:",s="",i="",o;return t.positives.length&&(s=t.positives.map(a=>Ke(String(a),r)).join("|")),t.negatives.length&&(i=`-(${n}${t.negatives.map(a=>Ke(String(a),r)).join("|")})`),s&&i?o=`${s}|${i}`:o=s||i,e.wrap?`(${n}${o})`:o},Gt=(t,e,r,n)=>{if(r)return Bt(t,e,{wrap:!1,...n});let s=String.fromCharCode(t);if(t===e)return s;let i=String.fromCharCode(e);return`[${s}-${i}]`},zt=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,s=r.capture?"":"?:";return n?`(${s}${t.join("|")})`:t.join("|")}return Bt(t,e,r)},Kt=(...t)=>new RangeError("Invalid range arguments: "+Dr.inspect(...t)),Dt=(t,e,r)=>{if(r.strictRanges===!0)throw Kt([t,e]);return[]},jr=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},Zr=(t,e,r=1,n={})=>{let s=Number(t),i=Number(e);if(!Number.isInteger(s)||!Number.isInteger(i)){if(n.strictRanges===!0)throw Kt([t,e]);return[]}s===0&&(s=0),i===0&&(i=0);let o=s>i,a=String(t),u=String(e),l=String(r);r=Math.max(Math.abs(r),1);let h=et(a)||et(u)||et(l),g=h?Math.max(a.length,u.length,l.length):0,d=h===!1&&Xr(t,e,n)===!1,b=n.transform||Wr(d);if(n.toRegex&&r===1)return Gt(Ke(t,g),Ke(e,g),!0,n);let R={negatives:[],positives:[]},v=J=>R[J<0?"negatives":"positives"].push(Math.abs(J)),P=[],B=0;for(;o?s>=i:s<=i;)n.toRegex===!0&&r>1?v(s):P.push(qr(b(s,B),g,d)),s=o?s-r:s+r,B++;return n.toRegex===!0?r>1?Qr(R,n,g):zt(P,null,{wrap:!1,...n}):P},Vr=(t,e,r=1,n={})=>{if(!He(t)&&t.length>1||!He(e)&&e.length>1)return Dt(t,e,n);let s=n.transform||(d=>String.fromCharCode(d)),i=`${t}`.charCodeAt(0),o=`${e}`.charCodeAt(0),a=i>o,u=Math.min(i,o),l=Math.max(i,o);if(n.toRegex&&r===1)return Gt(u,l,!1,n);let h=[],g=0;for(;a?i>=o:i<=o;)h.push(s(i,g)),i=a?i-r:i+r,g++;return n.toRegex===!0?zt(h,null,{wrap:!1,options:n}):h},De=(t,e,r,n={})=>{if(e==null&&Je(t))return[t];if(!Je(t)||!Je(e))return Dt(t,e,n);if(typeof r=="function")return De(t,e,1,{transform:r});if(Ut(r))return De(t,e,0,r);let s={...n};return s.capture===!0&&(s.wrap=!0),r=r||s.step||1,He(r)?He(t)&&He(e)?Zr(t,e,r,s):Vr(t,e,Math.max(Math.abs(r),1),s):r!=null&&!Ut(r)?jr(r,s):De(t,e,1,r)};var Wt=De;const Yr=Wt,Xt=ze;var Jr=(t,e={})=>{const r=(n,s={})=>{const i=Xt.isInvalidBrace(s),o=n.invalid===!0&&e.escapeInvalid===!0,a=i===!0||o===!0,u=e.escapeInvalid===!0?"\\":"";let l="";if(n.isOpen===!0)return u+n.value;if(n.isClose===!0)return console.log("node.isClose",u,n.value),u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){const h=Xt.reduce(n.nodes),g=Yr(...h,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(g.length!==0)return h.length>1&&g.length>1?`(${g})`:g}if(n.nodes)for(const h of n.nodes)l+=r(h,n);return l};return r(t)};const en=Wt,qt=Ve,Oe=ze,$e=(t="",e="",r=!1)=>{const n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Oe.flatten(e).map(s=>`{${s}}`):e;for(const s of t)if(Array.isArray(s))for(const i of s)n.push($e(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),n.push(Array.isArray(i)?$e(s,i,r):s+i);return Oe.flatten(n)};var tn=(t,e={})=>{const r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(s,i={})=>{s.queue=[];let o=i,a=i.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(s.invalid||s.dollar){a.push($e(a.pop(),qt(s,e)));return}if(s.type==="brace"&&s.invalid!==!0&&s.nodes.length===2){a.push($e(a.pop(),["{}"]));return}if(s.nodes&&s.ranges>0){const g=Oe.reduce(s.nodes);if(Oe.exceedsLimit(...g,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let d=en(...g,e);d.length===0&&(d=qt(s,e)),a.push($e(a.pop(),d)),s.nodes=[];return}const u=Oe.encloseBrace(s);let l=s.queue,h=s;for(;h.type!=="brace"&&h.type!=="root"&&h.parent;)h=h.parent,l=h.queue;for(let g=0;g<s.nodes.length;g++){const d=s.nodes[g];if(d.type==="comma"&&s.type==="brace"){g===1&&l.push(""),l.push("");continue}if(d.type==="close"){a.push($e(a.pop(),l,u));continue}if(d.value&&d.type!=="open"){l.push($e(l.pop(),d.value));continue}d.nodes&&n(d,s)}return l};return Oe.flatten(n(t))},rn={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"Â ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const nn=Ve,{MAX_LENGTH:Qt,CHAR_BACKSLASH:tt,CHAR_BACKTICK:sn,CHAR_COMMA:on,CHAR_DOT:an,CHAR_LEFT_PARENTHESES:un,CHAR_RIGHT_PARENTHESES:ln,CHAR_LEFT_CURLY_BRACE:cn,CHAR_RIGHT_CURLY_BRACE:fn,CHAR_LEFT_SQUARE_BRACKET:jt,CHAR_RIGHT_SQUARE_BRACKET:Zt,CHAR_DOUBLE_QUOTE:hn,CHAR_SINGLE_QUOTE:pn,CHAR_NO_BREAK_SPACE:dn,CHAR_ZERO_WIDTH_NOBREAK_SPACE:gn}=rn;var mn=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");const r=e||{},n=typeof r.maxLength=="number"?Math.min(Qt,r.maxLength):Qt;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);const s={type:"root",input:t,nodes:[]},i=[s];let o=s,a=s,u=0;const l=t.length;let h=0,g=0,d;const b=()=>t[h++],R=v=>{if(v.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&v.type==="text"){a.value+=v.value;return}return o.nodes.push(v),v.parent=o,v.prev=a,a=v,v};for(R({type:"bos"});h<l;)if(o=i[i.length-1],d=b(),!(d===gn||d===dn)){if(d===tt){R({type:"text",value:(e.keepEscaping?d:"")+b()});continue}if(d===Zt){R({type:"text",value:"\\"+d});continue}if(d===jt){u++;let v;for(;h<l&&(v=b());){if(d+=v,v===jt){u++;continue}if(v===tt){d+=b();continue}if(v===Zt&&(u--,u===0))break}R({type:"text",value:d});continue}if(d===un){o=R({type:"paren",nodes:[]}),i.push(o),R({type:"text",value:d});continue}if(d===ln){if(o.type!=="paren"){R({type:"text",value:d});continue}o=i.pop(),R({type:"text",value:d}),o=i[i.length-1];continue}if(d===hn||d===pn||d===sn){const v=d;let P;for(e.keepQuotes!==!0&&(d="");h<l&&(P=b());){if(P===tt){d+=P+b();continue}if(P===v){e.keepQuotes===!0&&(d+=P);break}d+=P}R({type:"text",value:d});continue}if(d===cn){g++;const P={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:g,commas:0,ranges:0,nodes:[]};o=R(P),i.push(o),R({type:"open",value:d});continue}if(d===fn){if(o.type!=="brace"){R({type:"text",value:d});continue}const v="close";o=i.pop(),o.close=!0,R({type:v,value:d}),g--,o=i[i.length-1];continue}if(d===on&&g>0){if(o.ranges>0){o.ranges=0;const v=o.nodes.shift();o.nodes=[v,{type:"text",value:nn(o)}]}R({type:"comma",value:d}),o.commas++;continue}if(d===an&&g>0&&o.commas===0){const v=o.nodes;if(g===0||v.length===0){R({type:"text",value:d});continue}if(a.type==="dot"){if(o.range=[],a.value+=d,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){v.pop();const P=v[v.length-1];P.value+=a.value+d,a=P,o.ranges--;continue}R({type:"dot",value:d});continue}R({type:"text",value:d})}do if(o=i.pop(),o.type!=="root"){o.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});const v=i[i.length-1],P=v.nodes.indexOf(o);v.nodes.splice(P,1,...o.nodes)}while(i.length>0);return R({type:"eos"}),s};const Vt=Ve,An=Jr,yn=tn,_n=mn,oe=(t,e={})=>{let r=[];if(Array.isArray(t))for(const n of t){const s=oe.create(n,e);Array.isArray(s)?r.push(...s):r.push(s)}else r=[].concat(oe.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};oe.parse=(t,e={})=>_n(t,e),oe.stringify=(t,e={})=>Vt(typeof t=="string"?oe.parse(t,e):t,e),oe.compile=(t,e={})=>(typeof t=="string"&&(t=oe.parse(t,e)),An(t,e)),oe.expand=(t,e={})=>{typeof t=="string"&&(t=oe.parse(t,e));let r=yn(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r},oe.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?oe.compile(t,e):oe.expand(t,e);var bn=oe;function de(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Yt(t,e){for(var r="",n=0,s=-1,i=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}function Rn(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var Te={resolve:function(){for(var e="",r=!1,n,s=arguments.length-1;s>=-1&&!r;s--){var i;s>=0?i=arguments[s]:(n===void 0&&(n=process.cwd()),i=n),de(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Yt(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(de(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Yt(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return de(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];de(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":Te.normalize(e)},relative:function(e,r){if(de(e),de(r),e===r||(e=Te.resolve(e),r=Te.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var s=e.length,i=s-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var a=r.length,u=a-o,l=i<u?i:u,h=-1,g=0;g<=l;++g){if(g===l){if(u>l){if(r.charCodeAt(o+g)===47)return r.slice(o+g+1);if(g===0)return r.slice(o+g)}else i>l&&(e.charCodeAt(n+g)===47?h=g:g===0&&(h=0));break}var d=e.charCodeAt(n+g),b=r.charCodeAt(o+g);if(d!==b)break;d===47&&(h=g)}var R="";for(g=n+h+1;g<=s;++g)(g===s||e.charCodeAt(g)===47)&&(R.length===0?R+="..":R+="/..");return R.length>0?R+r.slice(o+h):(o+=h,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(de(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,s=-1,i=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!i){s=o;break}}else i=!1;return s===-1?n?"/":".":n&&s===1?"//":e.slice(0,s)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');de(e);var n=0,s=-1,i=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,u=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!i){n=o+1;break}}else u===-1&&(i=!1,u=o+1),a>=0&&(l===r.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=u))}return n===s?s=u:s===-1&&(s=e.length),e.slice(n,s)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){n=o+1;break}}else s===-1&&(i=!1,s=o+1);return s===-1?"":e.slice(n,s)}},extname:function(e){de(e);for(var r=-1,n=0,s=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!i){n=a+1;break}continue}s===-1&&(i=!1,s=a+1),u===46?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Rn("/",e)},parse:function(e){de(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),s=n===47,i;s?(r.root="/",i=1):i=0;for(var o=-1,a=0,u=-1,l=!0,h=e.length-1,g=0;h>=i;--h){if(n=e.charCodeAt(h),n===47){if(!l){a=h+1;break}continue}u===-1&&(l=!1,u=h+1),n===46?o===-1?o=h:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||u===-1||g===0||g===1&&o===u-1&&o===a+1?u!==-1&&(a===0&&s?r.base=r.name=e.slice(1,u):r.base=r.name=e.slice(a,u)):(a===0&&s?(r.name=e.slice(1,o),r.base=e.slice(1,u)):(r.name=e.slice(a,o),r.base=e.slice(a,u)),r.ext=e.slice(o,u)),a>0?r.dir=e.slice(0,a-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Te.posix=Te;var rt=Te,ke={};const En=rt,ge="\\\\/",Jt=`[^${ge}]`,_e="\\.",vn="\\+",Cn="\\?",We="\\/",wn="(?=.)",er="[^/]",nt=`(?:${We}|$)`,tr=`(?:^|${We})`,st=`${_e}{1,2}${nt}`,Sn=`(?!${_e})`,xn=`(?!${tr}${st})`,$n=`(?!${_e}{0,1}${nt})`,Nn=`(?!${st})`,On=`[^.${We}]`,Tn=`${er}*?`,rr={DOT_LITERAL:_e,PLUS_LITERAL:vn,QMARK_LITERAL:Cn,SLASH_LITERAL:We,ONE_CHAR:wn,QMARK:er,END_ANCHOR:nt,DOTS_SLASH:st,NO_DOT:Sn,NO_DOTS:xn,NO_DOT_SLASH:$n,NO_DOTS_SLASH:Nn,QMARK_NO_DOT:On,STAR:Tn,START_ANCHOR:tr},Ln={...rr,SLASH_LITERAL:`[${ge}]`,QMARK:Jt,STAR:`${Jt}*?`,DOTS_SLASH:`${_e}{1,2}(?:[${ge}]|$)`,NO_DOT:`(?!${_e})`,NO_DOTS:`(?!(?:^|[${ge}])${_e}{1,2}(?:[${ge}]|$))`,NO_DOT_SLASH:`(?!${_e}{0,1}(?:[${ge}]|$))`,NO_DOTS_SLASH:`(?!${_e}{1,2}(?:[${ge}]|$))`,QMARK_NO_DOT:`[^.${ge}]`,START_ANCHOR:`(?:^|[${ge}])`,END_ANCHOR:`(?:[${ge}]|$)`},Hn={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var Xe={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Hn,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:En.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Ln:rr}};(function(t){const e=rt,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:n,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:i}=Xe;t.isObject=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t.hasRegexChars=o=>s.test(o),t.isRegexChar=o=>o.length===1&&t.hasRegexChars(o),t.escapeRegex=o=>o.replace(i,"\\$1"),t.toPosixSlashes=o=>o.replace(r,"/"),t.removeBackslashes=o=>o.replace(n,a=>a==="\\"?"":a),t.supportsLookbehinds=()=>{const o=process.version.slice(1).split(".").map(Number);return o.length===3&&o[0]>=9||o[0]===8&&o[1]>=10},t.isWindows=o=>o&&typeof o.windows=="boolean"?o.windows:e.sep==="\\",t.escapeLast=(o,a,u)=>{const l=o.lastIndexOf(a,u);return l===-1?o:o[l-1]==="\\"?t.escapeLast(o,a,l-1):`${o.slice(0,l)}\\${o.slice(l)}`},t.removePrefix=(o,a={})=>{let u=o;return u.startsWith("./")&&(u=u.slice(2),a.prefix="./"),u},t.wrapOutput=(o,a={},u={})=>{const l=u.contains?"":"^",h=u.contains?"":"$";let g=`${l}(?:${o})${h}`;return a.negated===!0&&(g=`(?:^(?!${g}).*$)`),g}})(ke);const nr=ke,{CHAR_ASTERISK:it,CHAR_AT:kn,CHAR_BACKWARD_SLASH:Ie,CHAR_COMMA:In,CHAR_DOT:ot,CHAR_EXCLAMATION_MARK:at,CHAR_FORWARD_SLASH:sr,CHAR_LEFT_CURLY_BRACE:ut,CHAR_LEFT_PARENTHESES:lt,CHAR_LEFT_SQUARE_BRACKET:Fn,CHAR_PLUS:Pn,CHAR_QUESTION_MARK:ir,CHAR_RIGHT_CURLY_BRACE:Mn,CHAR_RIGHT_PARENTHESES:or,CHAR_RIGHT_SQUARE_BRACKET:Bn}=Xe,ar=t=>t===sr||t===Ie,ur=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)};var Un=(t,e)=>{const r=e||{},n=t.length-1,s=r.parts===!0||r.scanToEnd===!0,i=[],o=[],a=[];let u=t,l=-1,h=0,g=0,d=!1,b=!1,R=!1,v=!1,P=!1,B=!1,J=!1,z=!1,le=!1,te=!1,ce=0,W,x,p={value:"",depth:0,isGlob:!1};const f=()=>l>=n,c=()=>u.charCodeAt(l+1),w=()=>(W=x,u.charCodeAt(++l));for(;l<n;){x=w();let M;if(x===Ie){J=p.backslashes=!0,x=w(),x===ut&&(B=!0);continue}if(B===!0||x===ut){for(ce++;f()!==!0&&(x=w());){if(x===Ie){J=p.backslashes=!0,w();continue}if(x===ut){ce++;continue}if(B!==!0&&x===ot&&(x=w())===ot){if(d=p.isBrace=!0,R=p.isGlob=!0,te=!0,s===!0)continue;break}if(B!==!0&&x===In){if(d=p.isBrace=!0,R=p.isGlob=!0,te=!0,s===!0)continue;break}if(x===Mn&&(ce--,ce===0)){B=!1,d=p.isBrace=!0,te=!0;break}}if(s===!0)continue;break}if(x===sr){if(i.push(l),o.push(p),p={value:"",depth:0,isGlob:!1},te===!0)continue;if(W===ot&&l===h+1){h+=2;continue}g=l+1;continue}if(r.noext!==!0&&(x===Pn||x===kn||x===it||x===ir||x===at)===!0&&c()===lt){if(R=p.isGlob=!0,v=p.isExtglob=!0,te=!0,x===at&&l===h&&(le=!0),s===!0){for(;f()!==!0&&(x=w());){if(x===Ie){J=p.backslashes=!0,x=w();continue}if(x===or){R=p.isGlob=!0,te=!0;break}}continue}break}if(x===it){if(W===it&&(P=p.isGlobstar=!0),R=p.isGlob=!0,te=!0,s===!0)continue;break}if(x===ir){if(R=p.isGlob=!0,te=!0,s===!0)continue;break}if(x===Fn){for(;f()!==!0&&(M=w());){if(M===Ie){J=p.backslashes=!0,w();continue}if(M===Bn){b=p.isBracket=!0,R=p.isGlob=!0,te=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&x===at&&l===h){z=p.negated=!0,h++;continue}if(r.noparen!==!0&&x===lt){if(R=p.isGlob=!0,s===!0){for(;f()!==!0&&(x=w());){if(x===lt){J=p.backslashes=!0,x=w();continue}if(x===or){te=!0;break}}continue}break}if(R===!0){if(te=!0,s===!0)continue;break}}r.noext===!0&&(v=!1,R=!1);let C=u,H="",m="";h>0&&(H=u.slice(0,h),u=u.slice(h),g-=h),C&&R===!0&&g>0?(C=u.slice(0,g),m=u.slice(g)):R===!0?(C="",m=u):C=u,C&&C!==""&&C!=="/"&&C!==u&&ar(C.charCodeAt(C.length-1))&&(C=C.slice(0,-1)),r.unescape===!0&&(m&&(m=nr.removeBackslashes(m)),C&&J===!0&&(C=nr.removeBackslashes(C)));const A={prefix:H,input:t,start:h,base:C,glob:m,isBrace:d,isBracket:b,isGlob:R,isExtglob:v,isGlobstar:P,negated:z,negatedExtglob:le};if(r.tokens===!0&&(A.maxDepth=0,ar(x)||o.push(p),A.tokens=o),r.parts===!0||r.tokens===!0){let M;for(let _=0;_<i.length;_++){const U=M?M+1:h,T=i[_],X=t.slice(U,T);r.tokens&&(_===0&&h!==0?(o[_].isPrefix=!0,o[_].value=H):o[_].value=X,ur(o[_]),A.maxDepth+=o[_].depth),(_!==0||X!=="")&&a.push(X),M=T}if(M&&M+1<t.length){const _=t.slice(M+1);a.push(_),r.tokens&&(o[o.length-1].value=_,ur(o[o.length-1]),A.maxDepth+=o[o.length-1].depth)}A.slashes=i,A.parts=a}return A};const qe=Xe,ae=ke,{MAX_LENGTH:Qe,POSIX_REGEX_SOURCE:Gn,REGEX_NON_SPECIAL_CHARS:zn,REGEX_SPECIAL_CHARS_BACKREF:Kn,REPLACEMENTS:lr}=qe,Dn=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(s=>ae.escapeRegex(s)).join("..")}return r},Le=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,ct=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=lr[t]||t;const r={...e},n=typeof r.maxLength=="number"?Math.min(Qe,r.maxLength):Qe;let s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);const i={type:"bos",value:"",output:r.prepend||""},o=[i],a=r.capture?"":"?:",u=ae.isWindows(e),l=qe.globChars(u),h=qe.extglobChars(l),{DOT_LITERAL:g,PLUS_LITERAL:d,SLASH_LITERAL:b,ONE_CHAR:R,DOTS_SLASH:v,NO_DOT:P,NO_DOT_SLASH:B,NO_DOTS_SLASH:J,QMARK:z,QMARK_NO_DOT:le,STAR:te,START_ANCHOR:ce}=l,W=E=>`(${a}(?:(?!${ce}${E.dot?v:g}).)*?)`,x=r.dot?"":P,p=r.dot?z:le;let f=r.bash===!0?W(r):te;r.capture&&(f=`(${f})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const c={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};t=ae.removePrefix(t,c),s=t.length;const w=[],C=[],H=[];let m=i,A;const M=()=>c.index===s-1,_=c.peek=(E=1)=>t[c.index+E],U=c.advance=()=>t[++c.index]||"",T=()=>t.slice(c.index+1),X=(E="",S=0)=>{c.consumed+=E,c.index+=S},Y=E=>{c.output+=E.output!=null?E.output:E.value,X(E.value)},N=()=>{let E=1;for(;_()==="!"&&(_(2)!=="("||_(3)==="?");)U(),c.start++,E++;return E%2===0?!1:(c.negated=!0,c.start++,!0)},G=E=>{c[E]++,H.push(E)},q=E=>{c[E]--,H.pop()},O=E=>{if(m.type==="globstar"){const S=c.braces>0&&(E.type==="comma"||E.type==="brace"),y=E.extglob===!0||w.length&&(E.type==="pipe"||E.type==="paren");E.type!=="slash"&&E.type!=="paren"&&!S&&!y&&(c.output=c.output.slice(0,-m.output.length),m.type="star",m.value="*",m.output=f,c.output+=m.output)}if(w.length&&E.type!=="paren"&&(w[w.length-1].inner+=E.value),(E.value||E.output)&&Y(E),m&&m.type==="text"&&E.type==="text"){m.value+=E.value,m.output=(m.output||"")+E.value;return}E.prev=m,o.push(E),m=E},j=(E,S)=>{const y={...h[S],conditions:1,inner:""};y.prev=m,y.parens=c.parens,y.output=c.output;const $=(r.capture?"(":"")+y.open;G("parens"),O({type:E,value:S,output:c.output?"":R}),O({type:"paren",extglob:!0,value:U(),output:$}),w.push(y)},ee=E=>{let S=E.close+(r.capture?")":""),y;if(E.type==="negate"){let $=f;if(E.inner&&E.inner.length>1&&E.inner.includes("/")&&($=W(r)),($!==f||M()||/^\)+$/.test(T()))&&(S=E.close=`)$))${$}`),E.inner.includes("*")&&(y=T())&&/^\.[^\\/.]+$/.test(y)){const F=ct(y,{...e,fastpaths:!1}).output;S=E.close=`)${F})${$})`}E.prev.type==="bos"&&(c.negatedExtglob=!0)}O({type:"paren",extglob:!0,value:A,output:S}),q("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let E=!1,S=t.replace(Kn,(y,$,F,L,k,K)=>L==="\\"?(E=!0,y):L==="?"?$?$+L+(k?z.repeat(k.length):""):K===0?p+(k?z.repeat(k.length):""):z.repeat(F.length):L==="."?g.repeat(F.length):L==="*"?$?$+L+(k?f:""):f:$?y:`\\${y}`);return E===!0&&(r.unescape===!0?S=S.replace(/\\/g,""):S=S.replace(/\\+/g,y=>y.length%2===0?"\\\\":y?"\\":"")),S===t&&r.contains===!0?(c.output=t,c):(c.output=ae.wrapOutput(S,c,e),c)}for(;!M();){if(A=U(),A==="\0")continue;if(A==="\\"){const y=_();if(y==="/"&&r.bash!==!0||y==="."||y===";")continue;if(!y){A+="\\",O({type:"text",value:A});continue}const $=/^\\+/.exec(T());let F=0;if($&&$[0].length>2&&(F=$[0].length,c.index+=F,F%2!==0&&(A+="\\")),r.unescape===!0?A=U():A+=U(),c.brackets===0){O({type:"text",value:A});continue}}if(c.brackets>0&&(A!=="]"||m.value==="["||m.value==="[^")){if(r.posix!==!1&&A===":"){const y=m.value.slice(1);if(y.includes("[")&&(m.posix=!0,y.includes(":"))){const $=m.value.lastIndexOf("["),F=m.value.slice(0,$),L=m.value.slice($+2),k=Gn[L];if(k){m.value=F+k,c.backtrack=!0,U(),!i.output&&o.indexOf(m)===1&&(i.output=R);continue}}}(A==="["&&_()!==":"||A==="-"&&_()==="]")&&(A=`\\${A}`),A==="]"&&(m.value==="["||m.value==="[^")&&(A=`\\${A}`),r.posix===!0&&A==="!"&&m.value==="["&&(A="^"),m.value+=A,Y({value:A});continue}if(c.quotes===1&&A!=='"'){A=ae.escapeRegex(A),m.value+=A,Y({value:A});continue}if(A==='"'){c.quotes=c.quotes===1?0:1,r.keepQuotes===!0&&O({type:"text",value:A});continue}if(A==="("){G("parens"),O({type:"paren",value:A});continue}if(A===")"){if(c.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Le("opening","("));const y=w[w.length-1];if(y&&c.parens===y.parens+1){ee(w.pop());continue}O({type:"paren",value:A,output:c.parens?")":"\\)"}),q("parens");continue}if(A==="["){if(r.nobracket===!0||!T().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));A=`\\${A}`}else G("brackets");O({type:"bracket",value:A});continue}if(A==="]"){if(r.nobracket===!0||m&&m.type==="bracket"&&m.value.length===1){O({type:"text",value:A,output:`\\${A}`});continue}if(c.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Le("opening","["));O({type:"text",value:A,output:`\\${A}`});continue}q("brackets");const y=m.value.slice(1);if(m.posix!==!0&&y[0]==="^"&&!y.includes("/")&&(A=`/${A}`),m.value+=A,Y({value:A}),r.literalBrackets===!1||ae.hasRegexChars(y))continue;const $=ae.escapeRegex(m.value);if(c.output=c.output.slice(0,-m.value.length),r.literalBrackets===!0){c.output+=$,m.value=$;continue}m.value=`(${a}${$}|${m.value})`,c.output+=m.value;continue}if(A==="{"&&r.nobrace!==!0){G("braces");const y={type:"brace",value:A,output:"(",outputIndex:c.output.length,tokensIndex:c.tokens.length};C.push(y),O(y);continue}if(A==="}"){const y=C[C.length-1];if(r.nobrace===!0||!y){O({type:"text",value:A,output:A});continue}let $=")";if(y.dots===!0){const F=o.slice(),L=[];for(let k=F.length-1;k>=0&&(o.pop(),F[k].type!=="brace");k--)F[k].type!=="dots"&&L.unshift(F[k].value);$=Dn(L,r),c.backtrack=!0}if(y.comma!==!0&&y.dots!==!0){const F=c.output.slice(0,y.outputIndex),L=c.tokens.slice(y.tokensIndex);y.value=y.output="\\{",A=$="\\}",c.output=F;for(const k of L)c.output+=k.output||k.value}O({type:"brace",value:A,output:$}),q("braces"),C.pop();continue}if(A==="|"){w.length>0&&w[w.length-1].conditions++,O({type:"text",value:A});continue}if(A===","){let y=A;const $=C[C.length-1];$&&H[H.length-1]==="braces"&&($.comma=!0,y="|"),O({type:"comma",value:A,output:y});continue}if(A==="/"){if(m.type==="dot"&&c.index===c.start+1){c.start=c.index+1,c.consumed="",c.output="",o.pop(),m=i;continue}O({type:"slash",value:A,output:b});continue}if(A==="."){if(c.braces>0&&m.type==="dot"){m.value==="."&&(m.output=g);const y=C[C.length-1];m.type="dots",m.output+=A,m.value+=A,y.dots=!0;continue}if(c.braces+c.parens===0&&m.type!=="bos"&&m.type!=="slash"){O({type:"text",value:A,output:g});continue}O({type:"dot",value:A,output:g});continue}if(A==="?"){if(!(m&&m.value==="(")&&r.noextglob!==!0&&_()==="("&&_(2)!=="?"){j("qmark",A);continue}if(m&&m.type==="paren"){const $=_();let F=A;if($==="<"&&!ae.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(m.value==="("&&!/[!=<:]/.test($)||$==="<"&&!/<([!=]|\w+>)/.test(T()))&&(F=`\\${A}`),O({type:"text",value:A,output:F});continue}if(r.dot!==!0&&(m.type==="slash"||m.type==="bos")){O({type:"qmark",value:A,output:le});continue}O({type:"qmark",value:A,output:z});continue}if(A==="!"){if(r.noextglob!==!0&&_()==="("&&(_(2)!=="?"||!/[!=<:]/.test(_(3)))){j("negate",A);continue}if(r.nonegate!==!0&&c.index===0){N();continue}}if(A==="+"){if(r.noextglob!==!0&&_()==="("&&_(2)!=="?"){j("plus",A);continue}if(m&&m.value==="("||r.regex===!1){O({type:"plus",value:A,output:d});continue}if(m&&(m.type==="bracket"||m.type==="paren"||m.type==="brace")||c.parens>0){O({type:"plus",value:A});continue}O({type:"plus",value:d});continue}if(A==="@"){if(r.noextglob!==!0&&_()==="("&&_(2)!=="?"){O({type:"at",extglob:!0,value:A,output:""});continue}O({type:"text",value:A});continue}if(A!=="*"){(A==="$"||A==="^")&&(A=`\\${A}`);const y=zn.exec(T());y&&(A+=y[0],c.index+=y[0].length),O({type:"text",value:A});continue}if(m&&(m.type==="globstar"||m.star===!0)){m.type="star",m.star=!0,m.value+=A,m.output=f,c.backtrack=!0,c.globstar=!0,X(A);continue}let E=T();if(r.noextglob!==!0&&/^\([^?]/.test(E)){j("star",A);continue}if(m.type==="star"){if(r.noglobstar===!0){X(A);continue}const y=m.prev,$=y.prev,F=y.type==="slash"||y.type==="bos",L=$&&($.type==="star"||$.type==="globstar");if(r.bash===!0&&(!F||E[0]&&E[0]!=="/")){O({type:"star",value:A,output:""});continue}const k=c.braces>0&&(y.type==="comma"||y.type==="brace"),K=w.length&&(y.type==="pipe"||y.type==="paren");if(!F&&y.type!=="paren"&&!k&&!K){O({type:"star",value:A,output:""});continue}for(;E.slice(0,3)==="/**";){const I=t[c.index+4];if(I&&I!=="/")break;E=E.slice(3),X("/**",3)}if(y.type==="bos"&&M()){m.type="globstar",m.value+=A,m.output=W(r),c.output=m.output,c.globstar=!0,X(A);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&!L&&M()){c.output=c.output.slice(0,-(y.output+m.output).length),y.output=`(?:${y.output}`,m.type="globstar",m.output=W(r)+(r.strictSlashes?")":"|$)"),m.value+=A,c.globstar=!0,c.output+=y.output+m.output,X(A);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&E[0]==="/"){const I=E[1]!==void 0?"|$":"";c.output=c.output.slice(0,-(y.output+m.output).length),y.output=`(?:${y.output}`,m.type="globstar",m.output=`${W(r)}${b}|${b}${I})`,m.value+=A,c.output+=y.output+m.output,c.globstar=!0,X(A+U()),O({type:"slash",value:"/",output:""});continue}if(y.type==="bos"&&E[0]==="/"){m.type="globstar",m.value+=A,m.output=`(?:^|${b}|${W(r)}${b})`,c.output=m.output,c.globstar=!0,X(A+U()),O({type:"slash",value:"/",output:""});continue}c.output=c.output.slice(0,-m.output.length),m.type="globstar",m.output=W(r),m.value+=A,c.output+=m.output,c.globstar=!0,X(A);continue}const S={type:"star",value:A,output:f};if(r.bash===!0){S.output=".*?",(m.type==="bos"||m.type==="slash")&&(S.output=x+S.output),O(S);continue}if(m&&(m.type==="bracket"||m.type==="paren")&&r.regex===!0){S.output=A,O(S);continue}(c.index===c.start||m.type==="slash"||m.type==="dot")&&(m.type==="dot"?(c.output+=B,m.output+=B):r.dot===!0?(c.output+=J,m.output+=J):(c.output+=x,m.output+=x),_()!=="*"&&(c.output+=R,m.output+=R)),O(S)}for(;c.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","]"));c.output=ae.escapeLast(c.output,"["),q("brackets")}for(;c.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing",")"));c.output=ae.escapeLast(c.output,"("),q("parens")}for(;c.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Le("closing","}"));c.output=ae.escapeLast(c.output,"{"),q("braces")}if(r.strictSlashes!==!0&&(m.type==="star"||m.type==="bracket")&&O({type:"maybe_slash",value:"",output:`${b}?`}),c.backtrack===!0){c.output="";for(const E of c.tokens)c.output+=E.output!=null?E.output:E.value,E.suffix&&(c.output+=E.suffix)}return c};ct.fastpaths=(t,e)=>{const r={...e},n=typeof r.maxLength=="number"?Math.min(Qe,r.maxLength):Qe,s=t.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);t=lr[t]||t;const i=ae.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:l,NO_DOT:h,NO_DOTS:g,NO_DOTS_SLASH:d,STAR:b,START_ANCHOR:R}=qe.globChars(i),v=r.dot?g:h,P=r.dot?d:h,B=r.capture?"":"?:",J={negated:!1,prefix:""};let z=r.bash===!0?".*?":b;r.capture&&(z=`(${z})`);const le=x=>x.noglobstar===!0?z:`(${B}(?:(?!${R}${x.dot?l:o}).)*?)`,te=x=>{switch(x){case"*":return`${v}${u}${z}`;case".*":return`${o}${u}${z}`;case"*.*":return`${v}${z}${o}${u}${z}`;case"*/*":return`${v}${z}${a}${u}${P}${z}`;case"**":return v+le(r);case"**/*":return`(?:${v}${le(r)}${a})?${P}${u}${z}`;case"**/*.*":return`(?:${v}${le(r)}${a})?${P}${z}${o}${u}${z}`;case"**/.*":return`(?:${v}${le(r)}${a})?${o}${u}${z}`;default:{const p=/^(.*?)\.(\w+)$/.exec(x);if(!p)return;const f=te(p[1]);return f?f+o+p[2]:void 0}}},ce=ae.removePrefix(t,J);let W=te(ce);return W&&r.strictSlashes!==!0&&(W+=`${a}?`),W};var Wn=ct;const Xn=rt,qn=Un,ft=Wn,ht=ke,Qn=Xe,jn=t=>t&&typeof t=="object"&&!Array.isArray(t),Z=(t,e,r=!1)=>{if(Array.isArray(t)){const h=t.map(d=>Z(d,e,r));return d=>{for(const b of h){const R=b(d);if(R)return R}return!1}}const n=jn(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");const s=e||{},i=ht.isWindows(e),o=n?Z.compileRe(t,e):Z.makeRe(t,e,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(s.ignore){const h={...e,ignore:null,onMatch:null,onResult:null};u=Z(s.ignore,h,r)}const l=(h,g=!1)=>{const{isMatch:d,match:b,output:R}=Z.test(h,o,e,{glob:t,posix:i}),v={glob:t,state:a,regex:o,posix:i,input:h,output:R,match:b,isMatch:d};return typeof s.onResult=="function"&&s.onResult(v),d===!1?(v.isMatch=!1,g?v:!1):u(h)?(typeof s.onIgnore=="function"&&s.onIgnore(v),v.isMatch=!1,g?v:!1):(typeof s.onMatch=="function"&&s.onMatch(v),g?v:!0)};return r&&(l.state=a),l};Z.test=(t,e,r,{glob:n,posix:s}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const i=r||{},o=i.format||(s?ht.toPosixSlashes:null);let a=t===n,u=a&&o?o(t):t;return a===!1&&(u=o?o(t):t,a=u===n),(a===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?a=Z.matchBase(t,e,r,s):a=e.exec(u)),{isMatch:!!a,match:a,output:u}},Z.matchBase=(t,e,r,n=ht.isWindows(r))=>(e instanceof RegExp?e:Z.makeRe(e,r)).test(Xn.basename(t)),Z.isMatch=(t,e,r)=>Z(e,r)(t),Z.parse=(t,e)=>Array.isArray(t)?t.map(r=>Z.parse(r,e)):ft(t,{...e,fastpaths:!1}),Z.scan=(t,e)=>qn(t,e),Z.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;const s=e||{},i=s.contains?"":"^",o=s.contains?"":"$";let a=`${i}(?:${t.output})${o}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);const u=Z.toRegex(a,e);return n===!0&&(u.state=t),u},Z.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(s.output=ft.fastpaths(t,e)),s.output||(s=ft(t,e)),Z.compileRe(s,e,r,n)},Z.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}},Z.constants=Qn;var Zn=Z,Vn=Zn;const cr=Ot,fr=bn,me=Vn,pt=ke,hr=t=>t===""||t==="./",pr=t=>{const e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},D=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,s=new Set,i=new Set,o=0,a=h=>{i.add(h.output),r&&r.onResult&&r.onResult(h)};for(let h=0;h<e.length;h++){let g=me(String(e[h]),{...r,onResult:a},!0),d=g.state.negated||g.state.negatedExtglob;d&&o++;for(let b of t){let R=g(b,!0);(d?!R.isMatch:R.isMatch)&&(d?n.add(R.output):(n.delete(R.output),s.add(R.output)))}}let l=(o===e.length?[...i]:[...s]).filter(h=>!n.has(h));if(r&&l.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(h=>h.replace(/\\/g,"")):e}return l};D.match=D,D.matcher=(t,e)=>me(t,e),D.isMatch=(t,e,r)=>me(e,r)(t),D.any=D.isMatch,D.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,s=[],i=a=>{r.onResult&&r.onResult(a),s.push(a.output)},o=new Set(D(t,e,{...r,onResult:i}));for(let a of s)o.has(a)||n.add(a);return[...n]},D.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${cr.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>D.contains(t,n,r));if(typeof e=="string"){if(hr(t)||hr(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return D.isMatch(t,e,{...r,contains:!0})},D.matchKeys=(t,e,r)=>{if(!pt.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=D(Object.keys(t),e,r),s={};for(let i of n)s[i]=t[i];return s},D.some=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let i=me(String(s),r);if(n.some(o=>i(o)))return!0}return!1},D.every=(t,e,r)=>{let n=[].concat(t);for(let s of[].concat(e)){let i=me(String(s),r);if(!n.every(o=>i(o)))return!1}return!0},D.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${cr.inspect(t)}"`);return[].concat(e).every(n=>me(n,r)(t))},D.capture=(t,e,r)=>{let n=pt.isWindows(r),i=me.makeRe(String(t),{...r,capture:!0}).exec(n?pt.toPosixSlashes(e):e);if(i)return i.slice(1).map(o=>o===void 0?"":o)},D.makeRe=(...t)=>me.makeRe(...t),D.scan=(...t)=>me.scan(...t),D.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let s of fr(String(n),e))r.push(me.parse(s,e));return r},D.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!pr(t)?[t]:fr(t,e)},D.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return D.braces(t,{...e,expand:!0})},D.hasBraces=pr;var Yn=D,Fe=Ze(Yn),Jn=function t(e,r){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,a=/^0/,u=function(z){return t.insensitive&&(""+z).toLowerCase()||""+z},l=u(e).replace(s,"")||"",h=u(r).replace(s,"")||"",g=l.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=h.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=parseInt(l.match(o),16)||g.length!==1&&l.match(i)&&Date.parse(l),R=parseInt(h.match(o),16)||b&&h.match(i)&&Date.parse(h)||null,v,P;if(R){if(b<R)return-1;if(b>R)return 1}for(var B=0,J=Math.max(g.length,d.length);B<J;B++){if(v=!(g[B]||"").match(a)&&parseFloat(g[B])||g[B]||0,P=!(d[B]||"").match(a)&&parseFloat(d[B])||d[B]||0,isNaN(v)!==isNaN(P))return isNaN(v)?1:-1;if(typeof v!=typeof P&&(v+="",P+=""),v<P)return-1;if(v>P)return 1}return 0},dt=Ze(Jn),es={},dr={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+e+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,u){const l=[];let h=u.exec(a);for(;h;){const g=[];g.startIndex=u.lastIndex-h[0].length;const d=h.length;for(let b=0;b<d;b++)g.push(h[b]);l.push(g),h=u.exec(a)}return l},o=function(a){const u=s.exec(a);return!(u===null||typeof u>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,u,l){if(u){const h=Object.keys(u),g=h.length;for(let d=0;d<g;d++)l==="strict"?a[h[d]]=[u[h[d]]]:a[h[d]]=u[h[d]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=o,t.getAllMatches=i,t.nameRegexp=n})(dr);const gt=dr,ts={allowBooleanAttributes:!1,unpairedTags:[]};es.validate=function(t,e){e=Object.assign({},ts,e);const r=[];let n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=mr(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=Ar(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let u="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)u+=t[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!ls(u)){let g;return u.trim().length===0?g="Invalid space after '<'.":g="Tag '"+u+"' is an invalid name.",V("InvalidTag",g,ne(t,i))}const l=ss(t,i);if(l===!1)return V("InvalidAttr","Attributes for '"+u+"' have open quote.",ne(t,i));let h=l.value;if(i=l.index,h[h.length-1]==="/"){const g=i-h.length;h=h.substring(0,h.length-1);const d=yr(h,e);if(d===!0)n=!0;else return V(d.err.code,d.err.msg,ne(t,g+d.err.line))}else if(a)if(l.tagClosed){if(h.trim().length>0)return V("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",ne(t,o));if(r.length===0)return V("InvalidTag","Closing tag '"+u+"' has not been opened.",ne(t,o));{const g=r.pop();if(u!==g.tagName){let d=ne(t,g.tagStartPos);return V("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+u+"'.",ne(t,o))}r.length==0&&(s=!0)}}else return V("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",ne(t,i));else{const g=yr(h,e);if(g!==!0)return V(g.err.code,g.err.msg,ne(t,i-h.length+g.err.line));if(s===!0)return V("InvalidXml","Multiple possible root nodes found.",ne(t,i));e.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:o}),n=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=Ar(t,i);continue}else if(t[i+1]==="?"){if(i=mr(t,++i),i.err)return i}else break;else if(t[i]==="&"){const g=as(t,i);if(g==-1)return V("InvalidChar","char '&' is not expected.",ne(t,i));i=g}else if(s===!0&&!gr(t[i]))return V("InvalidXml","Extra text at the end",ne(t,i));t[i]==="<"&&i--}}else{if(gr(t[i]))continue;return V("InvalidChar","char '"+t[i]+"' is not expected.",ne(t,i))}if(n){if(r.length==1)return V("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ne(t,r[0].tagStartPos));if(r.length>0)return V("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return V("InvalidXml","Start tag expected.",1);return!0};function gr(t){return t===" "||t==="	"||t===`
`||t==="\r"}function mr(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const n=t.substr(r,e-r);if(e>5&&n==="xml")return V("InvalidXml","XML declaration allowed only at the start of the document.",ne(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Ar(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const rs='"',ns="'";function ss(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===rs||t[e]===ns)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}const is=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function yr(t,e){const r=gt.getAllMatches(t,is),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return V("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Pe(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return V("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Pe(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return V("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Pe(r[s]));const i=r[s][2];if(!us(i))return V("InvalidAttr","Attribute '"+i+"' is an invalid name.",Pe(r[s]));if(!n.hasOwnProperty(i))n[i]=1;else return V("InvalidAttr","Attribute '"+i+"' is repeated.",Pe(r[s]))}return!0}function os(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function as(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,os(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function V(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function us(t){return gt.isName(t)}function ls(t){return gt.isName(t)}function ne(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Pe(t){return t.startIndex+t[1].length}!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const cs=`
`;function fs(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=cs),_r(t,e,"",r)}function _r(t,e,r,n){let s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o],u=hs(a);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===e.textNodeName){let R=a[u];ps(l,e)||(R=e.tagValueProcessor(u,R),R=Rr(R,e)),i&&(s+=n),s+=R,i=!1;continue}else if(u===e.cdataPropName){i&&(s+=n),s+=`<![CDATA[${a[u][0][e.textNodeName]}]]>`,i=!1;continue}else if(u===e.commentPropName){s+=n+`<!--${a[u][0][e.textNodeName]}-->`,i=!0;continue}else if(u[0]==="?"){const R=br(a[":@"],e),v=u==="?xml"?"":n;let P=a[u][0][e.textNodeName];P=P.length!==0?" "+P:"",s+=v+`<${u}${P}${R}?>`,i=!0;continue}let h=n;h!==""&&(h+=e.indentBy);const g=br(a[":@"],e),d=n+`<${u}${g}`,b=_r(a[u],e,l,h);e.unpairedTags.indexOf(u)!==-1?e.suppressUnpairedNode?s+=d+">":s+=d+"/>":(!b||b.length===0)&&e.suppressEmptyNode?s+=d+"/>":b&&b.endsWith(">")?s+=d+`>${b}${n}</${u}>`:(s+=d+">",b&&n!==""&&(b.includes("/>")||b.includes("</"))?s+=n+e.indentBy+b+n:s+=b,s+=`</${u}>`),i=!0}return s}function hs(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function br(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let s=e.attributeValueProcessor(n,t[n]);s=Rr(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function ps(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function Rr(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const n=e.entities[r];t=t.replace(n.regex,n.val)}return t}var ds=fs;const gs=ds,ms={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ne(t){this.options=Object.assign({},ms,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=_s),this.processTextOrObjNode=As,this.options.format?(this.indentate=ys,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ne.prototype.build=function(t){return this.options.preserveOrder?gs(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)},Ne.prototype.j2x=function(t,e){let r="",n="";for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s))if(typeof t[s]>"u")this.isAttribute(s)&&(n+="");else if(t[s]===null)this.isAttribute(s)?n+="":s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)n+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){const i=this.isAttribute(s);if(i)r+=this.buildAttrPairStr(i,""+t[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+t[s]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){const i=t[s].length;let o="",a="";for(let u=0;u<i;u++){const l=t[s][u];if(!(typeof l>"u"))if(l===null)s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){const h=this.j2x(l,e+1);o+=h.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(a+=h.attrStr)}else o+=this.processTextOrObjNode(l,s,e);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(s,l);h=this.replaceEntitiesValue(h),o+=h}else o+=this.buildTextValNode(l,s,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,a,e)),n+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const i=Object.keys(t[s]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+t[s][i[a]])}else n+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:n}},Ne.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function As(t,e,r){const n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Ne.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",s=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+i+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+s}},Ne.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e},Ne.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}},Ne.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function ys(t){return this.options.indentBy.repeat(t)}function _s(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}function bs(t,e){if(t.indexOf(e)>-1)return[e];const r=Fe(t,e);return r.length?r:[]}async function mt(t){if(new Uint16Array(t,0,2)[0]===35615)try{const r=new Response(t),n=new DecompressionStream("gzip"),s=await r.body?.pipeThrough(n),i=await new Response(s).arrayBuffer();return await mt(i)}catch(r){console.error("eee",r)}return t}dt.insensitive=!0;const Rs=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Es=["simwrapper",".simwrapper"],Me={};class vs{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isOMX;type;constructor(e,r){this.urlId=e.slug,this.slug=e.slug,this.needsAuth=!!e.needPassword,this.fsHandle=e.handle||null,this.store=r||null,this.isGithub=!!e.isGithub,this.isOMX=!!e.omx,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isOMX&&(this.type=3),this.baseUrl=e.baseURL,e.baseURL.endsWith("/")||(this.baseUrl+="/"),Me[this.urlId]||(Me[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(e){return e&&await e.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(i=>{this.store.commit("setFileHandleForPermissionRequest",{handle:e,resolve:i})}):!0}clearCache(){Me[this.urlId]={}}cleanURL(e){let r=this.baseUrl+e.replace(/^0-9a-zA-Z_\-\/:+/i,"");return r=r.replaceAll("//","/"),r=r.replaceAll("//","/"),r=r.replace("https:/","https://"),r=r.replace("http:/","http://"),r=new URL(r).href,r}async _getFileResponse(e){switch(this.type){case 1:return this._getFileFromChromeFileSystem(e);case 2:return this._getFileFromGitHub(e);case 3:return this._getFileFromAzure(e);case 0:default:return this._getFileFetchResponse(e)}}async _getFileFetchResponse(e){const r=this.cleanURL(e),n={},s=new Request(r,{headers:n});return await fetch(s).then(o=>{if(o.status!=200)throw console.log("Status:",o.status),o;return o})}async _getDirectoryFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}list/${this.slug}?prefix=${r}`;const s=new URL(n).href,i={};if(this.needsAuth){let l=localStorage.getItem(`auth-token-${this.slug}`);if(l||(l=prompt("This server requires an access token to continue")),l)localStorage.setItem(`auth-token-${this.slug}`,l),i.AZURETOKEN=l;else return{dirs:[],files:[],handles:{}}}const o=new Request(s,{headers:i}),a=await fetch(o);if(a.status==400){let l=prompt("Authorization failure. This server requires a valid access token to continue");return l?(localStorage.setItem(`auth-token-${this.slug}`,l),i.AZURETOKEN=l,await this._getDirectoryFromAzure(e)):{dirs:[],files:[],handles:{}}}if(a.status!=200)throw console.log("Status:",a.status),a;return await a.json()}getSlug(){return this.slug}async _getFileFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let n=`${this.baseUrl}file/${this.slug}?prefix=${r}`;const s=new URL(n).href,i={},o=new Request(s,{headers:i}),a=await fetch(o);if(a.status!=200)throw console.log("Status:",a.status),a;return a}async _getFileFromChromeFileSystem(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=new URL(`http://local/${r}`).href,r=r.substring(13);const n=r.lastIndexOf("/"),s=r.substring(0,n),i=decodeURIComponent(r.substring(n+1)),a=(await this.getDirectory(s)).handles[i];if(!a)throw Error(`File ${i} missing`);const u=await a.getFile();return u.json=()=>new Promise(async(l,h)=>{const g=await u.text(),d=JSON.parse(g);l(d)}),u.blob=()=>new Promise(async(l,h)=>{l(u)}),new Promise((l,h)=>{l(u)})}async _getFileFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n=r.split("/").filter(d=>!!d);if(n.length<2)return new Promise((d,b)=>{d(null)});const s=`${n[0]}/${n[1]}`;let i=`https://api.github.com/repos/${s}/contents/`;n.shift(),n.shift(),i+=n.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Et}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let l=await await fetch(i,{headers:u}).then(d=>d.json()),h=l.content;if(h||(i=`https://api.github.com/repos/${s}/git/blobs/${l.sha}`,l=await await fetch(i,{headers:u}).then(d=>d.json()),h=l.content),l.encoding=="base64"){const d=Uint8Array.from(atob(l.content),b=>b.charCodeAt(0));Rs.test(e.toLocaleLowerCase())?h=d:h=new TextDecoder().decode(d)}else l.encoding=="utf-8"?h=new TextDecoder().decode(l.content):h=l.content;return{text:()=>new Promise((d,b)=>{d(h)}),json:()=>new Promise(async(d,b)=>{const R=JSON.parse(h);d(R)}),blob:()=>new Promise(async(d,b)=>{d(new Blob([h],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const n={dirs:[],files:[],handles:{}},s=r.split("/").filter(h=>!!h);if(s.length<2)return n;let i=`https://api.github.com/repos/${s[0]}/${s[1]}/contents/`;s.shift(),s.shift(),i+=s.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Et}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(i,{headers:u}).then(h=>h.json())).forEach(h=>{h.type=="file"&&n.files.push(h.name),h.type=="dir"&&n.dirs.push(h.name)}),n}async getFileText(e){return(await this._getFileResponse(e)).text()}async getFileJson(e){const s=await(await(await this._getFileResponse(e)).blob()).arrayBuffer(),i=await mt(s),o=new TextDecoder("utf-8").decode(i);return JSON.parse(o)}async getFileBlob(e){return(await this._getFileResponse(e)).blob()}async getFileStream(e){let r;switch(this.type){case 1:return r=await this._getFileFromChromeFileSystem(e).then(n=>n.blob()).then(n=>n.stream()),r;case 0:return r=await this._getFileFetchResponse(e).then(n=>n.body),r;default:throw Error("Not implemented")}}async getDirectory(e){let r=e.replaceAll("//","/");r.endsWith("/")||(r+="/");const n=Me[this.urlId][r];if(n)return n;r=r.replaceAll("/./","/");try{let s;switch(this.type){case 1:s=await this._getDirectoryFromHandle(r);break;case 2:s=await this._getDirectoryFromGitHub(r);break;case 3:s=await this._getDirectoryFromAzure(r);break;case 0:default:s=await this._getDirectoryFromURL(r);break}return s.dirs.sort((i,o)=>dt(i,o)),s.files.sort((i,o)=>dt(i,o)),Me[this.urlId][r]=s,s}catch(s){throw Error(""+s)}}async _getDirectoryFromHandle(e,r){const n={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return n;let i=e.split("/").filter(l=>!!l);function o(l){const h=l.indexOf("..");if(h<=0)return l;const g=l.filter((d,b)=>b!==h-1&&b!==h);return o(g)}const a=o(i);let u=this.fsHandle;if(a.length)for(const l of a){let h=!1;for await(let[g,d]of u)if(g===l){u=d,h=!0;break}if(!h)throw Error(`Could not find folder "${l}"`)}for await(let l of u.values())n.handles&&(n.handles[l.name]=l),l.kind==="file"?n.files.push(l.name):n.dirs.push(l.name);return n}async _getDirectoryFromURL(e){const n=await(await this._getFileResponse(e).then()).text();return this.buildListFromHtml(n)}async findAllYamlConfigs(e){const r={dashboards:{},topsheets:{},vizes:{},configs:{}},n=[];let s="/";const o=(e.startsWith("/")?e:"/"+e).split("/");for(const g of o.slice(0,o.length-1)){s=`${s}${g}/`.replaceAll("//","/");try{const{dirs:d}=await this.getDirectory(s);for(const b of d)Es.includes(b.toLocaleLowerCase())&&n.push(`${s}/${b}`.replaceAll("//","/"))}catch{}}n.push(e);const a="dashboard*.y?(a)ml",u="(topsheet|table)*.y?(a)ml",l="viz*.y?(a)ml",h="simwrapper-config.y?(a)ml";for(const g of n){const{files:d}=await this.getDirectory(g);Fe.match(d,a).map(b=>r.dashboards[b]=`${g}/${b}`.replaceAll("//","/")),Fe.match(d,u).map(b=>r.topsheets[b]=`${g}/${b}`.replaceAll("//","/")),Fe.match(d,l).map(b=>r.vizes[b]=`${g}/${b}`.replaceAll("//","/")),Fe.match(d,h).map(b=>r.configs[b]=`${g}/${b}`.replaceAll("//","/"))}return r}buildListFromHtml(e){return e.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(e):e.indexOf("<ul>")>-1?this.buildListFromSVN(e):e.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(e):e.indexOf("<table>")>-1?this.buildListFromApache24(e):e.indexOf(`
<a `)>-1?this.buildListFromNGINX(e):{dirs:[],files:[],handles:{}}}buildListFromSimpleWebServer(e){const r=/">(.*?)<\/a/,n=[],s=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<li><a href="')<0)continue;const u=o.match(r);if(!u)continue;const l=u[1];l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l)}return{dirs:n,files:s,handles:{}}}buildListFromNpxServe(e){const r=/"(.*?)"/;let n=[],s=[];const i=e.split("</li>").map(o=>o.slice(o.lastIndexOf("<li")));for(const o of i){const a=o.indexOf('<li> <a href="');if(a<0||a>512)continue;const u=o.match(r);if(!u)continue;let l=u[1];l=l.replaceAll("&#47;","/"),l!=="/"&&l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return n=n.map(o=>o.slice(1+o.lastIndexOf("/"))),s=s.map(o=>o.slice(1+o.lastIndexOf("/"))),{dirs:n,files:s,handles:{}}}buildListFromSVN(e){const r=/"(.*?)"/,n=[],s=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<li><a href="')<0)continue;const u=o.match(r);if(!u)continue;let l=u[1];l!=="../"&&(l.startsWith("./")&&(l=l.substring(2)),l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromApache24(e){const r=/"(.*?)"/,n=[],s=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<th "')>-1||o.indexOf("[PARENTDIR]")>-1)continue;const a=o.indexOf('<td><a href="');if(a<0)continue;const u=o.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}buildListFromNGINX(e){const r=/"(.*?)"/,n=[],s=[],i=e.split(`
`);for(const o of i){const a=o.indexOf('<a href="');if(a<0)continue;const u=o.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?n.push(l.substring(0,l.length-1)):s.push(l))}return{dirs:n,files:s,handles:{}}}}let At,Ee="",yt=[],Q={},ue="",_t,bt=!1,Be=[];const be={};onmessage=function(t){Cs(t.data)};async function Cs(t){if(Q=t.config,ue=Q.dataset,t.options?.highPrecision&&(bt=!0),t.featureProperties){ws(t.featureProperties),postMessage(be[ue]);return}if(t.buffer){_t=t.buffer,Er(ue,_t),postMessage(be[ue]);return}At=new vs(t.fileSystemConfig),Ee=t.subfolder,yt=t.files,_t=t.buffer;try{const e=Q.dataset.indexOf("/");if(e>-1){let r=Ee;Ee&&(r+="/");const n=e===0?Q.dataset:`${r}${Q.dataset}`;ue=n.substring(1+n.lastIndexOf("/")),Ee=n.substring(0,n.lastIndexOf("/"));let s=Ee.startsWith("./")?Ee.slice(2):Ee;const{files:i}=await At.getDirectory(s);yt=i}await Ss(),Be.length&&(be[ue]._comments=Be),postMessage(be[ue])}catch(e){const r=""+e;postMessage({error:r})}}function ws(t){const e={},r=t[0];let n=Object.keys(r).sort();if(Q.drop){let s=Array.isArray(Q.drop)?Q.drop:Q.drop.split(",");s.length&&(console.log("DROPPING",s),n=n.filter(i=>s.indexOf(i)==-1))}if(Q.keep){let s=Array.isArray(Q.keep)?Q.keep:Q.keep.split(",");s.length&&(console.log("KEEPING",s),n=n.filter(i=>s.indexOf(i)>-1))}for(const s of n){let i,o=ie.NUMBER;typeof r[s]=="number"?(i=bt?new Float64Array(t.length):new Float32Array(t.length),i.fill(NaN)):(i=[],o=ie.STRING),e[s]={name:s,values:i,type:o}}for(let s=0;s<t.length;s++){const i=t[s];for(const o of n){const a=i[o];e[o].values[s]=a}}be[ue]=e,Rt(ue,e)}async function Ss(){const t=ue,e=bs(yt,t);if(e.length==0)throw Error(`File not found: "${t}"`);if(e.length>1)throw Error(`More than one file matched "${t}": ${e}`);const r=e[0],n=await Ns(r);Er(r,n)}async function Er(t,e){try{if(t&&t.toLocaleLowerCase().endsWith(".dbf")){const r=$r(e,new TextDecoder("windows-1252"));Rt(ue,r),be[ue]=r}else{const r=new TextDecoder().decode(e);await xs(ue,t,r)}}catch(r){const n=(""+r).replaceAll("Error: ","");postMessage({error:n})}}async function xs(t,e,r){function n(s,i){return Array.isArray(i)&&i.length>0?n(s[i[0]],i.slice(1)):s}if(e.indexOf(".xml")>-1){const s={},i=Q;if(i.xmlElements){const o=i.xmlElements.split(".");n(s,o),be[t]={}}else be[t]={};return}$s(t,e,r)}function $s(t,e,r){const n={},s={},i=Lr.parse(r,{delimitersToGuess:["	",";",","," "],comments:"#",skipEmptyLines:!0,dynamicTyping:!0,header:!0,transformHeader:(a,u)=>(s[a]||(s[a]=0),s[a]+=1,s[a]>1?`${a.trim()}_${s[a]-1}`:a.trim())});if(!i.data?.length)throw console.error("NODATA - Papaparse returned nothing!"),Error("Bad format or too large? Error loading");let o=i.meta.fields||[];if(Q.drop){let a=Array.isArray(Q.drop)?Q.drop:Q.drop.split(",");a.length&&(console.log("DROPPING",a),o=o.filter(u=>a.indexOf(u)==-1))}if(Q.keep){let a=Array.isArray(Q.keep)?Q.keep:Q.keep.split(",");a.length&&(console.log("KEEPING",a),o=o.filter(u=>a.indexOf(u)>-1))}for(const a of o){const u=bt?new Float64Array(i.data.length).fill(NaN):new Float32Array(i.data.length).fill(NaN);n[a]={name:a,values:u,type:ie.NUMBER}}for(let a=0;a<i.data.length;a++){const u=i.data[a];for(const l of o){const h=u[l];if(h!=="")if(Number.isFinite(h))n[l].values[a]=h;else if(Array.isArray(n[l].values))n[l].values[a]=h;else{const g=Array.from(n[l].values.slice(0,a));typeof h=="string"&&(n[l].type=ie.STRING),typeof h=="boolean"&&(n[l].type=ie.BOOLEAN),g[a]=h,n[l].values=g}}}Rt(t,n),be[t]=n,Be=[...new Set(i.comments)],Be.length&&console.log({_comments:Be})}function Rt(t,e){for(const r of Object.values(e)){if(r.type!==ie.NUMBER)continue;let n=-1/0;for(const s of r.values)n=Math.max(n,s);r.max=n}}async function Ns(t){const e=`${Ee}/${t}`,r=await At.getFileBlob(e);if(!r)throw Error("BLOB IS NULL");const n=await r.arrayBuffer();return await mt(n)}})();
