(function(){"use strict";function tt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Dt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),r}var er={},tr=Object.freeze({__proto__:null,default:er}),rt=Dt(tr),be={};(function(t){t.isInteger=e=>typeof e=="number"?Number.isInteger(e):typeof e=="string"&&e.trim()!==""?Number.isInteger(Number(e)):!1,t.find=(e,r)=>e.nodes.find(s=>s.type===r),t.exceedsLimit=(e,r,s=1,n)=>n===!1||!t.isInteger(e)||!t.isInteger(r)?!1:(Number(r)-Number(e))/Number(s)>=n,t.escapeNode=(e,r=0,s)=>{const n=e.nodes[r];n&&(s&&n.type===s||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>e.type!=="brace"||e.commas>>0+e.ranges>>0?!1:(e.invalid=!0,!0),t.isInvalidBrace=e=>e.type!=="brace"?!1:e.invalid===!0||e.dollar?!0:!(e.commas>>0+e.ranges>>0)||e.open!==!0||e.close!==!0?(e.invalid=!0,!0):!1,t.isOpenOrClose=e=>e.type==="open"||e.type==="close"?!0:e.open===!0||e.close===!0,t.reduce=e=>e.reduce((r,s)=>(s.type==="text"&&r.push(s.value),s.type==="range"&&(s.type="text"),r),[]),t.flatten=(...e)=>{const r=[],s=n=>{for(let i=0;i<n.length;i++){const o=n[i];if(Array.isArray(o)){s(o);continue}o!==void 0&&r.push(o)}return r};return s(e),r}})(be);const nt=be;var $e=(t,e={})=>{const r=(s,n={})=>{const i=e.escapeInvalid&&nt.isInvalidBrace(n),o=s.invalid===!0&&e.escapeInvalid===!0;let a="";if(s.value)return(i||o)&&nt.isOpenOrClose(s)?"\\"+s.value:s.value;if(s.value)return s.value;if(s.nodes)for(const u of s.nodes)a+=r(u);return a};return r(t)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var rr=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1};/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const st=rr,ne=(t,e,r)=>{if(st(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(st(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let s={relaxZeros:!0,...r};typeof s.strictZeros=="boolean"&&(s.relaxZeros=s.strictZeros===!1);let n=String(s.relaxZeros),i=String(s.shorthand),o=String(s.capture),a=String(s.wrap),u=t+":"+e+"="+n+i+o+a;if(ne.cache.hasOwnProperty(u))return ne.cache[u].result;let l=Math.min(t,e),c=Math.max(t,e);if(Math.abs(l-c)===1){let E=t+"|"+e;return s.capture?`(${E})`:s.wrap===!1?E:`(?:${E})`}let h=ct(t)||ct(e),f={min:t,max:e,a:l,b:c},b=[],A=[];if(h&&(f.isPadded=h,f.maxLen=String(f.max).length),l<0){let E=c<0?Math.abs(c):1;A=it(E,Math.abs(l),f,s),l=f.a=0}return c>=0&&(b=it(l,c,f,s)),f.negatives=A,f.positives=b,f.result=nr(A,b),s.capture===!0?f.result=`(${f.result})`:s.wrap!==!1&&b.length+A.length>1&&(f.result=`(?:${f.result})`),ne.cache[u]=f,f.result};function nr(t,e,r){let s=Te(t,e,"-",!1)||[],n=Te(e,t,"",!1)||[],i=Te(t,e,"-?",!0)||[];return s.concat(i).concat(n).join("|")}function sr(t,e){let r=1,s=1,n=at(t,r),i=new Set([e]);for(;t<=n&&n<=e;)i.add(n),r+=1,n=at(t,r);for(n=ut(e+1,s)-1;t<n&&n<=e;)i.add(n),s+=1,n=ut(e+1,s)-1;return i=[...i],i.sort(ar),i}function ir(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let s=or(t,e),n=s.length,i="",o=0;for(let a=0;a<n;a++){let[u,l]=s[a];u===l?i+=u:u!=="0"||l!=="9"?i+=ur(u,l):o++}return o&&(i+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:i,count:[o],digits:n}}function it(t,e,r,s){let n=sr(t,e),i=[],o=t,a;for(let u=0;u<n.length;u++){let l=n[u],c=ir(String(o),String(l),s),h="";if(!r.isPadded&&a&&a.pattern===c.pattern){a.count.length>1&&a.count.pop(),a.count.push(c.count[0]),a.string=a.pattern+lt(a.count),o=l+1;continue}r.isPadded&&(h=lr(l,r,s)),c.string=h+c.pattern+lt(c.count),i.push(c),o=l+1,a=c}return i}function Te(t,e,r,s,n){let i=[];for(let o of t){let{string:a}=o;!s&&!ot(e,"string",a)&&i.push(r+a),s&&ot(e,"string",a)&&i.push(r+a)}return i}function or(t,e){let r=[];for(let s=0;s<t.length;s++)r.push([t[s],e[s]]);return r}function ar(t,e){return t>e?1:e>t?-1:0}function ot(t,e,r){return t.some(s=>s[e]===r)}function at(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function ut(t,e){return t-t%Math.pow(10,e)}function lt(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function ur(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function ct(t){return/^-?(0+)\d/.test(t)}function lr(t,e,r){if(!e.isPadded)return t;let s=Math.abs(e.maxLen-String(t).length),n=r.relaxZeros!==!1;switch(s){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${s}}`:`0{${s}}`}}ne.cache={},ne.clearCache=()=>ne.cache={};var cr=ne;/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const fr=rt,ft=cr,ht=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),hr=t=>e=>t===!0?Number(e):String(e),Oe=t=>typeof t=="number"||typeof t=="string"&&t!=="",ce=t=>Number.isInteger(+t),He=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},pr=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,dr=(t,e,r)=>{if(e>0){let s=t[0]==="-"?"-":"";s&&(t=t.slice(1)),t=s+t.padStart(s?e-1:e,"0")}return r===!1?String(t):t},ye=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},gr=(t,e,r)=>{t.negatives.sort((a,u)=>a<u?-1:a>u?1:0),t.positives.sort((a,u)=>a<u?-1:a>u?1:0);let s=e.capture?"":"?:",n="",i="",o;return t.positives.length&&(n=t.positives.map(a=>ye(String(a),r)).join("|")),t.negatives.length&&(i=`-(${s}${t.negatives.map(a=>ye(String(a),r)).join("|")})`),n&&i?o=`${n}|${i}`:o=n||i,e.wrap?`(${s}${o})`:o},pt=(t,e,r,s)=>{if(r)return ft(t,e,{wrap:!1,...s});let n=String.fromCharCode(t);if(t===e)return n;let i=String.fromCharCode(e);return`[${n}-${i}]`},dt=(t,e,r)=>{if(Array.isArray(t)){let s=r.wrap===!0,n=r.capture?"":"?:";return s?`(${n}${t.join("|")})`:t.join("|")}return ft(t,e,r)},gt=(...t)=>new RangeError("Invalid range arguments: "+fr.inspect(...t)),At=(t,e,r)=>{if(r.strictRanges===!0)throw gt([t,e]);return[]},Ar=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},br=(t,e,r=1,s={})=>{let n=Number(t),i=Number(e);if(!Number.isInteger(n)||!Number.isInteger(i)){if(s.strictRanges===!0)throw gt([t,e]);return[]}n===0&&(n=0),i===0&&(i=0);let o=n>i,a=String(t),u=String(e),l=String(r);r=Math.max(Math.abs(r),1);let c=He(a)||He(u)||He(l),h=c?Math.max(a.length,u.length,l.length):0,f=c===!1&&pr(t,e,s)===!1,b=s.transform||hr(f);if(s.toRegex&&r===1)return pt(ye(t,h),ye(e,h),!0,s);let A={negatives:[],positives:[]},E=M=>A[M<0?"negatives":"positives"].push(Math.abs(M)),_=[],w=0;for(;o?n>=i:n<=i;)s.toRegex===!0&&r>1?E(n):_.push(dr(b(n,w),h,f)),n=o?n-r:n+r,w++;return s.toRegex===!0?r>1?gr(A,s,h):dt(_,null,{wrap:!1,...s}):_},yr=(t,e,r=1,s={})=>{if(!ce(t)&&t.length>1||!ce(e)&&e.length>1)return At(t,e,s);let n=s.transform||(f=>String.fromCharCode(f)),i=`${t}`.charCodeAt(0),o=`${e}`.charCodeAt(0),a=i>o,u=Math.min(i,o),l=Math.max(i,o);if(s.toRegex&&r===1)return pt(u,l,!1,s);let c=[],h=0;for(;a?i>=o:i<=o;)c.push(n(i,h)),i=a?i-r:i+r,h++;return s.toRegex===!0?dt(c,null,{wrap:!1,options:s}):c},Ee=(t,e,r,s={})=>{if(e==null&&Oe(t))return[t];if(!Oe(t)||!Oe(e))return At(t,e,s);if(typeof r=="function")return Ee(t,e,1,{transform:r});if(ht(r))return Ee(t,e,0,r);let n={...s};return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,ce(r)?ce(t)&&ce(e)?br(t,e,r,n):yr(t,e,Math.max(Math.abs(r),1),n):r!=null&&!ht(r)?Ar(r,n):Ee(t,e,1,r)};var bt=Ee;const Er=bt,yt=be;var mr=(t,e={})=>{const r=(s,n={})=>{const i=yt.isInvalidBrace(n),o=s.invalid===!0&&e.escapeInvalid===!0,a=i===!0||o===!0,u=e.escapeInvalid===!0?"\\":"";let l="";if(s.isOpen===!0)return u+s.value;if(s.isClose===!0)return console.log("node.isClose",u,s.value),u+s.value;if(s.type==="open")return a?u+s.value:"(";if(s.type==="close")return a?u+s.value:")";if(s.type==="comma")return s.prev.type==="comma"?"":a?s.value:"|";if(s.value)return s.value;if(s.nodes&&s.ranges>0){const c=yt.reduce(s.nodes),h=Er(...c,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(h.length!==0)return c.length>1&&h.length>1?`(${h})`:h}if(s.nodes)for(const c of s.nodes)l+=r(c,s);return l};return r(t)};const Rr=bt,Et=$e,ae=be,se=(t="",e="",r=!1)=>{const s=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?ae.flatten(e).map(n=>`{${n}}`):e;for(const n of t)if(Array.isArray(n))for(const i of n)s.push(se(i,e,r));else for(let i of e)r===!0&&typeof i=="string"&&(i=`{${i}}`),s.push(Array.isArray(i)?se(n,i,r):n+i);return ae.flatten(s)};var _r=(t,e={})=>{const r=e.rangeLimit===void 0?1e3:e.rangeLimit,s=(n,i={})=>{n.queue=[];let o=i,a=i.queue;for(;o.type!=="brace"&&o.type!=="root"&&o.parent;)o=o.parent,a=o.queue;if(n.invalid||n.dollar){a.push(se(a.pop(),Et(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){a.push(se(a.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){const h=ae.reduce(n.nodes);if(ae.exceedsLimit(...h,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let f=Rr(...h,e);f.length===0&&(f=Et(n,e)),a.push(se(a.pop(),f)),n.nodes=[];return}const u=ae.encloseBrace(n);let l=n.queue,c=n;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,l=c.queue;for(let h=0;h<n.nodes.length;h++){const f=n.nodes[h];if(f.type==="comma"&&n.type==="brace"){h===1&&l.push(""),l.push("");continue}if(f.type==="close"){a.push(se(a.pop(),l,u));continue}if(f.value&&f.type!=="open"){l.push(se(l.pop(),f.value));continue}f.nodes&&s(f,n)}return l};return ae.flatten(s(t))},Cr={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"Â ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const Nr=$e,{MAX_LENGTH:mt,CHAR_BACKSLASH:Le,CHAR_BACKTICK:vr,CHAR_COMMA:wr,CHAR_DOT:xr,CHAR_LEFT_PARENTHESES:Sr,CHAR_RIGHT_PARENTHESES:$r,CHAR_LEFT_CURLY_BRACE:Tr,CHAR_RIGHT_CURLY_BRACE:Or,CHAR_LEFT_SQUARE_BRACKET:Rt,CHAR_RIGHT_SQUARE_BRACKET:_t,CHAR_DOUBLE_QUOTE:Hr,CHAR_SINGLE_QUOTE:Lr,CHAR_NO_BREAK_SPACE:Ir,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Pr}=Cr;var Fr=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");const r=e||{},s=typeof r.maxLength=="number"?Math.min(mt,r.maxLength):mt;if(t.length>s)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${s})`);const n={type:"root",input:t,nodes:[]},i=[n];let o=n,a=n,u=0;const l=t.length;let c=0,h=0,f;const b=()=>t[c++],A=E=>{if(E.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&E.type==="text"){a.value+=E.value;return}return o.nodes.push(E),E.parent=o,E.prev=a,a=E,E};for(A({type:"bos"});c<l;)if(o=i[i.length-1],f=b(),!(f===Pr||f===Ir)){if(f===Le){A({type:"text",value:(e.keepEscaping?f:"")+b()});continue}if(f===_t){A({type:"text",value:"\\"+f});continue}if(f===Rt){u++;let E;for(;c<l&&(E=b());){if(f+=E,E===Rt){u++;continue}if(E===Le){f+=b();continue}if(E===_t&&(u--,u===0))break}A({type:"text",value:f});continue}if(f===Sr){o=A({type:"paren",nodes:[]}),i.push(o),A({type:"text",value:f});continue}if(f===$r){if(o.type!=="paren"){A({type:"text",value:f});continue}o=i.pop(),A({type:"text",value:f}),o=i[i.length-1];continue}if(f===Hr||f===Lr||f===vr){const E=f;let _;for(e.keepQuotes!==!0&&(f="");c<l&&(_=b());){if(_===Le){f+=_+b();continue}if(_===E){e.keepQuotes===!0&&(f+=_);break}f+=_}A({type:"text",value:f});continue}if(f===Tr){h++;const _={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||o.dollar===!0,depth:h,commas:0,ranges:0,nodes:[]};o=A(_),i.push(o),A({type:"open",value:f});continue}if(f===Or){if(o.type!=="brace"){A({type:"text",value:f});continue}const E="close";o=i.pop(),o.close=!0,A({type:E,value:f}),h--,o=i[i.length-1];continue}if(f===wr&&h>0){if(o.ranges>0){o.ranges=0;const E=o.nodes.shift();o.nodes=[E,{type:"text",value:Nr(o)}]}A({type:"comma",value:f}),o.commas++;continue}if(f===xr&&h>0&&o.commas===0){const E=o.nodes;if(h===0||E.length===0){A({type:"text",value:f});continue}if(a.type==="dot"){if(o.range=[],a.value+=f,a.type="range",o.nodes.length!==3&&o.nodes.length!==5){o.invalid=!0,o.ranges=0,a.type="text";continue}o.ranges++,o.args=[];continue}if(a.type==="range"){E.pop();const _=E[E.length-1];_.value+=a.value+f,a=_,o.ranges--;continue}A({type:"dot",value:f});continue}A({type:"text",value:f})}do if(o=i.pop(),o.type!=="root"){o.nodes.forEach(w=>{w.nodes||(w.type==="open"&&(w.isOpen=!0),w.type==="close"&&(w.isClose=!0),w.nodes||(w.type="text"),w.invalid=!0)});const E=i[i.length-1],_=E.nodes.indexOf(o);E.nodes.splice(_,1,...o.nodes)}while(i.length>0);return A({type:"eos"}),n};const Ct=$e,kr=mr,Mr=_r,Br=Fr,V=(t,e={})=>{let r=[];if(Array.isArray(t))for(const s of t){const n=V.create(s,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(V.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};V.parse=(t,e={})=>Br(t,e),V.stringify=(t,e={})=>Ct(typeof t=="string"?V.parse(t,e):t,e),V.compile=(t,e={})=>(typeof t=="string"&&(t=V.parse(t,e)),kr(t,e)),V.expand=(t,e={})=>{typeof t=="string"&&(t=V.parse(t,e));let r=Mr(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r},V.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?V.compile(t,e):V.expand(t,e);var Gr=V;function j(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Nt(t,e){for(var r="",s=0,n=-1,i=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||i===1))if(n!==a-1&&i===2){if(r.length<2||s!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",s=0):(r=r.slice(0,u),s=r.length-1-r.lastIndexOf("/")),n=a,i=0;continue}}else if(r.length===2||r.length===1){r="",s=0,n=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",s=2)}else r.length>0?r+="/"+t.slice(n+1,a):r=t.slice(n+1,a),s=a-n-1;n=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}function Ur(t,e){var r=e.dir||e.root,s=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+s:r+t+s:s}var ue={resolve:function(){for(var e="",r=!1,s,n=arguments.length-1;n>=-1&&!r;n--){var i;n>=0?i=arguments[n]:(s===void 0&&(s=process.cwd()),i=s),j(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=Nt(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(j(e),e.length===0)return".";var r=e.charCodeAt(0)===47,s=e.charCodeAt(e.length-1)===47;return e=Nt(e,!r),e.length===0&&!r&&(e="."),e.length>0&&s&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return j(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];j(s),s.length>0&&(e===void 0?e=s:e+="/"+s)}return e===void 0?".":ue.normalize(e)},relative:function(e,r){if(j(e),j(r),e===r||(e=ue.resolve(e),r=ue.resolve(r),e===r))return"";for(var s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var n=e.length,i=n-s,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var a=r.length,u=a-o,l=i<u?i:u,c=-1,h=0;h<=l;++h){if(h===l){if(u>l){if(r.charCodeAt(o+h)===47)return r.slice(o+h+1);if(h===0)return r.slice(o+h)}else i>l&&(e.charCodeAt(s+h)===47?c=h:h===0&&(c=0));break}var f=e.charCodeAt(s+h),b=r.charCodeAt(o+h);if(f!==b)break;f===47&&(c=h)}var A="";for(h=s+c+1;h<=n;++h)(h===n||e.charCodeAt(h)===47)&&(A.length===0?A+="..":A+="/..");return A.length>0?A+r.slice(o+c):(o+=c,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(j(e),e.length===0)return".";for(var r=e.charCodeAt(0),s=r===47,n=-1,i=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!i){n=o;break}}else i=!1;return n===-1?s?"/":".":s&&n===1?"//":e.slice(0,n)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');j(e);var s=0,n=-1,i=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,u=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!i){s=o+1;break}}else u===-1&&(i=!1,u=o+1),a>=0&&(l===r.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=u))}return s===n?n=u:n===-1&&(n=e.length),e.slice(s,n)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){s=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":e.slice(s,n)}},extname:function(e){j(e);for(var r=-1,s=0,n=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!i){s=a+1;break}continue}n===-1&&(i=!1,n=a+1),u===46?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||n===-1||o===0||o===1&&r===n-1&&r===s+1?"":e.slice(r,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Ur("/",e)},parse:function(e){j(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var s=e.charCodeAt(0),n=s===47,i;n?(r.root="/",i=1):i=0;for(var o=-1,a=0,u=-1,l=!0,c=e.length-1,h=0;c>=i;--c){if(s=e.charCodeAt(c),s===47){if(!l){a=c+1;break}continue}u===-1&&(l=!1,u=c+1),s===46?o===-1?o=c:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||u===-1||h===0||h===1&&o===u-1&&o===a+1?u!==-1&&(a===0&&n?r.base=r.name=e.slice(1,u):r.base=r.name=e.slice(a,u)):(a===0&&n?(r.name=e.slice(1,o),r.base=e.slice(1,u)):(r.name=e.slice(a,o),r.base=e.slice(a,u)),r.ext=e.slice(o,u)),a>0?r.dir=e.slice(0,a-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};ue.posix=ue;var Ie=ue,fe={};const Xr=Ie,Z="\\\\/",vt=`[^${Z}]`,D="\\.",Kr="\\+",Vr="\\?",me="\\/",Wr="(?=.)",wt="[^/]",Pe=`(?:${me}|$)`,xt=`(?:^|${me})`,Fe=`${D}{1,2}${Pe}`,zr=`(?!${D})`,jr=`(?!${xt}${Fe})`,Zr=`(?!${D}{0,1}${Pe})`,Qr=`(?!${Fe})`,qr=`[^.${me}]`,Yr=`${wt}*?`,St={DOT_LITERAL:D,PLUS_LITERAL:Kr,QMARK_LITERAL:Vr,SLASH_LITERAL:me,ONE_CHAR:Wr,QMARK:wt,END_ANCHOR:Pe,DOTS_SLASH:Fe,NO_DOT:zr,NO_DOTS:jr,NO_DOT_SLASH:Zr,NO_DOTS_SLASH:Qr,QMARK_NO_DOT:qr,STAR:Yr,START_ANCHOR:xt},Jr={...St,SLASH_LITERAL:`[${Z}]`,QMARK:vt,STAR:`${vt}*?`,DOTS_SLASH:`${D}{1,2}(?:[${Z}]|$)`,NO_DOT:`(?!${D})`,NO_DOTS:`(?!(?:^|[${Z}])${D}{1,2}(?:[${Z}]|$))`,NO_DOT_SLASH:`(?!${D}{0,1}(?:[${Z}]|$))`,NO_DOTS_SLASH:`(?!${D}{1,2}(?:[${Z}]|$))`,QMARK_NO_DOT:`[^.${Z}]`,START_ANCHOR:`(?:^|[${Z}])`,END_ANCHOR:`(?:[${Z}]|$)`},Dr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var Re={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Dr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:Xr.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Jr:St}};(function(t){const e=Ie,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:n,REGEX_SPECIAL_CHARS_GLOBAL:i}=Re;t.isObject=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t.hasRegexChars=o=>n.test(o),t.isRegexChar=o=>o.length===1&&t.hasRegexChars(o),t.escapeRegex=o=>o.replace(i,"\\$1"),t.toPosixSlashes=o=>o.replace(r,"/"),t.removeBackslashes=o=>o.replace(s,a=>a==="\\"?"":a),t.supportsLookbehinds=()=>{const o=process.version.slice(1).split(".").map(Number);return o.length===3&&o[0]>=9||o[0]===8&&o[1]>=10},t.isWindows=o=>o&&typeof o.windows=="boolean"?o.windows:e.sep==="\\",t.escapeLast=(o,a,u)=>{const l=o.lastIndexOf(a,u);return l===-1?o:o[l-1]==="\\"?t.escapeLast(o,a,l-1):`${o.slice(0,l)}\\${o.slice(l)}`},t.removePrefix=(o,a={})=>{let u=o;return u.startsWith("./")&&(u=u.slice(2),a.prefix="./"),u},t.wrapOutput=(o,a={},u={})=>{const l=u.contains?"":"^",c=u.contains?"":"$";let h=`${l}(?:${o})${c}`;return a.negated===!0&&(h=`(?:^(?!${h}).*$)`),h}})(fe);const $t=fe,{CHAR_ASTERISK:ke,CHAR_AT:en,CHAR_BACKWARD_SLASH:he,CHAR_COMMA:tn,CHAR_DOT:Me,CHAR_EXCLAMATION_MARK:Be,CHAR_FORWARD_SLASH:Tt,CHAR_LEFT_CURLY_BRACE:Ge,CHAR_LEFT_PARENTHESES:Ue,CHAR_LEFT_SQUARE_BRACKET:rn,CHAR_PLUS:nn,CHAR_QUESTION_MARK:Ot,CHAR_RIGHT_CURLY_BRACE:sn,CHAR_RIGHT_PARENTHESES:Ht,CHAR_RIGHT_SQUARE_BRACKET:on}=Re,Lt=t=>t===Tt||t===he,It=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)};var an=(t,e)=>{const r=e||{},s=t.length-1,n=r.parts===!0||r.scanToEnd===!0,i=[],o=[],a=[];let u=t,l=-1,c=0,h=0,f=!1,b=!1,A=!1,E=!1,_=!1,w=!1,M=!1,$=!1,q=!1,B=!1,te=0,U,R,x={value:"",depth:0,isGlob:!1};const k=()=>l>=s,g=()=>u.charCodeAt(l+1),H=()=>(U=R,u.charCodeAt(++l));for(;l<s;){R=H();let X;if(R===he){M=x.backslashes=!0,R=H(),R===Ge&&(w=!0);continue}if(w===!0||R===Ge){for(te++;k()!==!0&&(R=H());){if(R===he){M=x.backslashes=!0,H();continue}if(R===Ge){te++;continue}if(w!==!0&&R===Me&&(R=H())===Me){if(f=x.isBrace=!0,A=x.isGlob=!0,B=!0,n===!0)continue;break}if(w!==!0&&R===tn){if(f=x.isBrace=!0,A=x.isGlob=!0,B=!0,n===!0)continue;break}if(R===sn&&(te--,te===0)){w=!1,f=x.isBrace=!0,B=!0;break}}if(n===!0)continue;break}if(R===Tt){if(i.push(l),o.push(x),x={value:"",depth:0,isGlob:!1},B===!0)continue;if(U===Me&&l===c+1){c+=2;continue}h=l+1;continue}if(r.noext!==!0&&(R===nn||R===en||R===ke||R===Ot||R===Be)===!0&&g()===Ue){if(A=x.isGlob=!0,E=x.isExtglob=!0,B=!0,R===Be&&l===c&&(q=!0),n===!0){for(;k()!==!0&&(R=H());){if(R===he){M=x.backslashes=!0,R=H();continue}if(R===Ht){A=x.isGlob=!0,B=!0;break}}continue}break}if(R===ke){if(U===ke&&(_=x.isGlobstar=!0),A=x.isGlob=!0,B=!0,n===!0)continue;break}if(R===Ot){if(A=x.isGlob=!0,B=!0,n===!0)continue;break}if(R===rn){for(;k()!==!0&&(X=H());){if(X===he){M=x.backslashes=!0,H();continue}if(X===on){b=x.isBracket=!0,A=x.isGlob=!0,B=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&R===Be&&l===c){$=x.negated=!0,c++;continue}if(r.noparen!==!0&&R===Ue){if(A=x.isGlob=!0,n===!0){for(;k()!==!0&&(R=H());){if(R===Ue){M=x.backslashes=!0,R=H();continue}if(R===Ht){B=!0;break}}continue}break}if(A===!0){if(B=!0,n===!0)continue;break}}r.noext===!0&&(E=!1,A=!1);let T=u,re="",p="";c>0&&(re=u.slice(0,c),u=u.slice(c),h-=c),T&&A===!0&&h>0?(T=u.slice(0,h),p=u.slice(h)):A===!0?(T="",p=u):T=u,T&&T!==""&&T!=="/"&&T!==u&&Lt(T.charCodeAt(T.length-1))&&(T=T.slice(0,-1)),r.unescape===!0&&(p&&(p=$t.removeBackslashes(p)),T&&M===!0&&(T=$t.removeBackslashes(T)));const d={prefix:re,input:t,start:c,base:T,glob:p,isBrace:f,isBracket:b,isGlob:A,isExtglob:E,isGlobstar:_,negated:$,negatedExtglob:q};if(r.tokens===!0&&(d.maxDepth=0,Lt(R)||o.push(x),d.tokens=o),r.parts===!0||r.tokens===!0){let X;for(let v=0;v<i.length;v++){const Y=X?X+1:c,J=i[v],z=t.slice(Y,J);r.tokens&&(v===0&&c!==0?(o[v].isPrefix=!0,o[v].value=re):o[v].value=z,It(o[v]),d.maxDepth+=o[v].depth),(v!==0||z!=="")&&a.push(z),X=J}if(X&&X+1<t.length){const v=t.slice(X+1);a.push(v),r.tokens&&(o[o.length-1].value=v,It(o[o.length-1]),d.maxDepth+=o[o.length-1].depth)}d.slashes=i,d.parts=a}return d};const _e=Re,W=fe,{MAX_LENGTH:Ce,POSIX_REGEX_SOURCE:un,REGEX_NON_SPECIAL_CHARS:ln,REGEX_SPECIAL_CHARS_BACKREF:cn,REPLACEMENTS:Pt}=_e,fn=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(n=>W.escapeRegex(n)).join("..")}return r},le=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Xe=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Pt[t]||t;const r={...e},s=typeof r.maxLength=="number"?Math.min(Ce,r.maxLength):Ce;let n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);const i={type:"bos",value:"",output:r.prepend||""},o=[i],a=r.capture?"":"?:",u=W.isWindows(e),l=_e.globChars(u),c=_e.extglobChars(l),{DOT_LITERAL:h,PLUS_LITERAL:f,SLASH_LITERAL:b,ONE_CHAR:A,DOTS_SLASH:E,NO_DOT:_,NO_DOT_SLASH:w,NO_DOTS_SLASH:M,QMARK:$,QMARK_NO_DOT:q,STAR:B,START_ANCHOR:te}=l,U=m=>`(${a}(?:(?!${te}${m.dot?E:h}).)*?)`,R=r.dot?"":_,x=r.dot?$:q;let k=r.bash===!0?U(r):B;r.capture&&(k=`(${k})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const g={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:o};t=W.removePrefix(t,g),n=t.length;const H=[],T=[],re=[];let p=i,d;const X=()=>g.index===n-1,v=g.peek=(m=1)=>t[g.index+m],Y=g.advance=()=>t[++g.index]||"",J=()=>t.slice(g.index+1),z=(m="",O=0)=>{g.consumed+=m,g.index+=O},ve=m=>{g.output+=m.output!=null?m.output:m.value,z(m.value)},Bs=()=>{let m=1;for(;v()==="!"&&(v(2)!=="("||v(3)==="?");)Y(),g.start++,m++;return m%2===0?!1:(g.negated=!0,g.start++,!0)},we=m=>{g[m]++,re.push(m)},oe=m=>{g[m]--,re.pop()},N=m=>{if(p.type==="globstar"){const O=g.braces>0&&(m.type==="comma"||m.type==="brace"),y=m.extglob===!0||H.length&&(m.type==="pipe"||m.type==="paren");m.type!=="slash"&&m.type!=="paren"&&!O&&!y&&(g.output=g.output.slice(0,-p.output.length),p.type="star",p.value="*",p.output=k,g.output+=p.output)}if(H.length&&m.type!=="paren"&&(H[H.length-1].inner+=m.value),(m.value||m.output)&&ve(m),p&&p.type==="text"&&m.type==="text"){p.value+=m.value,p.output=(p.output||"")+m.value;return}m.prev=p,o.push(m),p=m},xe=(m,O)=>{const y={...c[O],conditions:1,inner:""};y.prev=p,y.parens=g.parens,y.output=g.output;const C=(r.capture?"(":"")+y.open;we("parens"),N({type:m,value:O,output:g.output?"":A}),N({type:"paren",extglob:!0,value:Y(),output:C}),H.push(y)},Gs=m=>{let O=m.close+(r.capture?")":""),y;if(m.type==="negate"){let C=k;if(m.inner&&m.inner.length>1&&m.inner.includes("/")&&(C=U(r)),(C!==k||X()||/^\)+$/.test(J()))&&(O=m.close=`)$))${C}`),m.inner.includes("*")&&(y=J())&&/^\.[^\\/.]+$/.test(y)){const L=Xe(y,{...e,fastpaths:!1}).output;O=m.close=`)${L})${C})`}m.prev.type==="bos"&&(g.negatedExtglob=!0)}N({type:"paren",extglob:!0,value:d,output:O}),oe("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let m=!1,O=t.replace(cn,(y,C,L,K,F,et)=>K==="\\"?(m=!0,y):K==="?"?C?C+K+(F?$.repeat(F.length):""):et===0?x+(F?$.repeat(F.length):""):$.repeat(L.length):K==="."?h.repeat(L.length):K==="*"?C?C+K+(F?k:""):k:C?y:`\\${y}`);return m===!0&&(r.unescape===!0?O=O.replace(/\\/g,""):O=O.replace(/\\+/g,y=>y.length%2===0?"\\\\":y?"\\":"")),O===t&&r.contains===!0?(g.output=t,g):(g.output=W.wrapOutput(O,g,e),g)}for(;!X();){if(d=Y(),d==="\0")continue;if(d==="\\"){const y=v();if(y==="/"&&r.bash!==!0||y==="."||y===";")continue;if(!y){d+="\\",N({type:"text",value:d});continue}const C=/^\\+/.exec(J());let L=0;if(C&&C[0].length>2&&(L=C[0].length,g.index+=L,L%2!==0&&(d+="\\")),r.unescape===!0?d=Y():d+=Y(),g.brackets===0){N({type:"text",value:d});continue}}if(g.brackets>0&&(d!=="]"||p.value==="["||p.value==="[^")){if(r.posix!==!1&&d===":"){const y=p.value.slice(1);if(y.includes("[")&&(p.posix=!0,y.includes(":"))){const C=p.value.lastIndexOf("["),L=p.value.slice(0,C),K=p.value.slice(C+2),F=un[K];if(F){p.value=L+F,g.backtrack=!0,Y(),!i.output&&o.indexOf(p)===1&&(i.output=A);continue}}}(d==="["&&v()!==":"||d==="-"&&v()==="]")&&(d=`\\${d}`),d==="]"&&(p.value==="["||p.value==="[^")&&(d=`\\${d}`),r.posix===!0&&d==="!"&&p.value==="["&&(d="^"),p.value+=d,ve({value:d});continue}if(g.quotes===1&&d!=='"'){d=W.escapeRegex(d),p.value+=d,ve({value:d});continue}if(d==='"'){g.quotes=g.quotes===1?0:1,r.keepQuotes===!0&&N({type:"text",value:d});continue}if(d==="("){we("parens"),N({type:"paren",value:d});continue}if(d===")"){if(g.parens===0&&r.strictBrackets===!0)throw new SyntaxError(le("opening","("));const y=H[H.length-1];if(y&&g.parens===y.parens+1){Gs(H.pop());continue}N({type:"paren",value:d,output:g.parens?")":"\\)"}),oe("parens");continue}if(d==="["){if(r.nobracket===!0||!J().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(le("closing","]"));d=`\\${d}`}else we("brackets");N({type:"bracket",value:d});continue}if(d==="]"){if(r.nobracket===!0||p&&p.type==="bracket"&&p.value.length===1){N({type:"text",value:d,output:`\\${d}`});continue}if(g.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(le("opening","["));N({type:"text",value:d,output:`\\${d}`});continue}oe("brackets");const y=p.value.slice(1);if(p.posix!==!0&&y[0]==="^"&&!y.includes("/")&&(d=`/${d}`),p.value+=d,ve({value:d}),r.literalBrackets===!1||W.hasRegexChars(y))continue;const C=W.escapeRegex(p.value);if(g.output=g.output.slice(0,-p.value.length),r.literalBrackets===!0){g.output+=C,p.value=C;continue}p.value=`(${a}${C}|${p.value})`,g.output+=p.value;continue}if(d==="{"&&r.nobrace!==!0){we("braces");const y={type:"brace",value:d,output:"(",outputIndex:g.output.length,tokensIndex:g.tokens.length};T.push(y),N(y);continue}if(d==="}"){const y=T[T.length-1];if(r.nobrace===!0||!y){N({type:"text",value:d,output:d});continue}let C=")";if(y.dots===!0){const L=o.slice(),K=[];for(let F=L.length-1;F>=0&&(o.pop(),L[F].type!=="brace");F--)L[F].type!=="dots"&&K.unshift(L[F].value);C=fn(K,r),g.backtrack=!0}if(y.comma!==!0&&y.dots!==!0){const L=g.output.slice(0,y.outputIndex),K=g.tokens.slice(y.tokensIndex);y.value=y.output="\\{",d=C="\\}",g.output=L;for(const F of K)g.output+=F.output||F.value}N({type:"brace",value:d,output:C}),oe("braces"),T.pop();continue}if(d==="|"){H.length>0&&H[H.length-1].conditions++,N({type:"text",value:d});continue}if(d===","){let y=d;const C=T[T.length-1];C&&re[re.length-1]==="braces"&&(C.comma=!0,y="|"),N({type:"comma",value:d,output:y});continue}if(d==="/"){if(p.type==="dot"&&g.index===g.start+1){g.start=g.index+1,g.consumed="",g.output="",o.pop(),p=i;continue}N({type:"slash",value:d,output:b});continue}if(d==="."){if(g.braces>0&&p.type==="dot"){p.value==="."&&(p.output=h);const y=T[T.length-1];p.type="dots",p.output+=d,p.value+=d,y.dots=!0;continue}if(g.braces+g.parens===0&&p.type!=="bos"&&p.type!=="slash"){N({type:"text",value:d,output:h});continue}N({type:"dot",value:d,output:h});continue}if(d==="?"){if(!(p&&p.value==="(")&&r.noextglob!==!0&&v()==="("&&v(2)!=="?"){xe("qmark",d);continue}if(p&&p.type==="paren"){const C=v();let L=d;if(C==="<"&&!W.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(p.value==="("&&!/[!=<:]/.test(C)||C==="<"&&!/<([!=]|\w+>)/.test(J()))&&(L=`\\${d}`),N({type:"text",value:d,output:L});continue}if(r.dot!==!0&&(p.type==="slash"||p.type==="bos")){N({type:"qmark",value:d,output:q});continue}N({type:"qmark",value:d,output:$});continue}if(d==="!"){if(r.noextglob!==!0&&v()==="("&&(v(2)!=="?"||!/[!=<:]/.test(v(3)))){xe("negate",d);continue}if(r.nonegate!==!0&&g.index===0){Bs();continue}}if(d==="+"){if(r.noextglob!==!0&&v()==="("&&v(2)!=="?"){xe("plus",d);continue}if(p&&p.value==="("||r.regex===!1){N({type:"plus",value:d,output:f});continue}if(p&&(p.type==="bracket"||p.type==="paren"||p.type==="brace")||g.parens>0){N({type:"plus",value:d});continue}N({type:"plus",value:f});continue}if(d==="@"){if(r.noextglob!==!0&&v()==="("&&v(2)!=="?"){N({type:"at",extglob:!0,value:d,output:""});continue}N({type:"text",value:d});continue}if(d!=="*"){(d==="$"||d==="^")&&(d=`\\${d}`);const y=ln.exec(J());y&&(d+=y[0],g.index+=y[0].length),N({type:"text",value:d});continue}if(p&&(p.type==="globstar"||p.star===!0)){p.type="star",p.star=!0,p.value+=d,p.output=k,g.backtrack=!0,g.globstar=!0,z(d);continue}let m=J();if(r.noextglob!==!0&&/^\([^?]/.test(m)){xe("star",d);continue}if(p.type==="star"){if(r.noglobstar===!0){z(d);continue}const y=p.prev,C=y.prev,L=y.type==="slash"||y.type==="bos",K=C&&(C.type==="star"||C.type==="globstar");if(r.bash===!0&&(!L||m[0]&&m[0]!=="/")){N({type:"star",value:d,output:""});continue}const F=g.braces>0&&(y.type==="comma"||y.type==="brace"),et=H.length&&(y.type==="pipe"||y.type==="paren");if(!L&&y.type!=="paren"&&!F&&!et){N({type:"star",value:d,output:""});continue}for(;m.slice(0,3)==="/**";){const Se=t[g.index+4];if(Se&&Se!=="/")break;m=m.slice(3),z("/**",3)}if(y.type==="bos"&&X()){p.type="globstar",p.value+=d,p.output=U(r),g.output=p.output,g.globstar=!0,z(d);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&!K&&X()){g.output=g.output.slice(0,-(y.output+p.output).length),y.output=`(?:${y.output}`,p.type="globstar",p.output=U(r)+(r.strictSlashes?")":"|$)"),p.value+=d,g.globstar=!0,g.output+=y.output+p.output,z(d);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&m[0]==="/"){const Se=m[1]!==void 0?"|$":"";g.output=g.output.slice(0,-(y.output+p.output).length),y.output=`(?:${y.output}`,p.type="globstar",p.output=`${U(r)}${b}|${b}${Se})`,p.value+=d,g.output+=y.output+p.output,g.globstar=!0,z(d+Y()),N({type:"slash",value:"/",output:""});continue}if(y.type==="bos"&&m[0]==="/"){p.type="globstar",p.value+=d,p.output=`(?:^|${b}|${U(r)}${b})`,g.output=p.output,g.globstar=!0,z(d+Y()),N({type:"slash",value:"/",output:""});continue}g.output=g.output.slice(0,-p.output.length),p.type="globstar",p.output=U(r),p.value+=d,g.output+=p.output,g.globstar=!0,z(d);continue}const O={type:"star",value:d,output:k};if(r.bash===!0){O.output=".*?",(p.type==="bos"||p.type==="slash")&&(O.output=R+O.output),N(O);continue}if(p&&(p.type==="bracket"||p.type==="paren")&&r.regex===!0){O.output=d,N(O);continue}(g.index===g.start||p.type==="slash"||p.type==="dot")&&(p.type==="dot"?(g.output+=w,p.output+=w):r.dot===!0?(g.output+=M,p.output+=M):(g.output+=R,p.output+=R),v()!=="*"&&(g.output+=A,p.output+=A)),N(O)}for(;g.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(le("closing","]"));g.output=W.escapeLast(g.output,"["),oe("brackets")}for(;g.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(le("closing",")"));g.output=W.escapeLast(g.output,"("),oe("parens")}for(;g.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(le("closing","}"));g.output=W.escapeLast(g.output,"{"),oe("braces")}if(r.strictSlashes!==!0&&(p.type==="star"||p.type==="bracket")&&N({type:"maybe_slash",value:"",output:`${b}?`}),g.backtrack===!0){g.output="";for(const m of g.tokens)g.output+=m.output!=null?m.output:m.value,m.suffix&&(g.output+=m.suffix)}return g};Xe.fastpaths=(t,e)=>{const r={...e},s=typeof r.maxLength=="number"?Math.min(Ce,r.maxLength):Ce,n=t.length;if(n>s)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${s}`);t=Pt[t]||t;const i=W.isWindows(e),{DOT_LITERAL:o,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:l,NO_DOT:c,NO_DOTS:h,NO_DOTS_SLASH:f,STAR:b,START_ANCHOR:A}=_e.globChars(i),E=r.dot?h:c,_=r.dot?f:c,w=r.capture?"":"?:",M={negated:!1,prefix:""};let $=r.bash===!0?".*?":b;r.capture&&($=`(${$})`);const q=R=>R.noglobstar===!0?$:`(${w}(?:(?!${A}${R.dot?l:o}).)*?)`,B=R=>{switch(R){case"*":return`${E}${u}${$}`;case".*":return`${o}${u}${$}`;case"*.*":return`${E}${$}${o}${u}${$}`;case"*/*":return`${E}${$}${a}${u}${_}${$}`;case"**":return E+q(r);case"**/*":return`(?:${E}${q(r)}${a})?${_}${u}${$}`;case"**/*.*":return`(?:${E}${q(r)}${a})?${_}${$}${o}${u}${$}`;case"**/.*":return`(?:${E}${q(r)}${a})?${o}${u}${$}`;default:{const x=/^(.*?)\.(\w+)$/.exec(R);if(!x)return;const k=B(x[1]);return k?k+o+x[2]:void 0}}},te=W.removePrefix(t,M);let U=B(te);return U&&r.strictSlashes!==!0&&(U+=`${a}?`),U};var hn=Xe;const pn=Ie,dn=an,Ke=hn,Ve=fe,gn=Re,An=t=>t&&typeof t=="object"&&!Array.isArray(t),I=(t,e,r=!1)=>{if(Array.isArray(t)){const c=t.map(f=>I(f,e,r));return f=>{for(const b of c){const A=b(f);if(A)return A}return!1}}const s=An(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");const n=e||{},i=Ve.isWindows(e),o=s?I.compileRe(t,e):I.makeRe(t,e,!1,!0),a=o.state;delete o.state;let u=()=>!1;if(n.ignore){const c={...e,ignore:null,onMatch:null,onResult:null};u=I(n.ignore,c,r)}const l=(c,h=!1)=>{const{isMatch:f,match:b,output:A}=I.test(c,o,e,{glob:t,posix:i}),E={glob:t,state:a,regex:o,posix:i,input:c,output:A,match:b,isMatch:f};return typeof n.onResult=="function"&&n.onResult(E),f===!1?(E.isMatch=!1,h?E:!1):u(c)?(typeof n.onIgnore=="function"&&n.onIgnore(E),E.isMatch=!1,h?E:!1):(typeof n.onMatch=="function"&&n.onMatch(E),h?E:!0)};return r&&(l.state=a),l};I.test=(t,e,r,{glob:s,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const i=r||{},o=i.format||(n?Ve.toPosixSlashes:null);let a=t===s,u=a&&o?o(t):t;return a===!1&&(u=o?o(t):t,a=u===s),(a===!1||i.capture===!0)&&(i.matchBase===!0||i.basename===!0?a=I.matchBase(t,e,r,n):a=e.exec(u)),{isMatch:!!a,match:a,output:u}},I.matchBase=(t,e,r,s=Ve.isWindows(r))=>(e instanceof RegExp?e:I.makeRe(e,r)).test(pn.basename(t)),I.isMatch=(t,e,r)=>I(e,r)(t),I.parse=(t,e)=>Array.isArray(t)?t.map(r=>I.parse(r,e)):Ke(t,{...e,fastpaths:!1}),I.scan=(t,e)=>dn(t,e),I.compileRe=(t,e,r=!1,s=!1)=>{if(r===!0)return t.output;const n=e||{},i=n.contains?"":"^",o=n.contains?"":"$";let a=`${i}(?:${t.output})${o}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);const u=I.toRegex(a,e);return s===!0&&(u.state=t),u},I.makeRe=(t,e={},r=!1,s=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=Ke.fastpaths(t,e)),n.output||(n=Ke(t,e)),I.compileRe(n,e,r,s)},I.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}},I.constants=gn;var bn=I,yn=bn;const Ft=rt,kt=Gr,Q=yn,We=fe,Mt=t=>t===""||t==="./",Bt=t=>{const e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},S=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let s=new Set,n=new Set,i=new Set,o=0,a=c=>{i.add(c.output),r&&r.onResult&&r.onResult(c)};for(let c=0;c<e.length;c++){let h=Q(String(e[c]),{...r,onResult:a},!0),f=h.state.negated||h.state.negatedExtglob;f&&o++;for(let b of t){let A=h(b,!0);(f?!A.isMatch:A.isMatch)&&(f?s.add(A.output):(s.delete(A.output),n.add(A.output)))}}let l=(o===e.length?[...i]:[...n]).filter(c=>!s.has(c));if(r&&l.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(c=>c.replace(/\\/g,"")):e}return l};S.match=S,S.matcher=(t,e)=>Q(t,e),S.isMatch=(t,e,r)=>Q(e,r)(t),S.any=S.isMatch,S.not=(t,e,r={})=>{e=[].concat(e).map(String);let s=new Set,n=[],i=a=>{r.onResult&&r.onResult(a),n.push(a.output)},o=new Set(S(t,e,{...r,onResult:i}));for(let a of n)o.has(a)||s.add(a);return[...s]},S.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Ft.inspect(t)}"`);if(Array.isArray(e))return e.some(s=>S.contains(t,s,r));if(typeof e=="string"){if(Mt(t)||Mt(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return S.isMatch(t,e,{...r,contains:!0})},S.matchKeys=(t,e,r)=>{if(!We.isObject(t))throw new TypeError("Expected the first argument to be an object");let s=S(Object.keys(t),e,r),n={};for(let i of s)n[i]=t[i];return n},S.some=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=Q(String(n),r);if(s.some(o=>i(o)))return!0}return!1},S.every=(t,e,r)=>{let s=[].concat(t);for(let n of[].concat(e)){let i=Q(String(n),r);if(!s.every(o=>i(o)))return!1}return!0},S.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${Ft.inspect(t)}"`);return[].concat(e).every(s=>Q(s,r)(t))},S.capture=(t,e,r)=>{let s=We.isWindows(r),i=Q.makeRe(String(t),{...r,capture:!0}).exec(s?We.toPosixSlashes(e):e);if(i)return i.slice(1).map(o=>o===void 0?"":o)},S.makeRe=(...t)=>Q.makeRe(...t),S.scan=(...t)=>Q.scan(...t),S.parse=(t,e)=>{let r=[];for(let s of[].concat(t||[]))for(let n of kt(String(s),e))r.push(Q.parse(n,e));return r},S.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!Bt(t)?[t]:kt(t,e)},S.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return S.braces(t,{...e,expand:!0})},S.hasBraces=Bt;var En=S,pe=tt(En),ze={},Ne={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s="["+e+"]["+r+"]*",n=new RegExp("^"+s+"$"),i=function(a,u){const l=[];let c=u.exec(a);for(;c;){const h=[];h.startIndex=u.lastIndex-c[0].length;const f=c.length;for(let b=0;b<f;b++)h.push(c[b]);l.push(h),c=u.exec(a)}return l},o=function(a){const u=n.exec(a);return!(u===null||typeof u>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,u,l){if(u){const c=Object.keys(u),h=c.length;for(let f=0;f<h;f++)l==="strict"?a[c[f]]=[u[c[f]]]:a[c[f]]=u[c[f]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=o,t.getAllMatches=i,t.nameRegexp=s})(Ne);const je=Ne,mn={allowBooleanAttributes:!1,unpairedTags:[]};ze.validate=function(t,e){e=Object.assign({},mn,e);const r=[];let s=!1,n=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=Ut(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=Xt(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let u="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)u+=t[i];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),i--),!Sn(u)){let h;return u.trim().length===0?h="Invalid space after '<'.":h="Tag '"+u+"' is an invalid name.",P("InvalidTag",h,G(t,i))}const l=Cn(t,i);if(l===!1)return P("InvalidAttr","Attributes for '"+u+"' have open quote.",G(t,i));let c=l.value;if(i=l.index,c[c.length-1]==="/"){const h=i-c.length;c=c.substring(0,c.length-1);const f=Kt(c,e);if(f===!0)s=!0;else return P(f.err.code,f.err.msg,G(t,h+f.err.line))}else if(a)if(l.tagClosed){if(c.trim().length>0)return P("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",G(t,o));if(r.length===0)return P("InvalidTag","Closing tag '"+u+"' has not been opened.",G(t,o));{const h=r.pop();if(u!==h.tagName){let f=G(t,h.tagStartPos);return P("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+u+"'.",G(t,o))}r.length==0&&(n=!0)}}else return P("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",G(t,i));else{const h=Kt(c,e);if(h!==!0)return P(h.err.code,h.err.msg,G(t,i-c.length+h.err.line));if(n===!0)return P("InvalidXml","Multiple possible root nodes found.",G(t,i));e.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:o}),s=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=Xt(t,i);continue}else if(t[i+1]==="?"){if(i=Ut(t,++i),i.err)return i}else break;else if(t[i]==="&"){const h=wn(t,i);if(h==-1)return P("InvalidChar","char '&' is not expected.",G(t,i));i=h}else if(n===!0&&!Gt(t[i]))return P("InvalidXml","Extra text at the end",G(t,i));t[i]==="<"&&i--}}else{if(Gt(t[i]))continue;return P("InvalidChar","char '"+t[i]+"' is not expected.",G(t,i))}if(s){if(r.length==1)return P("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",G(t,r[0].tagStartPos));if(r.length>0)return P("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return P("InvalidXml","Start tag expected.",1);return!0};function Gt(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Ut(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const s=t.substr(r,e-r);if(e>5&&s==="xml")return P("InvalidXml","XML declaration allowed only at the start of the document.",G(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Xt(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const Rn='"',_n="'";function Cn(t,e){let r="",s="",n=!1;for(;e<t.length;e++){if(t[e]===Rn||t[e]===_n)s===""?s=t[e]:s!==t[e]||(s="");else if(t[e]===">"&&s===""){n=!0;break}r+=t[e]}return s!==""?!1:{value:r,index:e,tagClosed:n}}const Nn=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Kt(t,e){const r=je.getAllMatches(t,Nn),s={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return P("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",de(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return P("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",de(r[n]));if(r[n][3]===void 0&&!e.allowBooleanAttributes)return P("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",de(r[n]));const i=r[n][2];if(!xn(i))return P("InvalidAttr","Attribute '"+i+"' is an invalid name.",de(r[n]));if(!s.hasOwnProperty(i))s[i]=1;else return P("InvalidAttr","Attribute '"+i+"' is repeated.",de(r[n]))}return!0}function vn(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function wn(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,vn(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function P(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function xn(t){return je.isName(t)}function Sn(t){return je.isName(t)}function G(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function de(t){return t.startIndex+t[1].length}var Ze={};const Vt={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},$n=function(t){return Object.assign({},Vt,t)};Ze.buildOptions=$n,Ze.defaultOptions=Vt;class Tn{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var On=Tn;const Hn=Ne;function Ln(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let s=1,n=!1,i=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(n&&Fn(t,e))e+=7,[entityName,val,e]=In(t,e+1),val.indexOf("&")===-1&&(r[Gn(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(n&&kn(t,e))e+=8;else if(n&&Mn(t,e))e+=8;else if(n&&Bn(t,e))e+=9;else if(Pn)i=!0;else throw new Error("Invalid DOCTYPE");s++,o=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,s--):s--,s===0)break}else t[e]==="["?n=!0:o+=t[e];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function In(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const s=t[e++];let n="";for(;e<t.length&&t[e]!==s;e++)n+=t[e];return[r,n,e]}function Pn(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Fn(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function kn(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Mn(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Bn(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function Gn(t){if(Hn.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var Un=Ln;const Xn=/^[-+]?0x[a-fA-F0-9]+$/,Kn=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Vn={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Wn(t,e={}){if(e=Object.assign({},Vn,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&Xn.test(r))return Number.parseInt(r,16);{const s=Kn.exec(r);if(s){const n=s[1],i=s[2];let o=zn(s[3]);const a=s[4]||s[6];if(!e.leadingZeros&&i.length>0&&n&&r[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!n&&r[1]!==".")return t;{const u=Number(r),l=""+u;return l.search(/[eE]/)!==-1||a?e.eNotation?u:t:r.indexOf(".")!==-1?l==="0"&&o===""||l===o||n&&l==="-"+o?u:t:i?o===l||n+o===l?u:t:r===l||r===n+l?u:t}}else return t}}function zn(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var jn=Wn;const Wt=Ne,ge=On,Zn=Un,Qn=jn;let qn=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â¹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,s)=>String.fromCharCode(Number.parseInt(s,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,s)=>String.fromCharCode(Number.parseInt(s,16))}},this.addExternalEntities=Yn,this.parseXml=rs,this.parseTextData=Jn,this.resolveNameSpace=Dn,this.buildAttributesMap=ts,this.isItStopNode=os,this.replaceEntitiesValue=ss,this.readStopNodeData=us,this.saveTextToParentTag=is,this.addChild=ns}};function Yn(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const s=e[r];this.lastEntities[s]={regex:new RegExp("&"+s+";","g"),val:t[s]}}}function Jn(t,e,r,s,n,i,o){if(t!==void 0&&(this.options.trimValues&&!s&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,r,n,i);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?qe(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?qe(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Dn(t){if(this.options.removeNSPrefix){const e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}const es=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ts(t,e,r){if(!this.options.ignoreAttributes&&typeof t=="string"){const s=Wt.getAllMatches(t,es),n=s.length,i={};for(let o=0;o<n;o++){const a=this.resolveNameSpace(s[o][1]);let u=s[o][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);const c=this.options.attributeValueProcessor(a,u,e);c==null?i[l]=u:typeof c!=typeof u||c!==u?i[l]=c:i[l]=qe(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[l]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const rs=function(t){t=t.replace(/\r\n?/g,`
`);const e=new ge("!xml");let r=e,s="",n="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const a=ie(t,">",i,"Closing Tag is not closed.");let u=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){const h=u.indexOf(":");h!==-1&&(u=u.substr(h+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&(s=this.saveTextToParentTag(s,r,n));const l=n.substring(n.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let c=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(c=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=n.lastIndexOf("."),n=n.substring(0,c),r=this.tagsNodeStack.pop(),s="",i=a}else if(t[i+1]==="?"){let a=Qe(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(s=this.saveTextToParentTag(s,r,n),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const u=new ge(a.tagName);u.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(u[":@"]=this.buildAttributesMap(a.tagExp,n,a.tagName)),this.addChild(r,u,n)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const a=ie(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const u=t.substring(i+4,a-2);s=this.saveTextToParentTag(s,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}i=a}else if(t.substr(i+1,2)==="!D"){const a=Zn(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){const a=ie(t,"]]>",i,"CDATA is not closed.")-2,u=t.substring(i+9,a);s=this.saveTextToParentTag(s,r,n);let l=this.parseTextData(u,r.tagname,n,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]):r.add(this.options.textNodeName,l),i=a+2}else{let a=Qe(t,i,this.options.removeNSPrefix),u=a.tagName;const l=a.rawTagName;let c=a.tagExp,h=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),r&&s&&r.tagname!=="!xml"&&(s=this.saveTextToParentTag(s,r,n,!1));const b=r;if(b&&this.options.unpairedTags.indexOf(b.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),u!==e.tagname&&(n+=n?"."+u:u),this.isItStopNode(this.options.stopNodes,n,u)){let A="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)u[u.length-1]==="/"?(u=u.substr(0,u.length-1),n=n.substr(0,n.length-1),c=u):c=c.substr(0,c.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)i=a.closeIndex;else{const _=this.readStopNodeData(t,l,f+1);if(!_)throw new Error(`Unexpected end of ${l}`);i=_.i,A=_.tagContent}const E=new ge(u);u!==c&&h&&(E[":@"]=this.buildAttributesMap(c,n,u)),A&&(A=this.parseTextData(A,u,n,!0,h,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),E.add(this.options.textNodeName,A),this.addChild(r,E,n)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),n=n.substr(0,n.length-1),c=u):c=c.substr(0,c.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const A=new ge(u);u!==c&&h&&(A[":@"]=this.buildAttributesMap(c,n,u)),this.addChild(r,A,n),n=n.substr(0,n.lastIndexOf("."))}else{const A=new ge(u);this.tagsNodeStack.push(r),u!==c&&h&&(A[":@"]=this.buildAttributesMap(c,n,u)),this.addChild(r,A,n),r=A}s="",i=f}}else s+=t[i];return e.child};function ns(t,e,r){const s=this.options.updateTag(e.tagname,r,e[":@"]);s===!1||(typeof s=="string"&&(e.tagname=s),t.addChild(e))}const ss=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){const r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function is(t,e,r,s){return t&&(s===void 0&&(s=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,s),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function os(t,e,r){const s="*."+r;for(const n in t){const i=t[n];if(s===i||e===i)return!0}return!1}function as(t,e,r=">"){let s,n="";for(let i=e;i<t.length;i++){let o=t[i];if(s)o===s&&(s="");else if(o==='"'||o==="'")s=o;else if(o===r[0])if(r[1]){if(t[i+1]===r[1])return{data:n,index:i}}else return{data:n,index:i};else o==="	"&&(o=" ");n+=o}}function ie(t,e,r,s){const n=t.indexOf(e,r);if(n===-1)throw new Error(s);return n+e.length-1}function Qe(t,e,r,s=">"){const n=as(t,e+1,s);if(!n)return;let i=n.data;const o=n.index,a=i.search(/\s/);let u=i,l=!0;a!==-1&&(u=i.substring(0,a),i=i.substring(a+1).trimStart());const c=u;if(r){const h=u.indexOf(":");h!==-1&&(u=u.substr(h+1),l=u!==n.data.substr(h+1))}return{tagName:u,tagExp:i,closeIndex:o,attrExpPresent:l,rawTagName:c}}function us(t,e,r){const s=r;let n=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){const i=ie(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(n--,n===0))return{tagContent:t.substring(s,r),i};r=i}else if(t[r+1]==="?")r=ie(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=ie(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=ie(t,"]]>",r,"StopNode is not closed.")-2;else{const i=Qe(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&n++,r=i.closeIndex)}}function qe(t,e,r){if(e&&typeof t=="string"){const s=t.trim();return s==="true"?!0:s==="false"?!1:Qn(t,r)}else return Wt.isExist(t)?t:""}var ls=qn,zt={};function cs(t,e){return jt(t,e)}function jt(t,e,r){let s;const n={};for(let i=0;i<t.length;i++){const o=t[i],a=fs(o);let u="";if(r===void 0?u=a:u=r+"."+a,a===e.textNodeName)s===void 0?s=o[a]:s+=""+o[a];else{if(a===void 0)continue;if(o[a]){let l=jt(o[a],e,u);const c=ps(l,e);o[":@"]?hs(l,o[":@"],u,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),n[a]!==void 0&&n.hasOwnProperty(a)?(Array.isArray(n[a])||(n[a]=[n[a]]),n[a].push(l)):e.isArray(a,u,c)?n[a]=[l]:n[a]=l}}}return typeof s=="string"?s.length>0&&(n[e.textNodeName]=s):s!==void 0&&(n[e.textNodeName]=s),n}function fs(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const s=e[r];if(s!==":@")return s}}function hs(t,e,r,s){if(e){const n=Object.keys(e),i=n.length;for(let o=0;o<i;o++){const a=n[o];s.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function ps(t,e){const{textNodeName:r}=e,s=Object.keys(t).length;return!!(s===0||s===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}zt.prettify=cs;const{buildOptions:ds}=Ze,gs=ls,{prettify:As}=zt,bs=ze;var ys=class{constructor(e){this.externalEntities={},this.options=ds(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const i=bs.validate(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const s=new gs(this.options);s.addExternalEntities(this.externalEntities);const n=s.parseXml(e);return this.options.preserveOrder||n===void 0?n:As(n,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};const Es=`
`;function ms(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=Es),Zt(t,e,"",r)}function Zt(t,e,r,s){let n="",i=!1;for(let o=0;o<t.length;o++){const a=t[o],u=Rs(a);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===e.textNodeName){let A=a[u];_s(l,e)||(A=e.tagValueProcessor(u,A),A=qt(A,e)),i&&(n+=s),n+=A,i=!1;continue}else if(u===e.cdataPropName){i&&(n+=s),n+=`<![CDATA[${a[u][0][e.textNodeName]}]]>`,i=!1;continue}else if(u===e.commentPropName){n+=s+`<!--${a[u][0][e.textNodeName]}-->`,i=!0;continue}else if(u[0]==="?"){const A=Qt(a[":@"],e),E=u==="?xml"?"":s;let _=a[u][0][e.textNodeName];_=_.length!==0?" "+_:"",n+=E+`<${u}${_}${A}?>`,i=!0;continue}let c=s;c!==""&&(c+=e.indentBy);const h=Qt(a[":@"],e),f=s+`<${u}${h}`,b=Zt(a[u],e,l,c);e.unpairedTags.indexOf(u)!==-1?e.suppressUnpairedNode?n+=f+">":n+=f+"/>":(!b||b.length===0)&&e.suppressEmptyNode?n+=f+"/>":b&&b.endsWith(">")?n+=f+`>${b}${s}</${u}>`:(n+=f+">",b&&s!==""&&(b.includes("/>")||b.includes("</"))?n+=s+e.indentBy+b+s:n+=b,n+=`</${u}>`),i=!0}return n}function Rs(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const s=e[r];if(t.hasOwnProperty(s)&&s!==":@")return s}}function Qt(t,e){let r="";if(t&&!e.ignoreAttributes)for(let s in t){if(!t.hasOwnProperty(s))continue;let n=e.attributeValueProcessor(s,t[s]);n=qt(n,e),n===!0&&e.suppressBooleanAttributes?r+=` ${s.substr(e.attributeNamePrefix.length)}`:r+=` ${s.substr(e.attributeNamePrefix.length)}="${n}"`}return r}function _s(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let s in e.stopNodes)if(e.stopNodes[s]===t||e.stopNodes[s]==="*."+r)return!0;return!1}function qt(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const s=e.entities[r];t=t.replace(s.regex,s.val)}return t}var Cs=ms;const Ns=Cs,vs={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ee(t){this.options=Object.assign({},vs,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Ss),this.processTextOrObjNode=ws,this.options.format?(this.indentate=xs,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}ee.prototype.build=function(t){return this.options.preserveOrder?Ns(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)},ee.prototype.j2x=function(t,e){let r="",s="";for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n))if(typeof t[n]>"u")this.isAttribute(n)&&(s+="");else if(t[n]===null)this.isAttribute(n)?s+="":n[0]==="?"?s+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(t[n]instanceof Date)s+=this.buildTextValNode(t[n],n,"",e);else if(typeof t[n]!="object"){const i=this.isAttribute(n);if(i)r+=this.buildAttrPairStr(i,""+t[n]);else if(n===this.options.textNodeName){let o=this.options.tagValueProcessor(n,""+t[n]);s+=this.replaceEntitiesValue(o)}else s+=this.buildTextValNode(t[n],n,"",e)}else if(Array.isArray(t[n])){const i=t[n].length;let o="",a="";for(let u=0;u<i;u++){const l=t[n][u];if(!(typeof l>"u"))if(l===null)n[0]==="?"?s+=this.indentate(e)+"<"+n+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){const c=this.j2x(l,e+1);o+=c.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(a+=c.attrStr)}else o+=this.processTextOrObjNode(l,n,e);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(n,l);c=this.replaceEntitiesValue(c),o+=c}else o+=this.buildTextValNode(l,n,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,n,a,e)),s+=o}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){const i=Object.keys(t[n]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+t[n][i[a]])}else s+=this.processTextOrObjNode(t[n],n,e);return{attrStr:r,val:s}},ee.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function ws(t,e,r){const s=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,s.attrStr,r):this.buildObjectNode(s.val,e,s.attrStr,r)}ee.prototype.buildObjectNode=function(t,e,r,s){if(t==="")return e[0]==="?"?this.indentate(s)+"<"+e+r+"?"+this.tagEndChar:this.indentate(s)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let n="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",n=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(s)+"<"+e+r+i+">"+t+n:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(s)+`<!--${t}-->`+this.newLine:this.indentate(s)+"<"+e+r+i+this.tagEndChar+t+this.indentate(s)+n}},ee.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e},ee.prototype.buildTextValNode=function(t,e,r,s){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(s)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(s)+"<"+e+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(e,t);return n=this.replaceEntitiesValue(n),n===""?this.indentate(s)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(s)+"<"+e+r+">"+n+"</"+e+this.tagEndChar}},ee.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function xs(t){return this.options.indentBy.repeat(t)}function Ss(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var $s=ee,Ts={XMLParser:ys,XMLValidator:ze,XMLBuilder:$s},Os=function t(e,r){var s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,n=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,a=/^0/,u=function($){return t.insensitive&&(""+$).toLowerCase()||""+$},l=u(e).replace(n,"")||"",c=u(r).replace(n,"")||"",h=l.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=c.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=parseInt(l.match(o),16)||h.length!==1&&l.match(i)&&Date.parse(l),A=parseInt(c.match(o),16)||b&&c.match(i)&&Date.parse(c)||null,E,_;if(A){if(b<A)return-1;if(b>A)return 1}for(var w=0,M=Math.max(h.length,f.length);w<M;w++){if(E=!(h[w]||"").match(a)&&parseFloat(h[w])||h[w]||0,_=!(f[w]||"").match(a)&&parseFloat(f[w])||f[w]||0,isNaN(E)!==isNaN(_))return isNaN(E)?1:-1;if(typeof E!=typeof _&&(E+="",_+=""),E<_)return-1;if(E>_)return 1}return 0},Ye=tt(Os);function Hs(t,e){if(t.indexOf(e)>-1)return[e];const r=pe(t,e);return r.length?r:[]}async function Ls(t,e={}){const r={ignoreAttributes:!1,preserveOrder:!1,attributeNamePrefix:"$",isArray:void 0};e.alwaysArray?r.isArray=(i,o)=>{if(e.alwaysArray.indexOf(o)!==-1)return!0}:delete r.isArray;const s=Object.assign(r,e),n=new Ts.XMLParser(s);return new Promise((i,o)=>{try{const a=n.parse(t);i(a)}catch(a){o(a)}})}async function Je(t){if(new Uint16Array(t,0,2)[0]===35615)try{const r=new Response(t),s=new DecompressionStream("gzip"),n=await r.body?.pipeThrough(s),i=await new Response(n).arrayBuffer();return await Je(i)}catch(r){console.error("eee",r)}return t}const Yt="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";Ye.insensitive=!0;const Is=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,Ps=["simwrapper",".simwrapper"],Ae={};class Fs{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isOMX;type;constructor(e,r){this.urlId=e.slug,this.slug=e.slug,this.needsAuth=!!e.needPassword,this.fsHandle=e.handle||null,this.store=r||null,this.isGithub=!!e.isGithub,this.isOMX=!!e.omx,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isOMX&&(this.type=3),this.baseUrl=e.baseURL,e.baseURL.endsWith("/")||(this.baseUrl+="/"),Ae[this.urlId]||(Ae[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(e){return e&&await e.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(i=>{this.store.commit("setFileHandleForPermissionRequest",{handle:e,resolve:i})}):!0}clearCache(){Ae[this.urlId]={}}cleanURL(e){let r=this.baseUrl+e.replace(/^0-9a-zA-Z_\-\/:+/i,"");return r=r.replaceAll("//","/"),r=r.replaceAll("//","/"),r=r.replace("https:/","https://"),r=r.replace("http:/","http://"),r=new URL(r).href,r}async _getFileResponse(e){switch(this.type){case 1:return this._getFileFromChromeFileSystem(e);case 2:return this._getFileFromGitHub(e);case 3:return this._getFileFromAzure(e);case 0:default:return this._getFileFetchResponse(e)}}async _getFileFetchResponse(e){const r=this.cleanURL(e),s={},n=new Request(r,{headers:s});return await fetch(n).then(o=>{if(o.status!=200)throw console.log("Status:",o.status),o;return o})}async _getDirectoryFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let s=`${this.baseUrl}list/${this.slug}?prefix=${r}`;const n=new URL(s).href,i={};if(this.needsAuth){let l=localStorage.getItem(`auth-token-${this.slug}`);if(l||(l=prompt("This server requires an access token to continue")),l)localStorage.setItem(`auth-token-${this.slug}`,l),i.AZURETOKEN=l;else return{dirs:[],files:[],handles:{}}}const o=new Request(n,{headers:i}),a=await fetch(o);if(a.status==400){let l=prompt("Authorization failure. This server requires a valid access token to continue");return l?(localStorage.setItem(`auth-token-${this.slug}`,l),i.AZURETOKEN=l,await this._getDirectoryFromAzure(e)):{dirs:[],files:[],handles:{}}}if(a.status!=200)throw console.log("Status:",a.status),a;return await a.json()}getSlug(){return this.slug}async _getFileFromAzure(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=r.replaceAll("//","/");let s=`${this.baseUrl}file/${this.slug}?prefix=${r}`;const n=new URL(s).href,i={},o=new Request(n,{headers:i}),a=await fetch(o);if(a.status!=200)throw console.log("Status:",a.status),a;return a}async _getFileFromChromeFileSystem(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r=new URL(`http://local/${r}`).href,r=r.substring(13);const s=r.lastIndexOf("/"),n=r.substring(0,s),i=decodeURIComponent(r.substring(s+1)),a=(await this.getDirectory(n)).handles[i];if(!a)throw Error(`File ${i} missing`);const u=await a.getFile();return u.json=()=>new Promise(async(l,c)=>{const h=await u.text(),f=JSON.parse(h);l(f)}),u.blob=()=>new Promise(async(l,c)=>{l(u)}),new Promise((l,c)=>{l(u)})}async _getFileFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const s=r.split("/").filter(f=>!!f);if(s.length<2)return new Promise((f,b)=>{f(null)});const n=`${s[0]}/${s[1]}`;let i=`https://api.github.com/repos/${n}/contents/`;s.shift(),s.shift(),i+=s.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Yt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let l=await await fetch(i,{headers:u}).then(f=>f.json()),c=l.content;if(c||(i=`https://api.github.com/repos/${n}/git/blobs/${l.sha}`,l=await await fetch(i,{headers:u}).then(f=>f.json()),c=l.content),l.encoding=="base64"){const f=Uint8Array.from(atob(l.content),b=>b.charCodeAt(0));Is.test(e.toLocaleLowerCase())?c=f:c=new TextDecoder().decode(f)}else l.encoding=="utf-8"?c=new TextDecoder().decode(l.content):c=l.content;return{text:()=>new Promise((f,b)=>{f(c)}),json:()=>new Promise(async(f,b)=>{const A=JSON.parse(c);f(A)}),blob:()=>new Promise(async(f,b)=>{f(new Blob([c],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(e){let r=e.replace(/^0-9a-zA-Z_\-\/:+/i,"");r=r.replaceAll("//","/"),r.startsWith("/")&&(r=r.slice(1));const s={dirs:[],files:[],handles:{}},n=r.split("/").filter(c=>!!c);if(n.length<2)return s;let i=`https://api.github.com/repos/${n[0]}/${n[1]}/contents/`;n.shift(),n.shift(),i+=n.join("/");const u={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${Yt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(i,{headers:u}).then(c=>c.json())).forEach(c=>{c.type=="file"&&s.files.push(c.name),c.type=="dir"&&s.dirs.push(c.name)}),s}async getFileText(e){return(await this._getFileResponse(e)).text()}async getFileJson(e){const n=await(await(await this._getFileResponse(e)).blob()).arrayBuffer(),i=await Je(n),o=new TextDecoder("utf-8").decode(i);return JSON.parse(o)}async getFileBlob(e){return(await this._getFileResponse(e)).blob()}async getFileStream(e){let r;switch(this.type){case 1:return r=await this._getFileFromChromeFileSystem(e).then(s=>s.blob()).then(s=>s.stream()),r;case 0:return r=await this._getFileFetchResponse(e).then(s=>s.body),r;default:throw Error("Not implemented")}}async getDirectory(e){let r=e.replaceAll("//","/");r.endsWith("/")||(r+="/");const s=Ae[this.urlId][r];if(s)return s;r=r.replaceAll("/./","/");try{let n;switch(this.type){case 1:n=await this._getDirectoryFromHandle(r);break;case 2:n=await this._getDirectoryFromGitHub(r);break;case 3:n=await this._getDirectoryFromAzure(r);break;case 0:default:n=await this._getDirectoryFromURL(r);break}return n.dirs.sort((i,o)=>Ye(i,o)),n.files.sort((i,o)=>Ye(i,o)),Ae[this.urlId][r]=n,n}catch(n){throw Error(""+n)}}async _getDirectoryFromHandle(e,r){const s={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return s;let i=e.split("/").filter(l=>!!l);function o(l){const c=l.indexOf("..");if(c<=0)return l;const h=l.filter((f,b)=>b!==c-1&&b!==c);return o(h)}const a=o(i);let u=this.fsHandle;if(a.length)for(const l of a){let c=!1;for await(let[h,f]of u)if(h===l){u=f,c=!0;break}if(!c)throw Error(`Could not find folder "${l}"`)}for await(let l of u.values())s.handles&&(s.handles[l.name]=l),l.kind==="file"?s.files.push(l.name):s.dirs.push(l.name);return s}async _getDirectoryFromURL(e){const s=await(await this._getFileResponse(e).then()).text();return this.buildListFromHtml(s)}async findAllYamlConfigs(e){const r={dashboards:{},topsheets:{},vizes:{},configs:{}},s=[];let n="/";const o=(e.startsWith("/")?e:"/"+e).split("/");for(const h of o.slice(0,o.length-1)){n=`${n}${h}/`.replaceAll("//","/");try{const{dirs:f}=await this.getDirectory(n);for(const b of f)Ps.includes(b.toLocaleLowerCase())&&s.push(`${n}/${b}`.replaceAll("//","/"))}catch{}}s.push(e);const a="dashboard*.y?(a)ml",u="(topsheet|table)*.y?(a)ml",l="viz*.y?(a)ml",c="simwrapper-config.y?(a)ml";for(const h of s){const{files:f}=await this.getDirectory(h);pe.match(f,a).map(b=>r.dashboards[b]=`${h}/${b}`.replaceAll("//","/")),pe.match(f,u).map(b=>r.topsheets[b]=`${h}/${b}`.replaceAll("//","/")),pe.match(f,l).map(b=>r.vizes[b]=`${h}/${b}`.replaceAll("//","/")),pe.match(f,c).map(b=>r.configs[b]=`${h}/${b}`.replaceAll("//","/"))}return r}buildListFromHtml(e){return e.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(e):e.indexOf("<ul>")>-1?this.buildListFromSVN(e):e.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(e):e.indexOf("<table>")>-1?this.buildListFromApache24(e):e.indexOf(`
<a `)>-1?this.buildListFromNGINX(e):{dirs:[],files:[],handles:{}}}buildListFromSimpleWebServer(e){const r=/">(.*?)<\/a/,s=[],n=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<li><a href="')<0)continue;const u=o.match(r);if(!u)continue;const l=u[1];l.endsWith("/")?s.push(l.substring(0,l.length-1)):n.push(l)}return{dirs:s,files:n,handles:{}}}buildListFromNpxServe(e){const r=/"(.*?)"/;let s=[],n=[];const i=e.split("</li>").map(o=>o.slice(o.lastIndexOf("<li")));for(const o of i){const a=o.indexOf('<li> <a href="');if(a<0||a>512)continue;const u=o.match(r);if(!u)continue;let l=u[1];l=l.replaceAll("&#47;","/"),l!=="/"&&l!=="../"&&(l.endsWith("/")?s.push(l.substring(0,l.length-1)):n.push(l))}return s=s.map(o=>o.slice(1+o.lastIndexOf("/"))),n=n.map(o=>o.slice(1+o.lastIndexOf("/"))),{dirs:s,files:n,handles:{}}}buildListFromSVN(e){const r=/"(.*?)"/,s=[],n=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<li><a href="')<0)continue;const u=o.match(r);if(!u)continue;let l=u[1];l!=="../"&&(l.startsWith("./")&&(l=l.substring(2)),l.endsWith("/")?s.push(l.substring(0,l.length-1)):n.push(l))}return{dirs:s,files:n,handles:{}}}buildListFromApache24(e){const r=/"(.*?)"/,s=[],n=[],i=e.split(`
`);for(const o of i){if(o.indexOf('<th "')>-1||o.indexOf("[PARENTDIR]")>-1)continue;const a=o.indexOf('<td><a href="');if(a<0)continue;const u=o.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?s.push(l.substring(0,l.length-1)):n.push(l))}return{dirs:s,files:n,handles:{}}}buildListFromNGINX(e){const r=/"(.*?)"/,s=[],n=[],i=e.split(`
`);for(const o of i){const a=o.indexOf('<a href="');if(a<0)continue;const u=o.substring(a).match(r);if(!u)continue;const l=u[1];l!=="../"&&(l.endsWith("/")?s.push(l.substring(0,l.length-1)):n.push(l))}return{dirs:s,files:n,handles:{}}}}let De="";onmessage=async function(t){De=t.data.id;const e=await ks(t.data.fileSystem,t.data.filePath,t.data.options);postMessage({xml:e,id:De})};async function ks(t,e,r){try{const s=new Fs(t);let n=e;if(e.indexOf("*")>-1||e.indexOf("?")>-1){const u=e.substring(1+e.lastIndexOf("/")),l=e.substring(0,e.lastIndexOf("/")),{files:c}=await s.getDirectory(l),h=Hs(c,u);if(h.length==0)throw Error(`No files matched "${u}"`);if(h.length>1)throw Error(`More than one file matched "${u}": ${h}`);n=`${l}/${h[0]}`}const i=await s.getFileBlob(n);i||Jt("BLOB IS NULL");const o=await Ms(i);return Ls(o,r)}catch{Jt("Error loading "+e)}}async function Ms(t){const e=await t.arrayBuffer(),r=await Je(e);return new TextDecoder("utf-8").decode(r)}function Jt(t){postMessage({error:t,id:De}),close()}})();
