# INI configuration example with custom query and cron scheduling

[source]
type = postgresql
host = localhost
port = 5432
database = source_db
username = source_user
password = source_password
table = users
query = SELECT id, name, email, updated_at, CASE WHEN deleted_at IS NOT NULL THEN 'delete' WHEN updated_at > :last_sync THEN 'update' ELSE 'insert' END as operation FROM users WHERE updated_at > :last_sync OR :last_sync IS NULL ORDER BY updated_at LIMIT :batch_size

[destination]
type = postgresql
host = localhost
port = 5432
database = dest_db
username = dest_user
password = dest_password
table = users

[sync]
mode = cron
cron_expression = 0 2 * * *
timezone = UTC
batch_size = 1000
interval_seconds = 60
watermark_table = sync_watermark
error_retry_attempts = 3
error_retry_delay = 5

[source.watermark]
column = updated_at
type = timestamp
initial_value = 1970-01-01 00:00:00

[destination.watermark]
column = updated_at
type = timestamp
