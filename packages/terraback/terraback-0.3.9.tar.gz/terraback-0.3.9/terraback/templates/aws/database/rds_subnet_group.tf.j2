{% for group in resources -%}
resource "aws_db_subnet_group" "{{ group.DBSubnetGroupName | tf_resource_name }}" {
  name        = "{{ group.DBSubnetGroupName }}"
  description = "{{ group.DBSubnetGroupDescription | replace('"', '\\"') }}"

  subnet_ids = [
    {%- for subnet in group.Subnets %}
    "{{ subnet.SubnetIdentifier }}"{{ "," if not loop.last }}
    {%- endfor %}
  ]

  {%  if group.get('Tags') %}
  tags = {
    {%- for tag in group.get('Tags', []) %}
    "{{ tag.Key }}" = "{{ tag.Value | replace('"', '\\"') }}"{{ "," if not loop.last }}
    {%- endfor %}
  }
  {%  endif -%}
}

{% if not loop.last %}

{% endif -%}
{%- endfor %}
