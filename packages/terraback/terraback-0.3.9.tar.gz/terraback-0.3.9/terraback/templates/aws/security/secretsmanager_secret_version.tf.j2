{% for version in resources -%}
resource "aws_secretsmanager_secret_version" "{{ version.secret_name_sanitized }}_{{ version.version_id_sanitized | tf_resource_name }}" {
  secret_id = "{{ version.SecretArn }}"

  secret_string = jsonencode({
    placeholder = "This secret value should be managed outside of Terraform"
  })

  {%  if version.version_stages_formatted %}
  version_stages = {{ version.version_stages_formatted | tojson }}
  {%  endif -%}

  lifecycle {
    ignore_changes = [
      secret_string,
      secret_binary
    ]
  }
}

{% if not loop.last %}

{% endif -%}
{%- endfor %}
