import{b as w,g as i,c as A,o as f,w as r,a as o,k as g,t as _,f as y,i as C,j as L,F as b}from"./index-6uM3C9QJ.js";import{l as I}from"./logs-Co1ZCMH0.js";import{d as N}from"./index-CvDWe0Ox.js";import{V as R}from"./VDataTableServer-_q5yX1uN.js";import{V as F}from"./VChip-DH7R5Ijd.js";import{V as h,a as D}from"./VToolbar-Bn743GAp.js";import{V as S}from"./VTextField-DI1vrMFe.js";import{c as $}from"./VCard-UdW0_Uwo.js";import"./VDataTable-BMUJtiNY.js";import"./index-BTn2TCUq.js";import"./tag-7q_Qn7dl.js";import"./VProgressCircular-l7s493OQ.js";import"./VSelect-C2sbdVot.js";import"./forwardRefs-DzkmOl4h.js";import"./ssrBoot-BNifTZr0.js";import"./VAvatar-BgULcTRt.js";import"./VMenu-CS4-l2Pu.js";import"./VCheckboxBtn-CGxH_5Qi.js";import"./VSelectionControl-CgTvwJaW.js";import"./VTable-Dgv3UJ8N.js";import"./filter-D9eXvGXt.js";const z={__name:"AuditTrailList",setup(V){const{$gettext:t}=w(),s=i(!1),c=i([]),n=i(""),p=i(0),v=[{title:t("Date"),key:"date_created"},{title:t("Level"),key:"level"},{title:t("Logger"),key:"logger"},{title:t("Message"),key:"message"}];function x(a){return a==="INFO"?"primary":a==="WARNING"?"orange":a==="CRITICAL"||a==="ERROR"?"red":""}function m({page:a,itemsPerPage:l,sortBy:e,search:T}){let d;e.length&&(d=(e[0].order==="desc"?"-":"")+e[0].key);const k={ordering:d,page:a,page_size:l,search:T};s.value=!0,I.getAuditTrail(k).then(u=>{c.value=u.data.results,p.value=u.data.count,s.value=!1})}return m=N(m,500),(a,l)=>(f(),A($,{class:"mt-6"},{default:r(()=>[o(R,{headers:v,items:c.value,search:n.value,class:"elevation-0","items-length":p.value,"onUpdate:options":m},{top:r(()=>[o(h,{flat:"",color:"white"},{default:r(()=>[o(S,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),"prepend-inner-icon":"mdi-magnify",placeholder:y(t)("Search"),variant:"outlined","hide-details":"",density:"compact",class:"flex-grow-0 w-33"},null,8,["modelValue","placeholder"])]),_:1})]),"item.level":r(({item:e})=>[o(F,{color:x(e.level),"text-color":"white",size:"small"},{default:r(()=>[g(_(e.level),1)]),_:2},1032,["color"])]),_:2},1032,["items","search","items-length"])]),_:1}))}},E={__name:"AuditTrailView",setup(V){return(t,s)=>(f(),L(b,null,[o(h,{flat:""},{default:r(()=>[o(D,null,{default:r(()=>[g(_(t.$gettext("Audit trail")),1)]),_:1})]),_:1}),o(z)],64))}},le=C(E,[["__scopeId","data-v-5d9f29af"]]);export{le as default};
