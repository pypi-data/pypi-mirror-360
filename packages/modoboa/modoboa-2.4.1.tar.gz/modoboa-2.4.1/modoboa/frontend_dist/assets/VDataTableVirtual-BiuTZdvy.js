import{c as ge,a as be,d as fe,u as ye,p as pe,e as Ve,r as Te,g as xe,h as De,i as Ie,j as Se,l as w,m as R,s as we,o as Re,t as Pe}from"./VDataTable-BMUJtiNY.js";import{u as ke,m as Be,a as Fe}from"./VSelect-C2sbdVot.js";import{q as Ge,s as He,S as Ee,a8 as s,h as g,a7 as P,U as Ne,a as d,z as b,Q as Ue,e as o,a3 as f}from"./index-6uM3C9QJ.js";import{u as ze,m as Oe}from"./filter-D9eXvGXt.js";import{V as k}from"./VTable-Dgv3UJ8N.js";import{u as _e}from"./tag-7q_Qn7dl.js";const je=He({...Ue(Re(),["hideDefaultFooter"]),...we(),...Be(),...Oe()},"VDataTableVirtual"),Je=Ge()({name:"VDataTableVirtual",props:je(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,B){let{attrs:F,slots:a}=B;const{groupBy:u}=ge(e),{sortBy:i,multiSort:G,mustSort:H}=be(e),{disableSort:E}=Ee(e),{columns:c,headers:N,filterFunctions:U,sortFunctions:z,sortRawFunctions:O}=fe(e,{groupBy:u,showSelect:s(()=>e.showSelect),showExpand:s(()=>e.showExpand)}),{items:_}=ye(e,c),y=s(()=>e.search),{filteredItems:j}=ze(e,_,y,{transform:t=>t.columns,customKeyFilter:U}),{toggleSort:q}=pe({sortBy:i,multiSort:G,mustSort:H}),{sortByWithGroups:A,opened:C,extractRows:K,isGroupOpen:Q,toggleGroup:W}=Ve({groupBy:u,sortBy:i,disableSort:E}),{sortedItems:J}=Te(e,j,A,{transform:t=>({...t.raw,...t.columns}),sortFunctions:z,sortRawFunctions:O}),{flatItems:h}=xe(J,u,C),m=g(()=>K(h.value)),{isSelected:L,select:M,selectAll:X,toggleSelect:Y,someSelected:Z,allSelected:$}=De(e,{allItems:m,currentPage:m}),{isExpanded:ee,toggleExpand:ae}=Ie(e),{containerRef:te,markerRef:le,paddingTop:re,paddingBottom:oe,computedItems:se,handleItemResize:ne,handleScroll:de,handleScrollend:ue,calculateVisibleItems:ie,scrollToIndex:ce}=ke(e,h),me=g(()=>se.value.map(t=>t.raw));Se({sortBy:i,page:P(1),itemsPerPage:P(-1),groupBy:u,search:y}),Ne({VDataTableRows:{hideNoData:s(()=>e.hideNoData),noDataText:s(()=>e.noDataText),loading:s(()=>e.loading),loadingText:s(()=>e.loadingText)}});const l=g(()=>({sortBy:i.value,toggleSort:q,someSelected:Z.value,allSelected:$.value,isSelected:L,select:M,selectAll:X,toggleSelect:Y,isExpanded:ee,toggleExpand:ae,isGroupOpen:Q,toggleGroup:W,items:m.value.map(t=>t.raw),internalItems:m.value,groupedItems:h.value,columns:c.value,headers:N.value}));return _e(()=>{const t=w.filterProps(e),he=R.filterProps(e),ve=k.filterProps(e);return d(k,b({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ve,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var r;return(r=a.top)==null?void 0:r.call(a,l.value)},wrapper:()=>{var r,p,V,T,x,D;return o("div",{ref:te,onScrollPassive:de,onScrollend:ue,class:"v-table__wrapper",style:{height:f(e.height)}},[o("table",null,[(r=a.colgroup)==null?void 0:r.call(a,l.value),!e.hideDefaultHeader&&o("thead",{key:"thead"},[d(w,t,a)]),(p=a.thead)==null?void 0:p.call(a,l.value),!e.hideDefaultBody&&o("tbody",{key:"tbody"},[o("tr",{ref:le,style:{height:f(re.value),border:0}},[o("td",{colspan:c.value.length,style:{height:0,border:0}},null)]),(V=a["body.prepend"])==null?void 0:V.call(a,l.value),d(R,b(F,he,{items:me.value}),{...a,item:n=>d(Fe,{key:n.internalItem.index,renderless:!0,"onUpdate:height":v=>ne(n.internalItem.index,v)},{default:v=>{var S;let{itemRef:I}=v;return((S=a.item)==null?void 0:S.call(a,{...n,itemRef:I}))??d(Pe,b(n.props,{ref:I,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(T=a["body.append"])==null?void 0:T.call(a,l.value),o("tr",{style:{height:f(oe.value),border:0}},[o("td",{colspan:c.value.length,style:{height:0,border:0}},null)])]),(x=a.tbody)==null?void 0:x.call(a,l.value),(D=a.tfoot)==null?void 0:D.call(a,l.value)])])},bottom:()=>{var r;return(r=a.bottom)==null?void 0:r.call(a,l.value)}})}),{calculateVisibleItems:ie,scrollToIndex:ce}}});export{Je as V};
