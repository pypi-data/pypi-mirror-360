import{_ as g,b,u as h,g as n,h as m,d as x,c as S,o as f}from"./index-6uM3C9QJ.js";import{p as l}from"./parameters-BG0eKo1T.js";import{_}from"./ConnectedLayout-C0KKRFEy.js";import{u as M}from"./parameters.store-C1OZFNb8.js";import"./VContainer-6TaCDL-y.js";/* empty css              */import"./tag-7q_Qn7dl.js";import"./VApp-BmRCleZk.js";import"./layout-DRQ0y7TH.js";import"./ssrBoot-BNifTZr0.js";import"./global.store-BvbCbkx6.js";import"./layout.store-CVQ6UwuK.js";import"./index-BTn2TCUq.js";import"./VProgressCircular-l7s493OQ.js";import"./forwardRefs-DzkmOl4h.js";import"./VAvatar-BgULcTRt.js";import"./VMenu-CS4-l2Pu.js";import"./VCard-UdW0_Uwo.js";import"./VRow-B8i6Vivu.js";import"./VSheet-CpJnecez.js";const v={getCapabilities(){return g.get("/capabilities/")}},J={__name:"AdminLayout",setup(R){const{$gettext:t}=b(),p=h(),i=M(),a=n(!1),s=n("/rspamd"),d=m(()=>p.authUser),c=m(()=>i.imapMigrationEnabled),u=()=>{window.location=s.value},r=[],A=[{text:t("Dashboard"),to:{name:"Dashboard"},exact:!0,icon:"mdi-view-dashboard-outline"},{text:t("Domains"),to:{name:"DomainList"},icon:"mdi-domain",roles:["DomainAdmins","Resellers","SuperAdmins"]},{text:t("Identities"),to:{name:"Identities"},icon:"mdi-account",roles:["DomainAdmins","Resellers","SuperAdmins"]},{text:t("Alarms"),to:{name:"Alarms"},icon:"mdi-bell"},{icon:"mdi-history",text:t("Monitoring"),roles:["SuperAdmins","Resellers","DomainAdmins"],children:[{text:t("Statistics"),to:{name:"Statistics"},roles:["SuperAdmins"]},{text:t("Audit trail"),to:{name:"AuditTrail"},roles:["SuperAdmins"]},{text:t("Messages"),to:{name:"MessageLog"},roles:["DomainAdmins","Resellers","SuperAdmins"]}]},{icon:"mdi-email-sync-outline",text:t("IMAP Migration"),roles:["SuperAdmins","Resellers"],condition:()=>c.value,children:[{text:t("Email providers"),to:{name:"ProvidersList"},roles:["SuperAdmins","Resellers"]},{text:t("Migrations"),to:{name:"MigrationsList"},roles:["Resellers","SuperAdmins"]}]},{icon:"mdi-cog",text:t("Settings"),children:r,roles:["SuperAdmins"]},{icon:"mdi-email-check-outline",text:"Rspamd",action:u,roles:["SuperAdmins"],condition:()=>a.value},{icon:"mdi-information",text:t("Information"),roles:["SuperAdmins"],to:{name:"Information"},withBell:!0}];return x(()=>{d.value.role==="SuperAdmins"&&(l.getGlobalApplications().then(e=>{e.data.forEach(o=>{r.push({text:o.label,to:{name:"ParametersEdit",params:{app:o.name}}})})}),i.imapMigrationEnabled===null&&l.getGlobalApplication("imap_migration").then(e=>{i.imapMigrationEnabled=e.data.params.enabled_imapmigration}),v.getCapabilities().then(e=>{a.value="rspamd"in e.data.capabilities,a.value&&(s.value=e.data.capabilities.rspamd.location||"/rspamd")}))}),(e,o)=>(f(),S(_,{"menu-items":A}))}};export{J as default};
