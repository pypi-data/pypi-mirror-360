import{d as U}from"./domains-vJA4hvK9.js";import{b as M,l as te,g as m,h as B,d as le,c as $,o as C,w as l,a,m as xe,e as p,t as k,f as d,n as E,k as D,p as de,j as z,F as me,q as Ce,s as De,v as we,x as he,y as Ae,z as O,A as Se,I as $e,B as Ne,C as Ue,i as ce,D as Fe,r as Te,E as qe}from"./index-6uM3C9QJ.js";import{u as fe}from"./permissions-Dxxy3XiM.js";import{V as pe,r as Z}from"./VForm-BM98r94C.js";import{V as Le,a as Be,b as Re,c as ve}from"./VCard-UdW0_Uwo.js";import{V as oe}from"./VTextField-DI1vrMFe.js";import{V as Pe}from"./VSelect-C2sbdVot.js";import{V as J}from"./VSwitch-CS2VqXpn.js";import{V as Ee}from"./VSpacer-tY9Tuje3.js";import{V as N,u as Oe,a as Me,m as ze,b as Ie,c as je,M as Je,d as _e,e as ie}from"./index-BTn2TCUq.js";import{p as Ge}from"./parameters-BG0eKo1T.js";import{_ as We}from"./CreationForm-DA_iycQ_.js";import{_ as Ke,a as Ye,b as Qe,c as Xe}from"./DomainTransportForm-DvrreEZv.js";import{_ as He}from"./AccountPasswordSubForm-lQIx0VeZ.js";import{a as P,V as se}from"./VRow-B8i6Vivu.js";import{_ as Ze}from"./DomainAdminList-pfjgpxFn.js";import{_ as ea}from"./ConfirmDialog-Ark6TqOm.js";import{V as ee}from"./VChip-DH7R5Ijd.js";import{_ as aa}from"./MenuItems-BKLaU8d3.js";import{V as ta}from"./VCheckboxBtn-CGxH_5Qi.js";import{V as ae}from"./VMenu-CS4-l2Pu.js";import{u as la,a as oa}from"./VProgressCircular-l7s493OQ.js";import{u as na,m as ia,a as sa}from"./tag-7q_Qn7dl.js";import{V as ye,a as ra}from"./VToolbar-Bn743GAp.js";import{V as be,a as re,b as ue}from"./forwardRefs-DzkmOl4h.js";import{V as ua}from"./VDataTable-BMUJtiNY.js";import{V as da}from"./VCheckbox-D-aBRRBQ.js";import{V as I}from"./VDialog-HV-J7ggg.js";import{_ as ma,i as ca}from"./importExport-57vjfPxB.js";import"./VAvatar-BgULcTRt.js";import"./VSelectionControl-CgTvwJaW.js";/* empty css              */import"./VWindowItem-Bepzjqqx.js";import"./ssrBoot-BNifTZr0.js";import"./VContainer-6TaCDL-y.js";import"./VSheet-CpJnecez.js";import"./ChoiceField-BE5A2NOX.js";import"./VAutocomplete-CmWiskVY.js";import"./filter-D9eXvGXt.js";import"./VAlert-B27KCrh1.js";import"./VDataTableVirtual-BiuTZdvy.js";import"./VTable-Dgv3UJ8N.js";import"./VFileInput-Dp1IK_eF.js";const fa={class:"headline"},pa={class:"m-label"},va={class:"m-label"},ge={__name:"DomainAliasForm",props:{domainAlias:{type:Object,default:()=>null}},emits:["close"],setup(i,{emit:y}){const{$gettext:e}=M(),f=y,{displayNotification:x}=te(),v=i,w=m([]),t=m({enabled:!0}),c=m(!1),S=m(),V=B(()=>v.domainAlias?e("Update"):e("Add")),b=B(()=>v.domainAlias?e("Edit domain alias"):e("Add a new domain alias"));async function g(){c.value=!0;try{await U.deleteDomainAlias(v.domainAlias.pk),x({msg:e("Domain alias deleted")}),f("close")}finally{c.value=!1}}async function h(){const{valid:s}=await S.value.validate();if(s){c.value=!0;try{if(!t.value.pk)await U.createDomainAlias(t.value),x({msg:e("Domain alias created")});else{const u=JSON.parse(JSON.stringify(t.value));await U.updateDomainAlias(v.domainAlias.pk,u),x({msg:e("Domain alias updated")})}f("close")}finally{c.value=!1}}}return le(()=>{U.getDomains().then(s=>{w.value=s.data}),v.domainAlias&&(t.value=JSON.parse(JSON.stringify(v.domainAlias)))}),(s,u)=>(C(),$(ve,null,{default:l(()=>[a(pe,{ref_key:"vFormRef",ref:S,onSubmit:xe(h,["prevent"])},{default:l(()=>[a(Le,null,{default:l(()=>[p("span",fa,k(b.value),1)]),_:1}),a(Be,null,{default:l(()=>[p("label",pa,k(d(e)("Name")),1),a(oe,{modelValue:t.value.name,"onUpdate:modelValue":u[0]||(u[0]=A=>t.value.name=A),variant:"outlined",density:"compact",rules:[d(Z).required]},null,8,["modelValue","rules"]),p("label",va,k(d(e)("Choose a domain")),1),a(Pe,{modelValue:t.value.target,"onUpdate:modelValue":u[1]||(u[1]=A=>t.value.target=A),items:w.value,"item-title":"name","item-value":"pk",rules:[d(Z).required],"single-line":"",variant:"outlined",density:"compact"},null,8,["modelValue","items","rules"]),a(J,{modelValue:t.value.enabled,"onUpdate:modelValue":u[2]||(u[2]=A=>t.value.enabled=A),label:"Enabled",color:"primary"},null,8,["modelValue"])]),_:1}),a(Re,null,{default:l(()=>[a(Ee),a(N,{loading:c.value,onClick:u[3]||(u[3]=A=>f("close"))},{default:l(()=>[D(k(d(e)("Close")),1)]),_:1},8,["loading"]),i.domainAlias&&i.domainAlias.pk?(C(),$(N,{key:0,color:"error",loading:c.value,onClick:g},{default:l(()=>[D(k(d(e)("Delete")),1)]),_:1},8,["loading"])):E("",!0),a(N,{color:"primary",type:"submit",loading:c.value},{default:l(()=>[D(k(V.value),1)]),_:1},8,["loading"])]),_:1})]),_:1},512)]),_:1}))}},_a={__name:"DomainOptionsForm",props:{modelValue:{type:Object,default:null}},emits:["createAdmin"],setup(i,{expose:y,emit:e}){const{$gettext:f}=M(),x=i,v=e,w=m(),t=m(!1),c=B(()=>x.modelValue);function S(V){v("createAdmin",V)}return y({vFormRef:w}),(V,b)=>(C(),$(pe,{ref_key:"vFormRef",ref:w},{default:l(()=>[a(J,{modelValue:t.value,"onUpdate:modelValue":[b[0]||(b[0]=g=>t.value=g),S],label:d(f)("Create a domain administrator"),color:"primary"},null,8,["modelValue","label"]),a(oe,{modelValue:c.value.domain_admin.username,"onUpdate:modelValue":b[1]||(b[1]=g=>c.value.domain_admin.username=g),label:d(f)("Name"),hint:d(f)("Name of the administrator"),"persistent-hint":"",variant:"outlined",disabled:!t.value,suffix:`@${c.value.name}`,rules:[!t.value||d(Z).required]},null,8,["modelValue","label","hint","disabled","suffix","rules"]),a(He,{modelValue:c.value.domain_admin,"onUpdate:modelValue":b[2]||(b[2]=g=>c.value.domain_admin=g),disabled:!t.value},null,8,["modelValue","disabled"]),a(J,{modelValue:c.value.domain_admin.with_mailbox,"onUpdate:modelValue":b[3]||(b[3]=g=>c.value.domain_admin.with_mailbox=g),label:d(f)("With a mailbox"),disabled:!t.value,hint:d(f)("Create a mailbox for the administrator."),"persistent-hint":"",color:"primary"},null,8,["modelValue","label","disabled","hint"]),a(J,{modelValue:c.value.domain_admin.with_aliases,"onUpdate:modelValue":b[4]||(b[4]=g=>c.value.domain_admin.with_aliases=g),label:d(f)("Create aliases"),disabled:!t.value,hint:d(f)("Create standard aliases for the domain."),"persistent-hint":"",color:"primary"},null,8,["modelValue","label","disabled","hint"])]),_:1},512))}},ya={class:"text-grey"},ba={__name:"DomainCreationForm",emits:["close","created"],setup(i,{emit:y}){const{$gettext:e}=M(),f=te(),x=de(),v=y,t=m({name:"",type:"domain",enabled:!0,enable_dns_checks:!0,enable_dkim:!1,dkim_key_selector:"modoboa",quota:0,default_mailbox_quota:0,domain_admin:{username:"admin",random_password:!1,with_mailbox:!1,with_aliases:!1},transport:{settings:{}}});le(()=>{Ge.getGlobalApplication("admin").then(n=>{const o=n.data.params;t.value.quota=o.default_domain_quota,t.value.default_mailbox_quota=o.default_mailbox_quota,o.default_domain_message_limit!==null&&(t.value.message_limit=o.default_domain_message_limit)})});const c=m(!1),S=m(),V=m(),b=m(),g=m(),h=m(),s=m(),u={general:V,dns:b,limitations:g,options:h,transport:s},A=[{name:"general",title:e("General")},{name:"dns",title:e("DNS")},{name:"limitations",title:e("Limitations")},{name:"options",title:e("Options")}],q=[{name:"general",title:e("General")},{name:"dns",title:e("DNS")},{name:"limitations",title:e("Limitations")},{name:"transport",title:e("Transport")}],G=B(()=>t.value.type==="domain"?A:q),R=B(()=>{const n=[{title:e("General"),items:[{key:e("Name"),value:t.value.name},{key:e("Type"),value:t.value.type},{key:e("Enabled"),value:t.value.enabled,type:"yesno"}]},{title:e("DNS"),items:[{key:e("Enable DNS checks"),value:t.value.enable_dns_checks,type:"yesno"},{key:e("Enable DKIM signing"),value:t.value.enable_dkim,type:"yesno"}]},{title:e("Limitations"),items:[{key:e("Quota"),value:t.value.quota},{key:e("Default mailbox quota"),value:t.value.default_mailbox_quota},{key:e("Message sending limit"),value:t.value.message_limit}]}];if(t.value.enable_dkim&&(n[1].items.push({key:e("DKIM key selector"),value:t.value.dkim_key_selector}),n[1].items.push({key:e("DKIM key length"),value:t.value.dkim_key_length})),t.value.type==="relaydomain"&&t.value.transport.service){const o={title:e("Transport"),items:[{key:e("Service"),value:t.value.transport.service}]};for(const _ of s.value.service.settings){const r={key:_.label,value:t.value.transport.settings[`${t.value.transport.service}_${_.name}`]};_.type==="boolean"&&(r.type="yesno"),o.items.push(r)}n.push(o)}else if(t.value.type==="domain"){const o={title:e("Options"),items:[{key:e("Create a domain administrator"),value:c.value,type:"yesno"}]};c.value&&o.items.push({key:e("Administrator name"),value:t.value.domain_admin.username},{name:"random_password",key:e("Random password"),value:t.value.domain_admin.random_password,type:"yesno"},{key:e("With mailbox"),value:t.value.domain_admin.with_mailbox,type:"yesno"},{key:e("Create aliases"),value:t.value.domain_admin.with_aliases,type:"yesno"}),n.push(o)}return n});function j(){v("close")}function W(){navigator.clipboard.writeText(t.value.domain_admin.password).then(()=>{f.displayNotification({msg:e("Password copied to clipboard")})})}function K(n){return u.value[n.name]}function Y(n){return u[n.name].value.vFormRef}async function Q(){}function X(n){c.value=n}async function H(){const n=JSON.parse(JSON.stringify(t.value));c.value||delete n.domain_admin,n.message_limit===""&&delete n.message_limit,n.type==="relaydomain"?s.value.checkSettingTypes(n):delete n.transport;try{const o=await U.createDomain(n);x.push({name:"DomainDetail",params:{id:o.data.pk}}),f.displayNotification({msg:e("Domain created")}),j()}finally{S.value.working=!1}}return(n,o)=>(C(),$(We,{ref_key:"form",ref:S,title:d(e)("New domain"),steps:G.value,"form-getter":K,"get-v-form-ref":Y,"validate-object":Q,"summary-sections":R.value,onClose:j,onCreate:H},{"form.general":l(()=>[a(Xe,{ref_key:"general",ref:V,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=_=>t.value=_),class:"ml-4"},null,8,["modelValue"])]),"form.dns":l(()=>[a(Qe,{ref_key:"dns",ref:b,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=_=>t.value=_),class:"ml-4"},null,8,["modelValue"])]),"form.limitations":l(()=>[a(Ye,{ref_key:"limitations",ref:g,modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=_=>t.value=_),class:"ml-4"},null,8,["modelValue"])]),"form.options":l(()=>[a(_a,{ref_key:"options",ref:h,modelValue:t.value,"onUpdate:modelValue":o[3]||(o[3]=_=>t.value=_),class:"ml-4",onCreateAdmin:X},null,8,["modelValue"])]),"form.transport":l(()=>[a(Ke,{ref_key:"transport",ref:s,modelValue:t.value.transport,"onUpdate:modelValue":o[4]||(o[4]=_=>t.value.transport=_),class:"ml-4"},null,8,["modelValue"])]),"item.random_password":l(({item:_})=>[_.value?(C(),$(P,{key:0,cols:"12",class:"highligth text-white"},{default:l(()=>[a(se,null,{default:l(()=>[a(P,null,{default:l(()=>[p("span",null,k(_.key),1)]),_:2},1024),a(P,{class:"text-right"},{default:l(()=>[D(k(n.$yesno(_.value)),1)]),_:2},1024)]),_:2},1024),a(se,null,{default:l(()=>[a(P,{class:"text-right py-1"},{default:l(()=>[D(k(t.value.domain_admin.password)+" ",1),a(N,{icon:"mdi-clipboard-multiple-outline",color:"white",variant:"text",title:d(e)("Copy to clipboard"),onClick:W},null,8,["title"])]),_:1})]),_:1})]),_:2},1024)):(C(),z(me,{key:1},[a(P,null,{default:l(()=>[p("span",ya,k(_.key),1)]),_:2},1024),a(P,{class:"text-right"},{default:l(()=>[D(k(n.$yesno(_.value)),1)]),_:2},1024)],64))]),_:2},1032,["title","steps","summary-sections"]))}},ga={__name:"DNSStatusChip",props:{status:{type:String,default:"pending"}},setup(i){const y=i,{$gettext:e}=M(),f=B(()=>y.status==="disabled"?e("Disabled"):y.status==="pending"?e("Pending"):y.status==="critical"?e("Problem"):y.status==="ok"?e("Valid"):e("Unknown")),x=B(()=>y.status==="disabled"?"":y.status==="pending"?"info":y.status==="critical"?"error":y.status==="ok"?"success":"warning");return(v,w)=>(C(),$(ee,{color:x.value,size:"small"},{default:l(()=>[D(k(f.value),1)]),_:1},8,["color"]))}},Va=De({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:$e,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...sa(),...je({location:"top end"}),...Ie(),...ia(),...Se(),...ze({transition:"scale-rotate-transition"})},"VBadge"),ka=Ce()({name:"VBadge",inheritAttrs:!1,props:Va(),setup(i,y){const{backgroundColorClasses:e,backgroundColorStyles:f}=la(()=>i.color),{roundedClasses:x}=Oe(i),{t:v}=we(),{textColorClasses:w,textColorStyles:t}=oa(()=>i.textColor),{themeClasses:c}=he(),{locationStyles:S}=Me(i,!0,V=>(i.floating?i.dot?2:4:i.dot?8:12)+(["top","bottom"].includes(V)?Number(i.offsetY??0):["left","right"].includes(V)?Number(i.offsetX??0):0));return na(()=>{const V=Number(i.content),b=!i.max||isNaN(V)?i.content:V<=Number(i.max)?V:`${i.max}+`,[g,h]=Ae(y.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(i.tag,O({class:["v-badge",{"v-badge--bordered":i.bordered,"v-badge--dot":i.dot,"v-badge--floating":i.floating,"v-badge--inline":i.inline},i.class]},h,{style:i.style}),{default:()=>{var s,u;return[p("div",{class:"v-badge__wrapper"},[(u=(s=y.slots).default)==null?void 0:u.call(s),a(Je,{transition:i.transition},{default:()=>{var A,q;return[Ne(p("span",O({class:["v-badge__badge",c.value,e.value,x.value,w.value],style:[f.value,t.value,i.inline?{}:S.value],"aria-atomic":"true","aria-label":v(i.label,V),"aria-live":"polite",role:"status"},g),[i.dot?void 0:y.slots.badge?(q=(A=y.slots).badge)==null?void 0:q.call(A):i.icon?a(_e,{icon:i.icon},null):b]),[[Ue,i.modelValue]])]}})])]}})}),{}}}),xa={class:"v-data-table__td v-data-table-column--no-padding v-data-table-column--align-start"},Ca={key:0},Da={class:"text-right"},wa={class:"grey lighten-4"},ha=["colspan"],Aa=["onClick"],Sa={__name:"DomainList",setup(i,{expose:y}){const{$gettext:e}=M(),f=de(),{canSetRole:x}=fe(),v=te(),w=[{title:e("Name"),key:"name"},{title:e("Enabled"),key:"enabled",width:"5%"},{title:e("Aliases"),key:"domainalias_count"},{title:e("DNS status"),key:"dns_global_status",sortable:!1},{title:e("Sending limit"),key:"message_limit"},{title:e("Quota"),key:"allocated_quota_in_percent"}];x.value&&w.push({title:e("Actions"),value:"actions",sortable:!1,align:"end"});const t=m({}),c=m(),S=m([]),V=m(!1),b=m(!1),g=m(null),h=m(null),s=m(!1),u=m(!1),A=m(""),q=m([]),G=m([]);async function R(){t.value={},b.value=!0;try{const n=await U.getDomains();S.value=n.data}finally{b.value=!1}}function j(){u.value=!1,g.value=null,h.value=null}async function W(n){if(!await c.value.open(e("Warning"),e("Do you really want to delete the domain %{ domain }?",{domain:n.name}),{color:"error",cancelLabel:e("No"),agreeLabel:e("Yes")}))return;const _={keep_folder:V.value};await U.deleteDomain(n.pk,_),R(),v.displayNotification({msg:e("Domain deleted")}),V.value=!1}function K(n){f.push({name:"DomainEdit",params:{id:n.pk}})}function Y(n,o){g.value=n,h.value=o,u.value=!0}function Q(n,o,_,r){if(_(o)){r(o);return}U.getDomainAliases(n.name).then(F=>{t.value[n.name]=F.data,r(o)})}function X(n){g.value=n,s.value=!0}function H(n){const o=[{label:e("Administrators"),icon:"mdi-account-supervisor",onClick:X},{label:e("Edit"),icon:"mdi-circle-edit-outline",onClick:K},{label:e("Delete"),icon:"mdi-delete-outline",onClick:W,color:"red"}];return n.opened_alarms_count&&o.push({label:e("Alarms"),icon:"mdi-bell",color:"red",onClick:()=>f.push({name:"Alarms"})}),o}return le(()=>{R()}),y({reloadDomains:R}),(n,o)=>{const _=Te("router-link");return C(),$(ve,{class:"mt-6"},{default:l(()=>[a(ua,{modelValue:q.value,"onUpdate:modelValue":o[1]||(o[1]=r=>q.value=r),expanded:G.value,headers:w,items:S.value,"item-value":"name",search:A.value,"show-select":"","expand-on-click":"",loading:b.value},{top:l(()=>[a(ye,{color:"white",flat:""},{default:l(()=>[a(oe,{modelValue:A.value,"onUpdate:modelValue":o[0]||(o[0]=r=>A.value=r),"prepend-inner-icon":"mdi-magnify",placeholder:d(e)("Search"),variant:"outlined","single-line":"","hide-details":"",density:"compact",class:"flex-grow-0 w-33 mr-4"},null,8,["modelValue","placeholder"]),qe(n.$slots,"extraActions",{},void 0,!0),a(ae,{location:"bottom"},{activator:l(({props:r})=>[a(N,O({variant:"flat","append-icon":"mdi-chevron-down"},r,{size:"small"}),{default:l(()=>[D(k(d(e)("Actions")),1)]),_:2},1040)]),default:l(()=>[a(be,{density:"compact"})]),_:1}),a(N,{variant:"text",icon:"mdi-reload",onClick:R})]),_:3})]),item:l(({item:r,internalItem:L,isExpanded:F,toggleExpand:ne,isSelected:Ve,toggleSelect:ke})=>[p("tr",null,[p("td",xa,[a(ta,{value:!Ve(L),onClick:T=>ke(L)},null,8,["value","onClick"])]),p("td",null,[a(_,{to:{name:"DomainDetail",params:{id:r.pk}}},{default:l(()=>[D(k(r.name),1)]),_:2},1032,["to"]),r.type==="relaydomain"?(C(),$(ee,{key:0,size:"small",color:"primary",class:"ml-2"},{default:l(()=>[D(k(d(e)("Relay")),1)]),_:1})):E("",!0)]),p("td",null,[a(_e,{color:r.enabled?"success":"error",icon:r.enabled?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),p("td",null,[D(k(r.domainalias_count)+" aliases ",1),r.domainalias_count?(C(),$(N,{key:0,variant:"text",icon:F(L)?"mdi-chevron-up":"mdi-chevron-down",onClick:T=>Q(r,L,F,ne)},null,8,["icon","onClick"])):E("",!0)]),p("td",null,[a(ga,{status:r.dns_global_status},null,8,["status"])]),p("td",null,[a(ie,{modelValue:r.allocated_quota_in_percent,"onUpdate:modelValue":T=>r.allocated_quota_in_percent=T},null,8,["modelValue","onUpdate:modelValue"])]),p("td",null,[a(ie,{modelValue:r.allocated_quota_in_percent,"onUpdate:modelValue":T=>r.allocated_quota_in_percent=T},null,8,["modelValue","onUpdate:modelValue"])]),d(x)?(C(),z("td",Ca,[p("div",Da,[a(ae,{"offset-y":""},{activator:l(({props:T})=>[r.opened_alarms_count?(C(),$(ka,{key:0,bordered:"",color:"error",icon:"mdi-bell",overlap:""},{default:l(()=>[a(N,O({icon:"mdi-dots-horizontal",variant:"text"},T),null,16)]),_:2},1024)):(C(),$(N,O({key:1,icon:"mdi-dots-horizontal",variant:"text"},T),null,16))]),default:l(()=>[a(aa,{items:H(r),obj:r},null,8,["items","obj"])]),_:2},1024)])])):E("",!0)])]),"expanded-row":l(({item:r,columns:L})=>[p("tr",wa,[p("td",{colspan:L.length},[(C(!0),z(me,null,Fe(t.value[r.name],F=>(C(),z("span",{key:F.name,class:"mr-4"},[p("a",{href:"#",class:"mr-2",onClick:ne=>Y(r,F)},k(F.name),9,Aa),a(ee,{variant:"flat",size:"x-small",color:"success"},{default:l(()=>o[6]||(o[6]=[D("DNS OK")])),_:1,__:[6]})]))),128))],8,ha)])]),_:3},8,["modelValue","expanded","items","search","loading"]),a(ea,{ref_key:"confirm",ref:c},{default:l(()=>[a(da,{modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=r=>V.value=r),label:d(e)("Do not delete domain folder"),"hide-details":""},null,8,["modelValue","label"])]),_:1},512),a(I,{modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=r=>u.value=r),persistent:"","max-width":"800px"},{default:l(()=>[a(ge,{"domain-alias":h.value,onClose:j},null,8,["domain-alias"])]),_:1},8,["modelValue"]),a(I,{modelValue:s.value,"onUpdate:modelValue":o[5]||(o[5]=r=>s.value=r),persistent:"","max-width":"800px"},{default:l(()=>[a(Ze,{domain:g.value,"dialog-mode":"",onClose:o[4]||(o[4]=r=>s.value=!1)},null,8,["domain"])]),_:1},8,["modelValue"])]),_:3})}}},$a=ce(Sa,[["__scopeId","data-v-13336b92"]]),Na={__name:"DomainsView",setup(i){const y=m(),e=m(!1),f=m(!1),x=m(!1),{$gettext:v}=M(),{canAddDomain:w}=fe(),t=m(),{importContent:c,exportContent:S}=ca();function V(){U.exportAll().then(h=>{S(h.data,"domains",v)})}function b(h){c(U,h,t,v)}const g=()=>{e.value=!1,y.value.reloadDomains()};return(h,s)=>(C(),z("div",null,[a(ye,{flat:""},{default:l(()=>[a(ra,null,{default:l(()=>[D(k(d(v)("Domains")),1)]),_:1})]),_:1}),a(d($a),{ref_key:"domainList",ref:y},{extraActions:l(()=>[d(w)?(C(),$(ae,{key:0,"offset-y":""},{activator:l(({props:u})=>[a(N,O({color:"primary",variant:"outlined"},u,{"prepend-icon":"mdi-plus",class:"mr-4"}),{default:l(()=>[D(k(d(v)("New")),1)]),_:2},1040)]),default:l(()=>[a(be,{density:"compact"},{default:l(()=>[a(re,{onClick:s[0]||(s[0]=u=>f.value=!0)},{default:l(()=>[a(ue,null,{default:l(()=>[D(k(d(v)("Domain")),1)]),_:1})]),_:1}),a(re,{onClick:s[1]||(s[1]=u=>e.value=!0)},{default:l(()=>[a(ue,null,{default:l(()=>[D(k(d(v)("Alias")),1)]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0),d(w)?(C(),$(N,{key:1,class:"mr-2",title:d(v)("Import domains and aliases from CSV file"),variant:"flat",icon:"mdi-file-import-outline",onClick:s[2]||(s[2]=u=>x.value=!0)},null,8,["title"])):E("",!0),a(N,{class:"mr-2",title:d(v)("Export domains and aliases to CSV"),variant:"flat",icon:"mdi-file-export-outline",onClick:V},null,8,["title"])]),_:1},512),a(I,{modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=u=>f.value=u),fullscreen:"",scrollable:"","z-index":"10"},{default:l(()=>[a(d(ba),{onClose:s[3]||(s[3]=u=>f.value=!1)})]),_:1},8,["modelValue"]),a(I,{modelValue:e.value,"onUpdate:modelValue":s[6]||(s[6]=u=>e.value=u),persistent:"","max-width":"800px"},{default:l(()=>[a(d(ge),{onClose:s[5]||(s[5]=u=>g())})]),_:1},8,["modelValue"]),a(I,{modelValue:x.value,"onUpdate:modelValue":s[8]||(s[8]=u=>x.value=u),persistent:"","max-width":"800px"},{default:l(()=>[a(d(ma),{ref_key:"importForm",ref:t,title:d(v)("Import domains"),onSubmit:b,onClose:s[7]||(s[7]=u=>x.value=!1)},{help:l(()=>s[9]||(s[9]=[p("ul",null,[p("li",null,[p("em",null,"domain; name; quota; default mailbox quota; enabled")]),p("li",null,[p("em",null,"domainalias; name; targeted domain; enabled")]),p("li",null,[p("em",null,"relaydomain; name; target host; target port; service; enabled; verify recipients")])],-1)])),_:1},8,["title"])]),_:1},8,["modelValue"])]))}},Vt=ce(Na,[["__scopeId","data-v-50470732"]]);export{Vt as default};
