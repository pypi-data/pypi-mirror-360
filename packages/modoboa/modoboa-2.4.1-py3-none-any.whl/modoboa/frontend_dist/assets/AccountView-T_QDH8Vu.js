import{c as r,o,w as e,a as t,e as h,t as a,j as g,F as x,D as T,k as s,_ as w,l as E,b as F,g as b,f as p,n as _,i as G,K as U,L as z}from"./index-6uM3C9QJ.js";import{u as I}from"./permissions-Dxxy3XiM.js";import{p as K}from"./parameters-BG0eKo1T.js";import{V as A,a as V,c as C}from"./VCard-UdW0_Uwo.js";import{V as Q}from"./VChip-DH7R5Ijd.js";import{V as H}from"./VDataTable-BMUJtiNY.js";import{V as $,d as M,e as q}from"./index-BTn2TCUq.js";import{V as J}from"./VTextField-DI1vrMFe.js";import{V as f,a as c}from"./VRow-B8i6Vivu.js";import{V as W,a as X}from"./VToolbar-Bn743GAp.js";import"./tag-7q_Qn7dl.js";import"./VAvatar-BgULcTRt.js";import"./VProgressCircular-l7s493OQ.js";import"./VSelect-C2sbdVot.js";import"./forwardRefs-DzkmOl4h.js";import"./ssrBoot-BNifTZr0.js";import"./VMenu-CS4-l2Pu.js";import"./VCheckboxBtn-CGxH_5Qi.js";import"./VSelectionControl-CgTvwJaW.js";import"./VTable-Dgv3UJ8N.js";import"./filter-D9eXvGXt.js";/* empty css              */const Y={class:"headline"},Z={__name:"AccountAliases",props:{account:{type:Object,default:null}},setup(l){return(n,d)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",Y,a(n.$gettext("Aliases")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),g(x,null,T(l.account.aliases,u=>(o(),r(Q,{key:u,class:"mr-2 mt-2"},{default:e(()=>[s(a(u),1)]),_:2},1024))),128))]),_:1})]),_:1}))}},N="senderaddresses",B={getAll(){return w.get(`${N}/`)},getAllForMailbox(l){return w.get(`${N}/`,{params:{mailbox:l}})},create(l){return w.post(`${N}/`,l)},delete(l){return w.delete(`${N}/${l}/`)}},ee={class:"headline"},te={key:0},ae={__name:"AccountSenderAddresses",props:{account:{type:Object,default:null}},setup(l){const n=E(),{$gettext:d}=F(),u=l,i=b([]),v=b(!1),m=b(""),D=[{title:d("Address"),key:"address"},{title:"",key:"actions",align:"end",sortable:!1}];function L(){i.value.push({}),v.value=!0}function R(){B.getAllForMailbox(u.account.mailbox.pk).then(y=>{i.value=y.data})}function O(){const y={address:m.value,mailbox:u.account.mailbox.pk};B.create(y).then(()=>{R(),m.value=null,v.value=!1,n.displayNotification({msg:d("Sender address added")})})}function P(y){B.delete(y.pk).then(()=>{R(),n.displayNotification({msg:d("Sender address deleted")})})}return R(),(y,S)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",ee,a(p(d)("Sender addresses")),1)]),_:1}),t(V,null,{default:e(()=>[t(H,{headers:D,items:i.value,"no-data-text":p(d)("No sender address defined for this account")},{"item.address":e(({item:k})=>[k.pk?(o(),g("span",te,a(k.address),1)):(o(),r(J,{key:1,modelValue:m.value,"onUpdate:modelValue":S[0]||(S[0]=j=>m.value=j),label:p(d)("Specify an email address")},{append:e(()=>[m.value?(o(),r($,{key:0,icon:"mdi-content-save",color:"primary",variant:"text",onClick:O})):_("",!0)]),_:1},8,["modelValue","label"]))]),"item.actions":e(({item:k})=>[k.pk?(o(),r($,{key:0,icon:"mdi-delete-outline",color:"red",title:p(d)("Remove this address"),variant:"text",onClick:j=>P(k)},null,8,["title","onClick"])):_("",!0)]),bottom:e(()=>S[1]||(S[1]=[])),_:2},1032,["items","no-data-text"]),v.value?_("",!0):(o(),r($,{key:0,size:"small",color:"primary",variant:"outlined",onClick:L},{default:e(()=>[t(M,{size:"small",icon:"mdi-plus"}),s(" "+a(p(d)("Add sender address")),1)]),_:1}))]),_:1})]),_:1}))}},le={class:"headline"},ne={__name:"AccountSummary",props:{account:{type:Object,default:null}},setup(l){return(n,d)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",le,a(n.$gettext("General information")),1)]),_:1}),t(V,null,{default:e(()=>[t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Creation date")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(n.$date(l.account.date_joined)),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Last login date")),1)]),_:1}),l.account.last_login?(o(),r(c,{key:0,cols:"6"},{default:e(()=>[s(a(n.$date(l.account.last_login)),1)]),_:1})):(o(),r(c,{key:1,cols:"6"},{default:e(()=>[s(a(n.$gettext("Never logged-in")),1)]),_:1}))]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Full name")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.first_name)+" "+a(l.account.last_name),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Role")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.role),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Secondary email")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.secondary_email),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Phone number")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.phone_number),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Enabled")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[t(M,{color:l.account.is_active?"success":"error",icon:l.account.is_active?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),_:1})]),_:1}),l.account.mailbox?(o(),g(x,{key:0},[t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Quota")),1)]),_:1}),l.account.mailbox.quota==="0"?(o(),r(c,{key:0,cols:"6"},{default:e(()=>[s(a(n.$gettext("Unlimited")),1)]),_:1})):(o(),r(c,{key:1,cols:"6"},{default:e(()=>[t(q,{color:l.account.mailbox.quota_usage<80?"primary":"warning",value:l.account.mailbox.quota_usage,height:"25",class:"white--text"},{default:e(({value:u})=>[s(a(Math.ceil(u))+"% ("+a(l.account.mailbox.quota)+" "+a(n.$gettext("MB"))+") ",1)]),_:1},8,["color","value"])]),_:1}))]),_:1}),l.account.mailbox.message_limit?(o(),r(f,{key:0},{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[s(a(n.$gettext("Daily sending limit")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[s(a(l.account.mailbox.message_limit),1)]),_:1})]),_:1})):_("",!0)],64)):_("",!0)]),_:1})]),_:1}))}},oe={class:"headline"},se={key:1},ue={class:"text-disabled"},ce={__name:"DomainAdminDomains",props:{account:{type:Object,default:null}},setup(l){const{$gettext:n}=F();return(d,u)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",oe,a(p(n)("Administered domains")),1)]),_:1}),t(V,null,{default:e(()=>[l.account.domains!==void 0&&l.account.domains.length?(o(!0),g(x,{key:0},T(l.account.domains,i=>(o(),r(f,{key:i},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[s(a(i),1)]),_:2},1024)]),_:2},1024))),128)):(o(),g("div",se,a(p(n)("No domain managed")),1)),h("div",ue,a(p(n)("Add/Remove from the domain page")),1)]),_:1})]),_:1}))}},re={class:"headline"},de={__name:"ResourcesView",props:{resources:{type:Array,default:null}},setup(l){function n(d){return d<50?"primary":d<80?"warning":"error"}return(d,u)=>(o(),r(C,null,{default:e(()=>[t(A,null,{default:e(()=>[h("span",re,a(d.$gettext("Resources usage")),1)]),_:1}),t(V,null,{default:e(()=>[(o(!0),g(x,null,T(l.resources,i=>(o(),g("div",{key:i.name,class:"mt-4"},[s(a(i.label)+" ("+a(Math.ceil(i.usage))+"%) ",1),t(q,{value:i.usage,color:n(i.usage)},null,8,["value","color"])]))),128))]),_:1})]),_:1}))}},ie={__name:"AccountView",setup(l){const n=U(),{canSetRole:d}=I(),u=b({pk:n.params.id}),i=b({});function v(){z.get(n.params.id).then(m=>{u.value=m.data})}return d.value&&K.getGlobalApplication("limits").then(m=>{i.value=m.data}),v(),(m,D)=>(o(),g(x,null,[t(W,{flat:""},{default:e(()=>[t(X,null,{default:e(()=>[s(a(m.$gettext("Account"))+" "+a(u.value.username)+" ",1),t($,{color:"primary",icon:"mdi-circle-edit-outline",to:{name:"AccountEdit",params:{id:u.value.pk}}},null,8,["to"]),t($,{color:"primary",icon:"mdi-reload",onClick:v})]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[t(ne,{account:u.value},null,8,["account"]),u.value.role==="DomainAdmins"?(o(),r(ce,{key:0,class:"mt-2",account:u.value},null,8,["account"])):_("",!0)]),_:1}),t(c,{cols:"6"},{default:e(()=>[i.value.params&&i.value.params.enable_admin_limits&&u.value.role!=="SimpleUsers"&&u.value.role!=="SuperAdmins"?(o(),r(de,{key:0,resources:u.value.resources},null,8,["resources"])):_("",!0),u.value.aliases?(o(),r(Z,{key:1,class:"mt-2",account:u.value},null,8,["account"])):_("",!0),u.value.mailbox?(o(),r(ae,{key:2,class:"mt-2",account:u.value},null,8,["account"])):_("",!0)]),_:1})]),_:1})],64))}},je=G(ie,[["__scopeId","data-v-25fb6aa0"]]);export{je as default};
