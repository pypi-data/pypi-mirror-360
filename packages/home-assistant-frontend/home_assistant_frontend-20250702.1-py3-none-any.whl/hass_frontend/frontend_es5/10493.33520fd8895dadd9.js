"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["10493"],{82181:function(t,e,s){s.r(e),s.d(e,{CastManager:function(){return f},getCastManager:function(){return v}});var n,a,i=s(75706),r=s(54521),o=s(4490),c=(s(40777),s(87622),s(2394),s(13571),s(24533),s(64510),s(54480),s(1455),s(61540)),u=s(99873),h=s(43930),d=s(4140),f=function(){return(0,o.Z)(function t(e){var s=this;(0,r.Z)(this,t),this._eventListeners={},this._sessionStateChanged=function(t){"SESSION_STARTED"===t.sessionState||"SESSION_RESUMED"===t.sessionState?(s.auth?(0,d.Ni)(s,s.auth):s.sendMessage({type:"get_status"}),s._attachMessageListener()):"SESSION_ENDED"===t.sessionState&&(s.status=void 0,s._fireEvent("connection-changed"))},this._castStateChanged=function(t){s._fireEvent("state-changed")},this.auth=e;var n=this.castContext;n.setOptions({receiverApplicationId:u.$Q,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),n.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,this._sessionStateChanged),n.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this._castStateChanged)},[{key:"addEventListener",value:function(t,e){var s=this;return t in this._eventListeners||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),function(){s._eventListeners[t].splice(s._eventListeners[t].indexOf(e))}}},{key:"castConnectedToOurHass",get:function(){return void 0!==this.status&&void 0!==this.auth&&this.status.connected&&(this.status.hassUrl===this.auth.data.hassUrl||u.Hq&&this.status.hassUrl===h.M)}},{key:"sendMessage",value:function(t){this.castSession.sendMessage(u.py,t)}},{key:"castState",get:function(){return this.castContext.getCastState()}},{key:"castContext",get:function(){return cast.framework.CastContext.getInstance()}},{key:"castSession",get:function(){return this.castContext.getCurrentSession()}},{key:"requestSession",value:function(){return this.castContext.requestSession()}},{key:"_fireEvent",value:function(t){var e,s=(0,i.Z)(this._eventListeners[t]||[]);try{for(s.s();!(e=s.n()).done;){(0,e.value)()}}catch(n){s.e(n)}finally{s.f()}}},{key:"_receiveMessage",value:function(t){"receiver_status"===t.type&&(this.status=t,this._fireEvent("connection-changed"))}},{key:"_attachMessageListener",value:function(){var t=this;this.castSession.addMessageListener(u.py,function(e,s){return t._receiveMessage(JSON.parse(s))})}}])}(),v=function(t){return a||(a=function(){if(n)return n;n=new Promise(function(t){window.__onGCastApiAvailable=t});var t=document.createElement("div");return t.id="cast",document.body.append(t),(0,c.fs)("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),n}().then(function(e){if(!e)throw new Error("No Cast API available");return new f(t)})),a}},61540:function(t,e,s){s.d(e,{$y:function(){return r},fs:function(){return i},j:function(){return a}});s(1455);const n=(t,e,s)=>new Promise((n,a)=>{const i=document.createElement(t);let r="src",o="body";switch(i.onload=()=>n(e),i.onerror=()=>a(e),t){case"script":i.async=!0,s&&(i.type=s);break;case"link":i.type="text/css",i.rel="stylesheet",r="href",o="head"}i[r]=e,document[o].appendChild(i)}),a=t=>n("link",t),i=t=>n("script",t),r=t=>n("script",t,"module")}}]);
//# sourceMappingURL=10493.33520fd8895dadd9.js.map