"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["16754"],{97297:function(t,e,i){i.a(t,async function(t,e){try{var n,a,r,o,s,l,c,u=i(54982),d=i(54521),h=i(4490),_=i(20129),v=i(85297),p=i(53389),f=(i(12212),i(24819),i(18574),i(81738),i(6989),i(96821),i(54480),i(73742)),g=i(59048),y=i(7616),m=i(20480),b=i(28598),x=i(24481),k=i(65863),S=i(83533),Z=t([b]);b=(Z.then?(await Z)():Z)[0];var w=function(t,e,i){return 180*(0,S.Ff)((0,S.Fv)(t,e,i),e,i)/100},C=function(t){function e(){var t;(0,d.Z)(this,e);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=(0,_.Z)(this,e,[].concat(n))).min=0,t.max=100,t.value=0,t.needle=!1,t.label="",t._angle=0,t._updated=!1,t._segment_label="",t}return(0,v.Z)(e,t),(0,h.Z)(e,[{key:"firstUpdated",value:function(t){var i=this;(0,p.Z)(e,"firstUpdated",this,3)([t]),(0,k.T)(function(){i._updated=!0,i._angle=w(i.value,i.min,i.max),i._segment_label=i._getSegmentLabel(),i._rescaleSvg()})}},{key:"updated",value:function(t){(0,p.Z)(e,"updated",this,3)([t]),this._updated&&(t.has("value")||t.has("valueText")||t.has("label")||t.has("_segment_label"))&&(this._angle=w(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}},{key:"render",value:function(){var t=this;return(0,g.YP)(n||(n=(0,u.Z)([' <svg viewBox="-50 -50 100 50" class="gauge"> '," "," ",'  </svg> <svg class="text"> <text class="value-text"> ',""," </text> </svg>"])),this.needle&&this.levels?"":(0,g.YP)(a||(a=(0,u.Z)(['<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>']))),this.levels?this.levels.sort(function(t,e){return t.level-e.level}).map(function(e,i){var n;if(0===i&&e.level!==t.min){var a=w(t.min,t.min,t.max);n=(0,g.YP)(r||(r=(0,u.Z)(['<path stroke="var(--info-color)" class="level" d="M\n                          ',"\n                          ",'\n                         A 40 40 0 0 1 40 0\n                        "></path>'])),0-40*Math.cos(a*Math.PI/180),0-40*Math.sin(a*Math.PI/180))}var s=w(e.level,t.min,t.max);return(0,g.YP)(o||(o=(0,u.Z)(["",'<path stroke="','" class="level" d="M\n                        ',"\n                        ",'\n                       A 40 40 0 0 1 40 0\n                      "></path>'])),n,e.stroke,0-40*Math.cos(s*Math.PI/180),0-40*Math.sin(s*Math.PI/180))}):"",this.needle?(0,g.YP)(s||(s=(0,u.Z)(['<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="','"> </path>'])),(0,m.V)({transform:"rotate(".concat(this._angle,"deg)")})):(0,g.YP)(l||(l=(0,u.Z)(['<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="','"></path>'])),(0,m.V)({transform:"rotate(".concat(this._angle,"deg)")})),this._segment_label?this._segment_label:this.valueText||(0,b.uf)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,x.K)(this.locale)+"%":" ".concat(this.label))}},{key:"_rescaleSvg",value:function(){var t=this.shadowRoot.querySelector(".text"),e=t.querySelector("text").getBBox();t.setAttribute("viewBox","".concat(e.x," ").concat(e.y," ").concat(e.width," ").concat(e.height))}},{key:"_getSegmentLabel",value:function(){if(this.levels){this.levels.sort(function(t,e){return t.level-e.level});for(var t=this.levels.length-1;t>=0;t--)if(this.value>=this.levels[t].level)return this.levels[t].label}return""}}])}(g.oi);C.styles=(0,g.iv)(c||(c=(0,u.Z)([":host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}"]))),(0,f.__decorate)([(0,y.Cb)({type:Number})],C.prototype,"min",void 0),(0,f.__decorate)([(0,y.Cb)({type:Number})],C.prototype,"max",void 0),(0,f.__decorate)([(0,y.Cb)({type:Number})],C.prototype,"value",void 0),(0,f.__decorate)([(0,y.Cb)({attribute:!1})],C.prototype,"formatOptions",void 0),(0,f.__decorate)([(0,y.Cb)({attribute:!1,type:String})],C.prototype,"valueText",void 0),(0,f.__decorate)([(0,y.Cb)({attribute:!1})],C.prototype,"locale",void 0),(0,f.__decorate)([(0,y.Cb)({type:Boolean})],C.prototype,"needle",void 0),(0,f.__decorate)([(0,y.Cb)({type:Array})],C.prototype,"levels",void 0),(0,f.__decorate)([(0,y.Cb)()],C.prototype,"label",void 0),(0,f.__decorate)([(0,y.SB)()],C.prototype,"_angle",void 0),(0,f.__decorate)([(0,y.SB)()],C.prototype,"_updated",void 0),(0,f.__decorate)([(0,y.SB)()],C.prototype,"_segment_label",void 0),C=(0,f.__decorate)([(0,y.Mo)("ha-gauge")],C),e()}catch(M){e(M)}})},80298:function(t,e,i){i.a(t,async function(t,e){try{var n,a=i(54982),r=i(4490),o=i(54521),s=i(20129),l=i(85297),c=i(73742),u=i(52634),d=i(62685),h=i(59048),_=i(7616),v=i(75535),p=t([u]);u=(p.then?(await p)():p)[0],(0,v.jx)("tooltip.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:150,easing:"ease"}}),(0,v.jx)("tooltip.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:400,easing:"ease"}});var f=function(t){function e(){return(0,o.Z)(this,e),(0,s.Z)(this,e,arguments)}return(0,l.Z)(e,t),(0,r.Z)(e)}(u.Z);f.styles=[d.Z,(0,h.iv)(n||(n=(0,a.Z)([":host{--sl-tooltip-background-color:var(--secondary-background-color);--sl-tooltip-color:var(--primary-text-color);--sl-tooltip-font-family:var(\n          --ha-tooltip-font-family,\n          var(--ha-font-family-body)\n        );--sl-tooltip-font-size:var(\n          --ha-tooltip-font-size,\n          var(--ha-font-size-s)\n        );--sl-tooltip-font-weight:var(\n          --ha-tooltip-font-weight,\n          var(--ha-font-weight-normal)\n        );--sl-tooltip-line-height:var(\n          --ha-tooltip-line-height,\n          var(--ha-line-height-condensed)\n        );--sl-tooltip-padding:8px;--sl-tooltip-border-radius:var(--ha-tooltip-border-radius, 4px);--sl-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--sl-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}"])))],f=(0,c.__decorate)([(0,_.Mo)("ha-tooltip")],f),e()}catch(g){e(g)}})},7214:function(t,e,i){i.d(e,{Cj:function(){return h},F7:function(){return a},Hs:function(){return S},Kd:function(){return x},Kj:function(){return v},Nw:function(){return f},PA:function(){return r},Py:function(){return l},Qm:function(){return Z},Z0:function(){return m},_Y:function(){return u},_m:function(){return o},dL:function(){return c},dO:function(){return k},hN:function(){return _},h_:function(){return d},j2:function(){return b},q6:function(){return p},uR:function(){return s}});i(39710),i(26847),i(81738),i(72489),i(56389),i(27530);var n=i(15459),a=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const r=99387==i.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,o=t=>t.sendMessagePromise({type:"recorder/info"}),s=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),l=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),c=(t,e,i,n,a="hour",r,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:a,units:r,types:o}),u=(t,e,i,n)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar,rolling_window:i.rolling_window}),d=t=>t.callWS({type:"recorder/validate_statistics"}),h=(t,e,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i}),_=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),v=t=>{let e=null;if(!t)return null;for(const i of t)null!==i.change&&void 0!==i.change&&(null===e?e=i.change:e+=i.change);return e},p=(t,e)=>{let i=null;for(const n of e){if(!(n in t))continue;const e=v(t[n]);null!==e&&(null===i?i=e:i+=e)}return i},f=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),g=["mean","min","max"],y=["sum","state","change"],m=(t,e)=>!(!g.includes(e)||0===t.mean_type)||!(!y.includes(e)||!t.has_sum),b=(t,e,i,n,a)=>{const r=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:r,adjustment:n,adjustment_unit_of_measurement:a})},x=(t,e,i)=>{const a=t.states[e];return a?(0,n.C)(a):(null==i?void 0:i.name)||e},k=(t,e,i)=>{let n;var a;e&&(n=null===(a=t.states[e])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},S=t=>t.includes(":"),Z=t=>t.callWS({type:"recorder/update_statistics_issues"})},6291:function(t,e,i){i.d(e,{f:function(){return d}});var n=i(75706),a=i(54521),r=i(4490),o=i(20129),s=i(53389),l=i(85297),c=(i(39710),i(26847),i(81738),i(72489),i(54480),i(1455),i(56389),i(27530),i(73742)),u=i(7616),d=function(t){var e=function(t){function e(){return(0,a.Z)(this,e),(0,o.Z)(this,e,arguments)}return(0,l.Z)(e,t),(0,r.Z)(e,[{key:"connectedCallback",value:function(){(0,s.Z)(e,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,s.Z)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then(function(t){return t()}):t()}this.__unsubs=void 0}}},{key:"updated",value:function(t){if((0,s.Z)(e,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var i,a=(0,n.Z)(t.keys());try{for(a.s();!(i=a.n()).done;){var r=i.value;if(this.hassSubscribeRequiredHostProps.includes(r))return void this._checkSubscribed()}}catch(o){a.e(o)}finally{a.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some(function(t){return void 0===e[t]})||(this.__unsubs=this.hassSubscribe())}}])}(t);return(0,c.__decorate)([(0,u.Cb)({attribute:!1})],e.prototype,"hass",void 0),e}},74314:function(t,e,i){i.a(t,async function(t,n){try{i.r(e);var a,r,o,s,l=i(54982),c=i(54521),u=i(4490),d=i(20129),h=i(85297),_=(i(12212),i(73742)),v=i(59048),p=i(7616),f=i(28598),g=(i(31138),i(97297)),y=(i(993),i(80298)),m=i(6640),b=i(6291),x=i(93647),k=t([g,y,m,f]);[g,y,m,f]=k.then?(await k)():k;var S=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}],Z=function(t){function e(){var t;(0,c.Z)(this,e);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=(0,d.Z)(this,e,[].concat(n))).hassSubscribeRequiredHostProps=["_config"],t}return(0,h.Z)(e,t),(0,u.Z)(e,[{key:"hassSubscribe",value:function(){var t,e=this;return[(0,m.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){e._data=t})]}},{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,x.SN)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){var t,e;if(!this._config||!this.hass)return v.Ld;if(!this._data)return(0,v.dy)(a||(a=(0,l.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var i,n=(0,m.EH)(this._data),s=n.summedData;n.compareSummedData;if(!("from_grid"in s.total))return v.Ld;var c=null!==(t=s.total.from_grid)&&void 0!==t?t:0,u=null!==(e=s.total.to_grid)&&void 0!==e?e:0;return null!==c&&null!==u&&(i=u>c?1-c/u:u<c?-1*(1-u/c):0),(0,v.dy)(r||(r=(0,l.Z)([" <ha-card> "," </ha-card> "])),void 0!==i?(0,v.dy)(o||(o=(0,l.Z)([' <ha-gauge min="-1" max="1" .value="','" .valueText="','" .locale="','" .levels="','" label="kWh" needle></ha-gauge> <ha-tooltip placement="left" hoist> <span slot="content"> '," <br><br> ",' </span> <ha-svg-icon .path="','"></ha-svg-icon> </ha-tooltip> <div class="name"> '," </div> "])),i,(0,f.uf)(Math.abs(u-c),this.hass.locale,{maximumFractionDigits:2}),this.hass.locale,S,this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency"),this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain"),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",u>=c?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated"))}}])}((0,b.f)(v.oi));Z.styles=(0,v.iv)(s||(s=(0,l.Z)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,_.__decorate)([(0,p.Cb)({attribute:!1})],Z.prototype,"hass",void 0),(0,_.__decorate)([(0,p.SB)()],Z.prototype,"_config",void 0),(0,_.__decorate)([(0,p.SB)()],Z.prototype,"_data",void 0),Z=(0,_.__decorate)([(0,p.Mo)("hui-energy-grid-neutrality-gauge-card")],Z),n()}catch(w){n(w)}})},83533:function(t,e,i){i.d(e,{Ff:function(){return a},Fv:function(){return n},IU:function(){return r}});var n=function(t,e,i){return isNaN(t)||isNaN(e)||isNaN(i)?0:t>i?i:t<e?e:t},a=function(t,e,i){return 100*(t-e)/(i-e)},r=function(t){return Math.round(10*t)/10}}}]);
//# sourceMappingURL=16754.2ab12981c8b76c2f.js.map