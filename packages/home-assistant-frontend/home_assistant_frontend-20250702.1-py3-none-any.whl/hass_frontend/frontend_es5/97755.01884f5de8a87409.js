"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["97755"],{7214:function(e,t,n){n.d(t,{Cj:function(){return _},F7:function(){return r},Hs:function(){return x},Kd:function(){return S},Kj:function(){return f},Nw:function(){return g},PA:function(){return s},Py:function(){return c},Qm:function(){return C},Z0:function(){return y},_Y:function(){return l},_m:function(){return a},dL:function(){return u},dO:function(){return k},hN:function(){return h},h_:function(){return d},j2:function(){return b},q6:function(){return p},uR:function(){return o}});n(39710),n(26847),n(81738),n(72489),n(56389),n(27530);var i=n(15459),r=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const s=99387==n.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,a=e=>e.sendMessagePromise({type:"recorder/info"}),o=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),c=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),u=(e,t,n,i,r="hour",s,a)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:i,period:r,units:s,types:a}),l=(e,t,n,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar,rolling_window:n.rolling_window}),d=e=>e.callWS({type:"recorder/validate_statistics"}),_=(e,t,n)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:n}),h=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),f=e=>{let t=null;if(!e)return null;for(const n of e)null!==n.change&&void 0!==n.change&&(null===t?t=n.change:t+=n.change);return t},p=(e,t)=>{let n=null;for(const i of t){if(!(i in e))continue;const t=f(e[i]);null!==t&&(null===n?n=t:n+=t)}return n},g=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),v=["mean","min","max"],m=["sum","state","change"],y=(e,t)=>!(!v.includes(t)||0===e.mean_type)||!(!m.includes(t)||!e.has_sum),b=(e,t,n,i,r)=>{const s=new Date(n).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:s,adjustment:i,adjustment_unit_of_measurement:r})},S=(e,t,n)=>{const r=e.states[t];return r?(0,i.C)(r):(null==n?void 0:n.name)||t},k=(e,t,n)=>{let i;var r;t&&(i=null===(r=e.states[t])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===i?null==n?void 0:n.statistics_unit_of_measurement:i},x=e=>e.includes(":"),C=e=>e.callWS({type:"recorder/update_statistics_issues"})},6291:function(e,t,n){n.d(t,{f:function(){return d}});var i=n(75706),r=n(54521),s=n(4490),a=n(20129),o=n(53389),c=n(85297),u=(n(39710),n(26847),n(81738),n(72489),n(54480),n(1455),n(56389),n(27530),n(73742)),l=n(7616),d=function(e){var t=function(e){function t(){return(0,r.Z)(this,t),(0,a.Z)(this,t,arguments)}return(0,c.Z)(t,e),(0,s.Z)(t,[{key:"connectedCallback",value:function(){(0,o.Z)(t,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,o.Z)(t,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var e=this.__unsubs.pop();e instanceof Promise?e.then(function(e){return e()}):e()}this.__unsubs=void 0}}},{key:"updated",value:function(e){if((0,o.Z)(t,"updated",this,3)([e]),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var n,r=(0,i.Z)(e.keys());try{for(r.s();!(n=r.n()).done;){var s=n.value;if(this.hassSubscribeRequiredHostProps.includes(s))return void this._checkSubscribed()}}catch(a){r.e(a)}finally{r.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var e,t=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(function(e){return void 0===t[e]})||(this.__unsubs=this.hassSubscribe())}}])}(e);return(0,u.__decorate)([(0,l.Cb)({attribute:!1})],t.prototype,"hass",void 0),t}},56849:function(e,t,n){n.a(e,async function(e,i){try{n.r(t);var r,s,a,o,c=n(54982),u=n(54521),l=n(4490),d=n(20129),_=n(85297),h=(n(12212),n(73742)),f=n(59048),p=n(7616),g=n(20480),v=(n(31138),n(97297)),m=(n(993),n(6640)),y=n(6291),b=n(43309),S=n(93647),k=e([v,m,b]);[v,m,b]=k.then?(await k)():k;var x={maximumFractionDigits:0},C=function(e){function t(){var e;(0,u.Z)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=(0,d.Z)(this,t,[].concat(i))).hassSubscribeRequiredHostProps=["_config"],e}return(0,_.Z)(t,e),(0,l.Z)(t,[{key:"hassSubscribe",value:function(){var e,t=this;return[(0,m.UB)(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe(function(e){t._data=e})]}},{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(e){this._config=e}},{key:"shouldUpdate",value:function(e){return(0,S.SN)(this,e)||e.size>1||!e.has("hass")}},{key:"render",value:function(){var e;if(!this._config||!this.hass)return f.Ld;if(!this._data)return(0,f.dy)(r||(r=(0,c.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var t=(0,m.EH)(this._data),n=t.summedData;t.compareSummedData;if(!("solar"in n.total))return f.Ld;var i,o=null!==(e=n.total.to_grid)&&void 0!==e?e:null;if(null!==o){var u=!!n.to_battery||!!n.from_battery;i=(0,m.mt)(u,n)}return(0,f.dy)(s||(s=(0,c.Z)([" <ha-card> "," </ha-card> "])),void 0!==i?(0,f.dy)(a||(a=(0,c.Z)([' <ha-gauge min="0" max="100" .value="','" label="%" .formatOptions="','" .locale="','" style="','"></ha-gauge> <ha-tooltip placement="left" hoist> <span slot="content"> '," <br><br> ",' </span> <ha-svg-icon .path="','"></ha-svg-icon> </ha-tooltip> <div class="name"> '," </div> "])),i,x,this.hass.locale,(0,g.V)({"--gauge-color":this._computeSeverity(i)}),this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.card_indicates_solar_energy_used"),this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.card_indicates_solar_energy_used_charge_home_bat"),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.self_consumed_solar_energy")):null!==o?this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.not_produced_solar_energy"):this.hass.localize("ui.panel.lovelace.cards.energy.solar_consumed_gauge.self_consumed_solar_could_not_calc"))}},{key:"_computeSeverity",value:function(e){return e>75?b.severityMap.green:e<50?b.severityMap.yellow:b.severityMap.normal}}])}((0,y.f)(f.oi));C.styles=(0,f.iv)(o||(o=(0,c.Z)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,h.__decorate)([(0,p.Cb)({attribute:!1})],C.prototype,"hass",void 0),(0,h.__decorate)([(0,p.SB)()],C.prototype,"_config",void 0),(0,h.__decorate)([(0,p.SB)()],C.prototype,"_data",void 0),C=(0,h.__decorate)([(0,p.Mo)("hui-energy-solar-consumed-gauge-card")],C),i()}catch(Z){i(Z)}})}}]);
//# sourceMappingURL=97755.01884f5de8a87409.js.map