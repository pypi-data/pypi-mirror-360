"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["27558"],{80298:function(t,e,i){i.a(t,async function(t,e){try{var n,o=i(54982),a=i(4490),s=i(54521),r=i(20129),c=i(85297),u=i(73742),l=i(52634),d=i(62685),h=i(59048),f=i(7616),_=i(75535),p=t([l]);l=(p.then?(await p)():p)[0],(0,_.jx)("tooltip.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:150,easing:"ease"}}),(0,_.jx)("tooltip.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:400,easing:"ease"}});var v=function(t){function e(){return(0,s.Z)(this,e),(0,r.Z)(this,e,arguments)}return(0,c.Z)(e,t),(0,a.Z)(e)}(l.Z);v.styles=[d.Z,(0,h.iv)(n||(n=(0,o.Z)([":host{--sl-tooltip-background-color:var(--secondary-background-color);--sl-tooltip-color:var(--primary-text-color);--sl-tooltip-font-family:var(\n          --ha-tooltip-font-family,\n          var(--ha-font-family-body)\n        );--sl-tooltip-font-size:var(\n          --ha-tooltip-font-size,\n          var(--ha-font-size-s)\n        );--sl-tooltip-font-weight:var(\n          --ha-tooltip-font-weight,\n          var(--ha-font-weight-normal)\n        );--sl-tooltip-line-height:var(\n          --ha-tooltip-line-height,\n          var(--ha-line-height-condensed)\n        );--sl-tooltip-padding:8px;--sl-tooltip-border-radius:var(--ha-tooltip-border-radius, 4px);--sl-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--sl-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}"])))],v=(0,u.__decorate)([(0,f.Mo)("ha-tooltip")],v),e()}catch(y){e(y)}})},7214:function(t,e,i){i.d(e,{Cj:function(){return h},F7:function(){return o},Hs:function(){return k},Kd:function(){return S},Kj:function(){return _},Nw:function(){return v},PA:function(){return a},Py:function(){return c},Qm:function(){return Z},Z0:function(){return m},_Y:function(){return l},_m:function(){return s},dL:function(){return u},dO:function(){return x},hN:function(){return f},h_:function(){return d},j2:function(){return b},q6:function(){return p},uR:function(){return r}});i(39710),i(26847),i(81738),i(72489),i(56389),i(27530);var n=i(15459),o=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const a=99387==i.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,s=t=>t.sendMessagePromise({type:"recorder/info"}),r=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),c=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),u=(t,e,i,n,o="hour",a,s)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==i?void 0:i.toISOString(),statistic_ids:n,period:o,units:a,types:s}),l=(t,e,i,n)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:n,fixed_period:i.fixed_period?{start_time:i.fixed_period.start instanceof Date?i.fixed_period.start.toISOString():i.fixed_period.start,end_time:i.fixed_period.end instanceof Date?i.fixed_period.end.toISOString():i.fixed_period.end}:void 0,calendar:i.calendar,rolling_window:i.rolling_window}),d=t=>t.callWS({type:"recorder/validate_statistics"}),h=(t,e,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:i}),f=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),_=t=>{let e=null;if(!t)return null;for(const i of t)null!==i.change&&void 0!==i.change&&(null===e?e=i.change:e+=i.change);return e},p=(t,e)=>{let i=null;for(const n of e){if(!(n in t))continue;const e=_(t[n]);null!==e&&(null===i?i=e:i+=e)}return i},v=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),y=["mean","min","max"],g=["sum","state","change"],m=(t,e)=>!(!y.includes(e)||0===t.mean_type)||!(!g.includes(e)||!t.has_sum),b=(t,e,i,n,o)=>{const a=new Date(i).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:a,adjustment:n,adjustment_unit_of_measurement:o})},S=(t,e,i)=>{const o=t.states[e];return o?(0,n.C)(o):(null==i?void 0:i.name)||e},x=(t,e,i)=>{let n;var o;e&&(n=null===(o=t.states[e])||void 0===o?void 0:o.attributes.unit_of_measurement);return void 0===n?null==i?void 0:i.statistics_unit_of_measurement:n},k=t=>t.includes(":"),Z=t=>t.callWS({type:"recorder/update_statistics_issues"})},6291:function(t,e,i){i.d(e,{f:function(){return d}});var n=i(75706),o=i(54521),a=i(4490),s=i(20129),r=i(53389),c=i(85297),u=(i(39710),i(26847),i(81738),i(72489),i(54480),i(1455),i(56389),i(27530),i(73742)),l=i(7616),d=function(t){var e=function(t){function e(){return(0,o.Z)(this,e),(0,s.Z)(this,e,arguments)}return(0,c.Z)(e,t),(0,a.Z)(e,[{key:"connectedCallback",value:function(){(0,r.Z)(e,"connectedCallback",this,3)([]),this._checkSubscribed()}},{key:"disconnectedCallback",value:function(){if((0,r.Z)(e,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){var t=this.__unsubs.pop();t instanceof Promise?t.then(function(t){return t()}):t()}this.__unsubs=void 0}}},{key:"updated",value:function(t){if((0,r.Z)(e,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps){var i,o=(0,n.Z)(t.keys());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(this.hassSubscribeRequiredHostProps.includes(a))return void this._checkSubscribed()}}catch(s){o.e(s)}finally{o.f()}}}},{key:"hassSubscribe",value:function(){return[]}},{key:"_checkSubscribed",value:function(){var t,e=this;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some(function(t){return void 0===e[t]})||(this.__unsubs=this.hassSubscribe())}}])}(t);return(0,u.__decorate)([(0,l.Cb)({attribute:!1})],e.prototype,"hass",void 0),e}},58623:function(t,e,i){i.a(t,async function(t,n){try{i.r(e);var o,a,s,r,c=i(54982),u=i(54521),l=i(4490),d=i(20129),h=i(85297),f=(i(12212),i(73742)),_=i(59048),p=i(7616),v=i(20480),y=(i(31138),i(97297)),g=(i(993),i(80298)),m=i(6640),b=i(6291),S=i(43309),x=i(93647),k=t([y,g,m,S]);[y,g,m,S]=k.then?(await k)():k;var Z={maximumFractionDigits:0},w=function(t){function e(){var t;(0,u.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=(0,d.Z)(this,e,[].concat(n))).hassSubscribeRequiredHostProps=["_config"],t}return(0,h.Z)(e,t),(0,l.Z)(e,[{key:"hassSubscribe",value:function(){var t,e=this;return[(0,m.UB)(this.hass,{key:null===(t=this._config)||void 0===t?void 0:t.collection_key}).subscribe(function(t){e._data=t})]}},{key:"getCardSize",value:function(){return 4}},{key:"setConfig",value:function(t){this._config=t}},{key:"shouldUpdate",value:function(t){return(0,x.SN)(this,t)||t.size>1||!t.has("hass")}},{key:"render",value:function(){var t;if(!this._config||!this.hass)return _.Ld;if(!this._data)return(0,_.dy)(o||(o=(0,c.Z)(["",""])),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));var e,i=(0,m.EH)(this._data),n=i.summedData,r=(i.compareSummedData,(0,m.E4)(n,void 0)),u=r.consumption,l=(r.compareConsumption,null!==(t=n.total.from_grid)&&void 0!==t?t:0),d=Math.max(0,u.total.used_total);return null!==l&&null!==d&&d>0&&(e=100*(1-Math.min(1,l/d))),(0,_.dy)(a||(a=(0,c.Z)([" <ha-card> "," </ha-card> "])),void 0!==e?(0,_.dy)(s||(s=(0,c.Z)([' <ha-gauge min="0" max="100" .value="','" label="%" .formatOptions="','" .locale="','" style="','"></ha-gauge> <ha-tooltip placement="left" .content="','" hoist> <ha-svg-icon .path="','"></ha-svg-icon> </ha-tooltip> <div class="name"> '," </div> "])),e,Z,this.hass.locale,(0,v.V)({"--gauge-color":this._computeSeverity(e)}),this.hass.localize("ui.panel.lovelace.cards.energy.self_sufficiency_gauge.card_indicates_self_sufficiency_quota"),"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",this.hass.localize("ui.panel.lovelace.cards.energy.self_sufficiency_gauge.self_sufficiency_quota")):this.hass.localize("ui.panel.lovelace.cards.energy.self_sufficiency_gauge.self_sufficiency_could_not_calc"))}},{key:"_computeSeverity",value:function(t){return t>75?S.severityMap.green:t<50?S.severityMap.yellow:S.severityMap.normal}}])}((0,b.f)(_.oi));w.styles=(0,_.iv)(r||(r=(0,c.Z)(["ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}"]))),(0,f.__decorate)([(0,p.Cb)({attribute:!1})],w.prototype,"hass",void 0),(0,f.__decorate)([(0,p.SB)()],w.prototype,"_config",void 0),(0,f.__decorate)([(0,p.SB)()],w.prototype,"_data",void 0),w=(0,f.__decorate)([(0,p.Mo)("hui-energy-self-sufficiency-gauge-card")],w),n()}catch(C){n(C)}})}}]);
//# sourceMappingURL=27558.dac64be838a7f00d.js.map