"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["75556"],{25842:function(t,e,a){a.d(e,{F:function(){return r}});var i=a(29694),o=a(75778),r=(a(40777),a(26847),a(24819),a(81738),a(6989),a(54480),a(1455),a(48694),a(27530),function(){var t=(0,o.Z)((0,i.Z)().m(function t(e){var o,r,n,l,c;return(0,i.Z)().w(function(t){for(;;)switch(t.n){case 0:if(e.parentNode){t.n=1;break}throw new Error("Cannot setup Leaflet map on disconnected element");case 1:return t.n=2,Promise.resolve().then(a.t.bind(a,25975,23));case 2:return(o=t.v.default).Icon.Default.imagePath="/static/images/leaflet/images/",t.n=3,a.e("90150").then(a.t.bind(a,63295,23));case 3:return r=o.map(e),(n=document.createElement("link")).setAttribute("href","/static/images/leaflet/leaflet.css"),n.setAttribute("rel","stylesheet"),e.parentNode.appendChild(n),(l=document.createElement("link")).setAttribute("href","/static/images/leaflet/MarkerCluster.css"),l.setAttribute("rel","stylesheet"),e.parentNode.appendChild(l),r.setView([52.3731339,4.8903147],13),c=s(o).addTo(r),t.a(2,[r,o,c])}},t)}));return function(e){return t.apply(this,arguments)}}()),s=function(t){return t.tileLayer("https://basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}".concat(t.Browser.retina?"@2x.png":".png"),{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",minZoom:0,maxZoom:20})}},278:function(t,e,a){a.d(e,{k:function(){return c}});var i=a(54521),o=a(4490),r=a(20129),s=a(85297),n=a(53389),l=a(25975),c=function(t){function e(t,a,o){var s;return(0,i.Z)(this,e),(s=(0,r.Z)(this,e,[t,o])).decorationLayer=a,s}return(0,s.Z)(e,t),(0,o.Z)(e,[{key:"onAdd",value:function(t){var a;return(0,n.Z)(e,"onAdd",this,3)([t]),null===(a=this.decorationLayer)||void 0===a||a.addTo(t),this}},{key:"onRemove",value:function(t){var a;return null===(a=this.decorationLayer)||void 0===a||a.remove(),(0,n.Z)(e,"onRemove",this,3)([t])}}])}(l.Marker)},7113:function(t,e,a){a.a(t,async function(t,e){try{var i,o,r,s,n,l=a(54982),c=a(54521),h=a(4490),d=a(20129),u=a(85297),p=(a(12212),a(73742)),f=a(59048),m=a(7616),v=a(20480),y=a(39884),_=a(73048),b=t([_]);_=(b.then?(await b)():b)[0];var g=function(t){function e(){var t;(0,c.Z)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=(0,d.Z)(this,e,[].concat(i))).showIcon=!1,t}return(0,u.Z)(e,t),(0,h.Z)(e,[{key:"render",value:function(){var t;return(0,f.dy)(i||(i=(0,l.Z)([' <div class="marker ','" style="','" @click="','"> '," </div> "])),this.entityPicture?"picture":"",(0,v.V)({"border-color":this.entityColor}),this._badgeTap,this.entityPicture?(0,f.dy)(o||(o=(0,l.Z)(['<div class="entity-picture" style="','"></div>'])),(0,v.V)({"background-image":"url(".concat(this.entityPicture,")")})):this.showIcon&&this.entityId?(0,f.dy)(r||(r=(0,l.Z)(['<ha-state-icon .hass="','" .stateObj="','"></ha-state-icon>'])),this.hass,null===(t=this.hass)||void 0===t?void 0:t.states[this.entityId]):this.entityUnit?(0,f.dy)(s||(s=(0,l.Z)([" ",' <span class="unit" style="display:','">',"</span> "])),this.entityName,this.entityUnit?"initial":"none",this.entityUnit):this.entityName)}},{key:"_badgeTap",value:function(t){t.stopPropagation(),this.entityId&&(0,y.B)(this,"hass-more-info",{entityId:this.entityId})}}])}(f.oi);g.styles=(0,f.iv)(n||(n=(0,l.Z)([".marker{display:flex;justify-content:center;text-align:center;align-items:center;box-sizing:border-box;width:48px;height:48px;font-size:var(--ha-marker-font-size, var(--ha-font-size-xl));border-radius:var(--ha-marker-border-radius,50%);border:1px solid var(--ha-marker-color,var(--primary-color));color:var(--primary-text-color);background-color:var(--card-background-color)}.marker.picture{overflow:hidden}.entity-picture{background-size:cover;height:100%;width:100%}.unit{margin-left:2px}"]))),(0,p.__decorate)([(0,m.Cb)({attribute:!1})],g.prototype,"hass",void 0),(0,p.__decorate)([(0,m.Cb)({attribute:"entity-id",reflect:!0})],g.prototype,"entityId",void 0),(0,p.__decorate)([(0,m.Cb)({attribute:"entity-name"})],g.prototype,"entityName",void 0),(0,p.__decorate)([(0,m.Cb)({attribute:"entity-unit"})],g.prototype,"entityUnit",void 0),(0,p.__decorate)([(0,m.Cb)({attribute:"entity-picture"})],g.prototype,"entityPicture",void 0),(0,p.__decorate)([(0,m.Cb)({attribute:"entity-color"})],g.prototype,"entityColor",void 0),(0,p.__decorate)([(0,m.Cb)({attribute:"show-icon",type:Boolean})],g.prototype,"showIcon",void 0),customElements.define("ha-entity-marker",g),e()}catch(k){e(k)}})},42031:function(t,e,a){a.a(t,async function(t,e){try{var i,o=a(54982),r=a(29694),s=a(10354),n=a(75778),l=a(75706),c=a(54521),h=a(4490),d=a(20129),u=a(85297),p=a(53389),f=a(83788),m=(a(12212),a(24819),a(2394),a(81738),a(22960),a(6989),a(96821),a(54480),a(67398),a(73742)),v=a(63359),y=a(59048),_=a(7616),b=a(39884),g=a(74266),k=a(45691),Z=a(25842),C=a(6219),M=a(15459),w=a(14370),L=(a(48017),a(7113)),x=a(278),z=t([f,L,g,k]);[f,L,g,k]=z.then?(await z)():z;var I=function(t){return"string"==typeof t?t:t.entity_id},P=function(t){function e(){var t;(0,c.Z)(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=(0,d.Z)(this,e,[].concat(i))).clickable=!1,t.autoFit=!1,t.renderPassive=!1,t.interactiveZones=!1,t.fitZones=!1,t.themeMode="auto",t.zoom=14,t.clusterMarkers=!0,t._loaded=!1,t._mapItems=[],t._mapFocusItems=[],t._mapZones=[],t._mapFocusZones=[],t._mapPaths=[],t._clickCount=0,t._loading=!1,t}return(0,u.Z)(e,t),(0,h.Z)(e,[{key:"connectedCallback",value:function(){(0,p.Z)(e,"connectedCallback",this,3)([]),this._loadMap(),this._attachObserver()}},{key:"disconnectedCallback",value:function(){(0,p.Z)(e,"disconnectedCallback",this,3)([]),this.leafletMap&&(this.leafletMap.remove(),this.leafletMap=void 0,this.Leaflet=void 0),this._loaded=!1,this._resizeObserver&&this._resizeObserver.unobserve(this)}},{key:"update",value:function(t){var a,i;if((0,p.Z)(e,"update",this,3)([t]),this._loaded){var o=!1,r=t.get("hass");if(t.has("_loaded")||t.has("entities"))this._drawEntities(),o=!0;else if(this._loaded&&r&&this.entities){var s,n=(0,l.Z)(this.entities);try{for(n.s();!(s=n.n()).done;){var c=s.value;if(r.states[I(c)]!==this.hass.states[I(c)]){this._drawEntities(),o=!0;break}}}catch(h){n.e(h)}finally{n.f()}}t.has("clusterMarkers")&&this._drawEntities(),(t.has("_loaded")||t.has("paths"))&&this._drawPaths(),(t.has("_loaded")||t.has("layers"))&&(this._drawLayers(t.get("layers")),o=!0),(t.has("_loaded")||this.autoFit&&o)&&this.fitMap(),t.has("zoom")&&this.leafletMap.setZoom(this.zoom),(t.has("themeMode")||t.has("hass")&&(!r||(null===(a=r.themes)||void 0===a?void 0:a.darkMode)!==(null===(i=this.hass.themes)||void 0===i?void 0:i.darkMode)))&&this._updateMapStyle()}}},{key:"_darkMode",get:function(){return"dark"===this.themeMode||"auto"===this.themeMode&&Boolean(this.hass.themes.darkMode)}},{key:"_updateMapStyle",value:function(){var t=this.renderRoot.querySelector("#map");t.classList.toggle("clickable",this.clickable),t.classList.toggle("dark",this._darkMode),t.classList.toggle("forced-dark","dark"===this.themeMode),t.classList.toggle("forced-light","light"===this.themeMode)}},{key:"_loadMap",value:(i=(0,n.Z)((0,r.Z)().m(function t(){var e,a,i,o=this;return(0,r.Z)().w(function(t){for(;;)switch(t.n){case 0:if(!this._loading){t.n=1;break}return t.a(2);case 1:return(e=this.shadowRoot.getElementById("map"))||((e=document.createElement("div")).id="map",this.shadowRoot.append(e)),this._loading=!0,t.p=2,t.n=3,(0,Z.F)(e);case 3:a=t.v,i=(0,s.Z)(a,2),this.leafletMap=i[0],this.Leaflet=i[1],this._updateMapStyle(),this.leafletMap.on("click",function(t){0===o._clickCount&&setTimeout(function(){1===o._clickCount&&(0,b.B)(o,"map-clicked",{location:[t.latlng.lat,t.latlng.lng]}),o._clickCount=0},250),o._clickCount++}),this._loaded=!0;case 4:return t.p=4,this._loading=!1,t.f(4);case 5:return t.a(2)}},t,this,[[2,,4,5]])})),function(){return i.apply(this,arguments)})},{key:"fitMap",value:function(t){var e,a,i,o;if(this.leafletMap&&this.Leaflet&&this.hass)if(this._mapFocusItems.length||this._mapFocusZones.length||null!==(e=this.layers)&&void 0!==e&&e.length){var r=this.Leaflet.latLngBounds(this._mapFocusItems?this._mapFocusItems.map(function(t){return t.getLatLng()}):[]);null===(a=this._mapFocusZones)||void 0===a||a.forEach(function(t){r.extend("getBounds"in t?t.getBounds():t.getLatLng())}),null===(i=this.layers)||void 0===i||i.forEach(function(t){r.extend("getBounds"in t?t.getBounds():t.getLatLng())}),r=r.pad(null!==(o=null==t?void 0:t.pad)&&void 0!==o?o:.5),this.leafletMap.fitBounds(r,{maxZoom:(null==t?void 0:t.zoom)||this.zoom})}else this.leafletMap.setView(new this.Leaflet.LatLng(this.hass.config.latitude,this.hass.config.longitude),(null==t?void 0:t.zoom)||this.zoom)}},{key:"fitBounds",value:function(t,e){var a;if(this.leafletMap&&this.Leaflet&&this.hass){var i=this.Leaflet.latLngBounds(t).pad(null!==(a=null==e?void 0:e.pad)&&void 0!==a?a:.5);this.leafletMap.fitBounds(i,{maxZoom:(null==e?void 0:e.zoom)||this.zoom})}}},{key:"_drawLayers",value:function(t){if(t&&t.forEach(function(t){return t.remove()}),this.layers){var e=this.leafletMap;this.layers.forEach(function(t){e.addLayer(t)})}}},{key:"_computePathTooltip",value:function(t,e){var a;return a=t.fullDatetime?(0,g.o0)(e.timestamp,this.hass.locale,this.hass.config):(0,v.z)(e.timestamp)?(0,k.Vu)(e.timestamp,this.hass.locale,this.hass.config):(0,k.xO)(e.timestamp,this.hass.locale,this.hass.config),"".concat(t.name,"<br>").concat(a)}},{key:"_drawPaths",value:function(){var t=this,e=this.hass,a=this.leafletMap,i=this.Leaflet;if(e&&a&&i&&(this._mapPaths.length&&(this._mapPaths.forEach(function(t){return t.remove()}),this._mapPaths=[]),this.paths)){var o=getComputedStyle(this).getPropertyValue("--dark-primary-color");this.paths.forEach(function(e){var r,s;e.gradualOpacity&&(r=e.gradualOpacity/(e.points.length-2),s=1-e.gradualOpacity);for(var n=0;n<e.points.length-1;n++){var l=e.gradualOpacity?s+n*r:void 0;t._mapPaths.push(i.circleMarker(e.points[n].point,{radius:w.T?8:3,color:e.color||o,opacity:l,fillOpacity:l,interactive:!0}).bindTooltip(t._computePathTooltip(e,e.points[n]),{direction:"top"})),t._mapPaths.push(i.polyline([e.points[n].point,e.points[n+1].point],{color:e.color||o,opacity:l,interactive:!1}))}var c=e.points.length-1;if(c>=0){var h=e.gradualOpacity?s+c*r:void 0;t._mapPaths.push(i.circleMarker(e.points[c].point,{radius:w.T?8:3,color:e.color||o,opacity:h,fillOpacity:h,interactive:!0}).bindTooltip(t._computePathTooltip(e,e.points[c]),{direction:"top"}))}t._mapPaths.forEach(function(t){return a.addLayer(t)})})}}},{key:"_drawEntities",value:function(){var t=this.hass,e=this.leafletMap,a=this.Leaflet;if(t&&e&&a&&(this._mapItems.length&&(this._mapItems.forEach(function(t){return t.remove()}),this._mapItems=[],this._mapFocusItems=[]),this._mapZones.length&&(this._mapZones.forEach(function(t){return t.remove()}),this._mapZones=[],this._mapFocusZones=[]),this._mapCluster&&(this._mapCluster.remove(),this._mapCluster=void 0),this.entities)){var i,o=getComputedStyle(this),r=o.getPropertyValue("--accent-color"),s=o.getPropertyValue("--secondary-text-color"),n=o.getPropertyValue("--dark-primary-color"),c=this._darkMode?"dark":"light",h=(0,l.Z)(this.entities);try{for(h.s();!(i=h.n()).done;){var d=i.value,u=t.states[I(d)];if(u){var p="string"!=typeof d?d.name:void 0,f=null!=p?p:(0,M.C)(u),m=u.attributes,v=m.latitude,y=m.longitude,_=m.passive,b=m.icon,g=m.radius,k=m.entity_picture,Z=m.gps_accuracy;if(v&&y)if("zone"!==(0,C.N)(u)){var w="string"!=typeof d&&"state"===d.label_mode?this.hass.formatEntityState(u):"string"!=typeof d&&"attribute"===d.label_mode&&void 0!==d.attribute?this.hass.formatEntityAttributeValue(u,d.attribute):null!=p?p:f.split(" ").map(function(t){return t[0]}).join("").substr(0,3),L=document.createElement("ha-entity-marker");L.hass=this.hass,L.showIcon="string"!=typeof d&&"icon"===d.label_mode,L.entityId=I(d),L.entityName=w,L.entityUnit="string"!=typeof d&&d.unit&&"attribute"===d.label_mode?d.unit:"",L.entityPicture=!k||"string"!=typeof d&&d.label_mode?"":this.hass.hassUrl(k),"string"!=typeof d&&(L.entityColor=d.color);var z=new x.k([v,y],void 0,{icon:a.divIcon({html:L,iconSize:[48,48],className:""}),title:f});"string"!=typeof d&&!1===d.focus||this._mapFocusItems.push(z),Z&&(z.decorationLayer=a.circle([v,y],{interactive:!1,color:n,radius:Z})),this._mapItems.push(z)}else{if(_&&!this.renderPassive)continue;var P="";if(b){var E=document.createElement("ha-icon");E.setAttribute("icon",b),P=E.outerHTML}else{var B=document.createElement("span");B.innerHTML=f,P=B.outerHTML}var O=a.circle([v,y],{interactive:!1,color:_?s:r,radius:g}),F=new x.k([v,y],O,{icon:a.divIcon({html:P,iconSize:[24,24],className:c}),interactive:this.interactiveZones,title:f});this._mapZones.push(F),!this.fitZones||"string"!=typeof d&&!1===d.focus||this._mapFocusZones.push(O)}}}}catch(T){h.e(T)}finally{h.f()}this.clusterMarkers?(this._mapCluster=a.markerClusterGroup({showCoverageOnHover:!1,removeOutsideVisibleBounds:!1,maxClusterRadius:40}),this._mapCluster.addLayers(this._mapItems),e.addLayer(this._mapCluster)):this._mapItems.forEach(function(t){return e.addLayer(t)}),this._mapZones.forEach(function(t){return e.addLayer(t)})}}},{key:"_attachObserver",value:(a=(0,n.Z)((0,r.Z)().m(function t(){var e=this;return(0,r.Z)().w(function(t){for(;;)switch(t.n){case 0:this._resizeObserver||(this._resizeObserver=new ResizeObserver(function(){var t;null===(t=e.leafletMap)||void 0===t||t.invalidateSize({debounceMoveend:!0})})),this._resizeObserver.observe(this);case 1:return t.a(2)}},t,this)})),function(){return a.apply(this,arguments)})}]);var a,i}(y.fl);P.styles=(0,y.iv)(i||(i=(0,o.Z)([":host{display:block;height:300px}#map{height:100%}#map.clickable{cursor:pointer}#map.dark{background:#090909}#map.forced-dark{color:#fff;--map-filter:invert(0.9) hue-rotate(170deg) brightness(1.5) contrast(1.2) saturate(0.3)}#map.forced-light{background:#fff;color:#000;--map-filter:invert(0)}#map.clickable:active,#map:active{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.leaflet-tile-pane{filter:var(--map-filter)}.dark .leaflet-bar a{background-color:#1c1c1c;color:#fff}.dark .leaflet-bar a:hover{background-color:#313131}.leaflet-marker-draggable{cursor:move!important}.leaflet-edit-resize{border-radius:50%;cursor:nesw-resize!important}.named-icon{display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;color:var(--primary-text-color)}.leaflet-pane{z-index:0!important}.leaflet-bottom,.leaflet-control,.leaflet-top{z-index:1!important}.leaflet-tooltip{padding:8px;font-size:var(--ha-font-size-s);background:rgba(80,80,80,.9)!important;color:#fff!important;border-radius:4px;box-shadow:none!important;text-align:center}.marker-cluster div{background-clip:padding-box;background-color:var(--primary-color);border:3px solid rgba(var(--rgb-primary-color),.2);width:32px;height:32px;border-radius:20px;text-align:center;color:var(--text-primary-color);font-size:var(--ha-font-size-m)}.marker-cluster span{line-height:var(--ha-line-height-expanded)}"]))),(0,m.__decorate)([(0,_.Cb)({attribute:!1})],P.prototype,"hass",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:!1})],P.prototype,"entities",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:!1})],P.prototype,"paths",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:!1})],P.prototype,"layers",void 0),(0,m.__decorate)([(0,_.Cb)({type:Boolean})],P.prototype,"clickable",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:"auto-fit",type:Boolean})],P.prototype,"autoFit",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:"render-passive",type:Boolean})],P.prototype,"renderPassive",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:"interactive-zones",type:Boolean})],P.prototype,"interactiveZones",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:"fit-zones",type:Boolean})],P.prototype,"fitZones",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:"theme-mode",type:String})],P.prototype,"themeMode",void 0),(0,m.__decorate)([(0,_.Cb)({type:Number})],P.prototype,"zoom",void 0),(0,m.__decorate)([(0,_.Cb)({attribute:"cluster-markers",type:Boolean})],P.prototype,"clusterMarkers",void 0),(0,m.__decorate)([(0,_.SB)()],P.prototype,"_loaded",void 0),P=(0,m.__decorate)([(0,_.Mo)("ha-map")],P),e()}catch(E){e(E)}})}}]);
//# sourceMappingURL=75556.a5485eeb26ca8d09.js.map