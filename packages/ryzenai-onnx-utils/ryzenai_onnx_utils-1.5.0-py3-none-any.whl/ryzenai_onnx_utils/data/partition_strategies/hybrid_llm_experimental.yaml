# Copyright (c) 2024 Advanced Micro Devices, Inc.

---
attributes:
    # domain to use for new ops
    domains: com.ryzenai
    xclbins: ""
    op_namespaces: "hybrid"
    # set to "" or remove to use BF16 weights
    is_bfp16: "weights"
    # flag to enable logits prune
    prune_logits: true
    npu_jit: true
# define the passes to run. These passes are defined in passes/ and are executed
# in order
# NOTE: any new passes that you add here may need to be added to the
# hybrid_llm.gitignore file
passes:
    - fastgelu_to_gelu
    - normalize_matmulnbits
    - hybrid_llm_ssmlp
    - hybrid_llm_gqa
    - hybrid_llm_gqo
    - hybrid_llm_matmulnbits
    - hybrid_llm_gqa_rotary_dim
    - hybrid_llm_add_npu_weights
    - remove_parallel_casts
    - hybrid_llm_simplify_casts
    - hybrid_llm_add_cast_attributes
    - hybrid_llm_add_empty_cast_attributes
    - hybrid_llm_prune_logits
    - simplify_matmulnbits
inherit_passes_after: !include [cleanup.yaml]
postprocess:
    - hybrid_llm_jit
