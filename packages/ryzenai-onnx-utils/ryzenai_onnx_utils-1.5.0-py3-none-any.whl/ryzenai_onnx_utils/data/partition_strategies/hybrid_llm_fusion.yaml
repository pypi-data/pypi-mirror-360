# Copyright (c) 2025 Advanced Micro Devices, Inc.

---
attributes:
    # domain to use for new ops
    domains: com.ryzenai
    xclbins: "/xclbin/stx/LLM_TPS_7bo_mladf_2x4x4_bfp16_gemm_mlp_flat_rms.xclbin"
    op_namespaces: "hybrid"
    # set to "" or remove to use BF16 weights
    # is_bfp16: "weights"
    is_llm: "true"
# define the passes to run. These passes are defined in passes/ and are executed
# in order
passes:
    - normalize_matmulnbits
    - hybrid_llm_gqa_flatmha
    - hybrid_llm_flatmlp
    - hybrid_llm_flatrmsadd
    - hybrid_llm_to_dd
    - simplify_casts
    - remove_parallel_casts
    - flatmha_external_bufs
    # - remove_io_casts
    - dd.llm_to_dd
inherit_passes_after: !include [cleanup.yaml]
