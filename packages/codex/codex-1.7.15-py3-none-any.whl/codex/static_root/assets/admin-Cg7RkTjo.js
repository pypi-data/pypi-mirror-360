import{g as P,p as I,r as R,c as $,u as W,a as i,m as y,o as X,b as k,n as le,d as D,F as T,i as ie,e as Y,f as de,t as S,h as ce,j as ue,_ as A,k as me,l as be,q as V,s as m,w as f,v as u,x as v,y as j,z as J,A as fe,B as K,C as ve,D as pe,E,G as Q,H as we,I as ge,J as _e}from"./main-CpP-5rLh.js";import{A as Se,V as ye,a as he,b as Ve,U as Te,c as Ae}from"./unauthorized-_61uqek6.js";import{S as Ce,a as xe}from"./settings-drawer-DYzm391t.js";import{useAdminStore as B,TABS as Z}from"./admin-BQ68PA7O.js";import{u as Be,V as F,f as $e,m as ke,a as De,s as Pe,b as Ie,c as We,d as Le,e as Ue}from"./forwardRefs-CGpIPavG.js";import{V as M,m as ze,a as H,b as Ee}from"./VWindowItem-DL6bN3h7.js";import{m as Me,V as q}from"./VDivider-CTvTvFr_.js";import{u as He}from"./VDialog-tf0N3lvG.js";import"./change-password-dialog-DqupgUbt.js";import"./VForm-Dw7aCtM5.js";import"./VSelectionControl-DoFzRlEh.js";import"./ssrBoot-D216TWr1.js";import"./copy-to-clipboard-DoUvDJVx.js";const N=Symbol.for("vuetify:v-tabs"),Ne=I({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...X(ke({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ee=P()({name:"VTab",props:Ne(),setup(e,t){let{slots:c,attrs:s}=t;const{textColorClasses:r,textColorStyles:n}=Be(()=>e.sliderColor),a=R(),l=R(),d=$(()=>e.direction==="horizontal"),b=$(()=>a.value?.group?.isSelected.value??!1);function L(h){let{value:o}=h;if(o){const U=a.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),z=l.value;if(!U||!z)return;const te=getComputedStyle(U).color,p=U.getBoundingClientRect(),w=z.getBoundingClientRect(),C=d.value?"x":"y",x=d.value?"X":"Y",G=d.value?"right":"bottom",g=d.value?"width":"height",ae=p[C],se=w[C],_=ae>se?p[G]-w[G]:p[C]-w[C],ne=Math.sign(_)>0?d.value?"right":"bottom":Math.sign(_)<0?d.value?"left":"top":"center",oe=(Math.abs(_)+(Math.sign(_)<0?p[g]:w[g]))/Math.max(p[g],w[g])||0,re=p[g]/w[g]||0,O=1.5;De(z,{backgroundColor:[te,"currentcolor"],transform:[`translate${x}(${_}px) scale${x}(${re})`,`translate${x}(${_/O}px) scale${x}(${(oe-1)/O+1})`,"none"],transformOrigin:Array(3).fill(ne)},{duration:225,easing:Pe})}}return W(()=>{const h=F.filterProps(e);return i(F,y({symbol:N,ref:a,class:["v-tab",e.class],style:e.style,tabindex:b.value?0:-1,role:"tab","aria-selected":String(b.value),active:!1},h,s,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":L}),{...c,default:()=>k(T,null,[c.default?.()??e.text,!e.hideSlider&&k("div",{ref:l,class:D(["v-tab__slider",r.value]),style:le(n.value)},null)])})}),$e({},a)}}),Ge=I({...X(ze(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Oe=P()({name:"VTabsWindow",props:Ge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:c}=t;const s=ie(N,null),r=Y(e,"modelValue"),n=$({get(){return r.value!=null||!s?r.value:s.items.value.find(a=>s.selected.value.includes(a.id))?.value},set(a){r.value=a}});return W(()=>{const a=M.filterProps(e);return i(M,y({_as:"VTabsWindow"},a,{modelValue:n.value,"onUpdate:modelValue":l=>n.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),c)}),{}}}),Re=I({...Ee()},"VTabsWindowItem"),je=P()({name:"VTabsWindowItem",props:Re(),setup(e,t){let{slots:c}=t;return W(()=>{const s=H.filterProps(e);return i(H,y({_as:"VTabsWindowItem"},s,{class:["v-tabs-window-item",e.class],style:e.style}),c)}),{}}});function Fe(e){return e?e.map(t=>ce(t)?t:{text:t,value:t}):[]}const qe=I({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Me({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ue(),...Le()},"VTabs"),Xe=P()({name:"VTabs",props:qe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:c,slots:s}=t;const r=Y(e,"modelValue"),n=$(()=>Fe(e.items)),{densityClasses:a}=Ie(e),{backgroundColorClasses:l,backgroundColorStyles:d}=We(()=>e.bgColor),{scopeId:b}=He();return de({VTab:{color:S(()=>e.color),direction:S(()=>e.direction),stacked:S(()=>e.stacked),fixed:S(()=>e.fixedTabs),sliderColor:S(()=>e.sliderColor),hideSlider:S(()=>e.hideSlider)}}),W(()=>{const L=q.filterProps(e),h=!!(s.window||e.items.length>0);return k(T,null,[i(q,y(L,{modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},a.value,l.value,e.class],style:[{"--v-tabs-height":ue(e.height)},d.value,e.style],role:"tablist",symbol:N},b,c),{default:()=>[s.default?.()??n.value.map(o=>s.tab?.({item:o})??i(ee,y(o,{key:o.text,value:o.value}),{default:s[`tab.${o.value}`]?()=>s[`tab.${o.value}`]?.({item:o}):void 0}))]}),h&&i(Oe,y({modelValue:r.value,"onUpdate:modelValue":o=>r.value=o,key:"tabs-window"},b),{default:()=>[n.value.map(o=>s.item?.({item:o})??i(je,{value:o.value},{default:()=>s[`item.${o.value}`]?.({item:o})})),s.window?.()]})])}),{}}}),Ye={name:"AdminTitleToolbar",components:{AppBanner:Se,SettingsDrawerButton:Ce},data(){return{TABS:Z}},computed:{...me(B,["activeTab"]),mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{$route(e){const c=e.path.split("/").at(-1);this.activeTab=be(c)}}};function Je(e,t,c,s,r,n){const a=m("AppBanner"),l=m("SettingsDrawerButton");return u(),V("header",{id:"adminHeader",class:D({drawerMargin:!n.mdAndDown})},[i(a),i(ye,{id:"titleBar",flat:"",density:"compact"},{default:f(()=>[t[2]||(t[2]=k("span",{id:"buttonSpacer"},null,-1)),i(he,{class:"codexToolbarTitle"},{default:f(()=>t[1]||(t[1]=[j(" Codex Administration ")])),_:1,__:[1]}),(u(),v(l,{key:n.mdAndDown,class:D(["adminSettingsButton",{invisible:!n.mdAndDown}]),disabled:!n.mdAndDown},null,8,["class","disabled"]))]),_:1,__:[2]}),i(Xe,{class:"adminTabs",grow:"","show-arrows":""},{default:f(()=>[(u(!0),V(T,null,J(r.TABS,d=>(u(),v(ee,{key:d,modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=b=>e.activeTab=b),to:d.toLowerCase()},{default:f(()=>[j(fe(d),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1})],2)}const Ke=A(Ye,[["render",Je],["__scopeId","data-v-026356a3"]]),Qe={name:"AdminSettingsPanel",components:{AdminBrowserLink:Ve}};function Ze(e,t,c,s,r,n){const a=m("AdminBrowserLink");return u(),v(a)}const et=A(Qe,[["render",Ze]]),tt={name:"AdminSettingsDrawer",components:{SettingsDrawer:xe,AdminSettingsPanel:et},computed:{mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{mdAndDown(e){e||this.setSettingsDrawerOpen(!0)}},mounted(){this.mdAndDown||this.setSettingsDrawerOpen(!0)},methods:{...K(ve,["setSettingsDrawerOpen"])}};function at(e,t,c,s,r,n){const a=m("AdminSettingsPanel"),l=m("SettingsDrawer");return u(),v(l,{title:"Admin",temporary:n.mdAndDown},{panel:f(()=>[i(a)]),_:1},8,["temporary"])}const st=A(tt,[["render",at]]),nt={name:"AdminTabs",data(){return{TABS:Z}},computed:{...E(B,["doNormalComicLibrariesExist"]),...E(Q,["isBanner"]),...pe(B,{librariesLoaded:e=>!!e.libraries,activeTab:e=>e.activeTab}),classes(){let e="tabItems";return this.isBanner&&(e+="Banner"),{[e]:!0}}},mounted(){this.librariesLoaded||this.loadTables(["Library"])},methods:{...K(B,["loadTables"])}},ot={key:0,id:"noLibraries"};function rt(e,t,c,s,r,n){const a=m("router-view");return u(),V(T,null,[i(M,{modelValue:e.activeTab,"onUpdate:modelValue":t[0]||(t[0]=l=>e.activeTab=l),class:D(n.classes),touch:!1},{default:f(()=>[(u(!0),V(T,null,J(r.TABS,l=>(u(),v(a,{key:l},{default:f(({Component:d})=>[i(H,{value:l,class:"tabItemContainer"},{default:f(()=>[(u(),v(ge(d)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue","class"]),e.doNormalComicLibrariesExist?we("",!0):(u(),V("div",ot," Codex has no libraries. Select the Libraries tab and add a comic library. "))],64)}const lt=A(nt,[["render",rt],["__scopeId","data-v-2943e103"]]),it={name:"MainAdmin",components:{AdminHeader:Ke,AdminSettingsDrawer:st,AdminTabs:lt,Unauthorized:Te},data(){return{mdiLogin:_e}},computed:{...E(Q,["isUserAdmin"])}};function dt(e,t,c,s,r,n){const a=m("AdminHeader"),l=m("AdminTabs"),d=m("AdminSettingsDrawer"),b=m("Unauthorized");return e.isUserAdmin?(u(),v(Ae,{key:0},{default:f(()=>[i(a),i(l),i(d)]),_:1})):(u(),v(b,{key:1}))}const Tt=A(it,[["render",dt]]);export{Tt as default};
