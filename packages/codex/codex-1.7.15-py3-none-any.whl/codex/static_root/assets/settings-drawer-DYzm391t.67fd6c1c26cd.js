const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/admin-settings-button-progress-DPuwgSVv.js","assets/main-CpP-5rLh.js","assets/main-Of3aYkZ7.css","assets/admin-BQ68PA7O.js","assets/forwardRefs-CGpIPavG.js","assets/forwardRefs-C8KYLdfc.css","assets/admin-settings-button-progress-XVi7SeHr.css","assets/admin-menu-Chx211s6.js","assets/change-password-dialog-DqupgUbt.js","assets/VDialog-tf0N3lvG.js","assets/VDialog-C_zlnjF1.css","assets/VForm-Dw7aCtM5.js","assets/VSelectionControl-DoFzRlEh.js","assets/VSelectionControl-RqBzwjYi.css","assets/VForm-DxBt30-N.css","assets/change-password-dialog-DL8UMjmX.css","assets/VDivider-CTvTvFr_.js","assets/VDivider-DU47sRrT.css","assets/index-Cu_QC2K8.js","assets/index-Czf-fUM7.css","assets/admin-menu-CKlcsy9S.css"])))=>i.map(i=>d[i]);
import{_ as x,x as T,W as Fe,z as He,v as S,w,a6 as re,m as j,B as G,D as Z,ao as ie,C as M,G as ee,b7 as Ne,aq as ue,ab as Ye,s as $,ar as ce,a as f,H as E,y as R,A as D,I as de,b8 as We,b9 as qe,ba as ve,q as z,b,T as Xe,aL as je,bb as Ge,a0 as me,g as he,p as fe,r as ge,aO as pe,aR as I,bc as Ze,c as C,bd as q,u as ye,aT as _e,be,K as we,n as Ke,d as Je,j as Se,bf as ke,t as U,bg as Ce,E as Pe,bh as Qe,bi as De,aS as W,bj as Be,bk as et,b5 as tt,bl as at,aP as ot,bm as nt,e as st,bn as lt,f as rt,bo as it,bp as ut,F as ct,aV as dt}from"./main-CpP-5rLh.js";import{V as Ve,k as F,c as Q,z as Te,y as Re,i as Ee,d as Oe,j as $e,x as Ie,A as Me,B as vt,C as mt,l as ht}from"./forwardRefs-CGpIPavG.js";import{P as ft,d as gt}from"./unauthorized-_61uqek6.js";import{c as pt}from"./copy-to-clipboard-DoUvDJVx.js";import{j as yt}from"./VSelectionControl-DoFzRlEh.js";import{V as _t,u as bt,e as wt,f as St,d as kt}from"./VDialog-tf0N3lvG.js";import{u as Ct}from"./ssrBoot-D216TWr1.js";import{a as J}from"./VDivider-CTvTvFr_.js";const Pt={name:"ScaleButton",props:{scale:{type:Boolean,default:!1}},computed:{breakPoint(){return this.$vuetify.display.xs},density(){return this.breakPoint?"compact":"default"}}};function Dt(e,o,s,c,t,a){return S(),T(Ve,{density:a.density},Fe({_:2},[He(e.$slots,(n,u)=>({name:u,fn:w(g=>[re(e.$slots,u,j({props:n},g))])}))]),1032,["density"])}const Bt=x(Pt,[["render",Dt]]),ne=ie(ue(()=>ce(()=>import("./admin-settings-button-progress-DPuwgSVv.js"),__vite__mapDeps([0,1,2,3,4,5,6])))),Vt={name:"SettingsDrawerButton",components:{AdminSettingsButtonProgress:ne,ScaleButton:Bt},data(){return{mdiMenu:Ne,AdminSettingsButtonProgress:ne}},computed:{...Z(ee,["isUserAdmin"])},methods:{...G(M,["setSettingsDrawerOpen"]),onClick(){this.setSettingsDrawerOpen(!0)}}};function Tt(e,o,s,c,t,a){const n=$("ScaleButton");return S(),T(n,{id:"settingsDrawerButton",variant:"plain",icon:"",title:"Settings",onClick:Ye(a.onClick,["prevent"])},{default:w(()=>[f(F,null,{default:w(()=>[R(D(t.mdiMenu),1)]),_:1}),e.isUserAdmin?(S(),T(de(t.AdminSettingsButtonProgress),{key:0})):E("",!0)]),_:1},8,["onClick"])}const Sa=x(Vt,[["render",Tt],["__scopeId","data-v-cdf6ad8a"]]),Rt={name:"OPDSUrl",props:{title:{type:String,required:!0},subtitle:{type:String,default:void 0},urlPath:{type:String,required:!0}},data(){return{mdiRss:ve,showTooltip:{show:!1}}},computed:{clipBoardEnabled(){return location.protocol=="https:"},clipBoardIcon(){return this.showTooltip.show?We:qe},tooltip(){return this.clipBoardEnabled},url(){return globalThis.origin+this.urlPath}},methods:{onClickURL(){this.clipBoardEnabled&&pt(this.url,this.showTooltip)}}},Et=["title"],Ot={key:0},$t={class:"copied"},It={key:1,class:"subtitle"},Mt={class:"opdsUrl"};function xt(e,o,s,c,t,a){return S(),z("div",{class:"opdsVersion",title:a.tooltip,onClick:o[0]||(o[0]=(...n)=>a.onClickURL&&a.onClickURL(...n))},[b("h3",null,[R(D(s.title)+" ",1),a.clipBoardEnabled?(S(),z("span",Ot,[f(F,{class:"clipBoardIcon",size:"small"},{default:w(()=>[R(D(a.clipBoardIcon),1)]),_:1}),f(yt,null,{default:w(()=>[Xe(b("span",$t,"Copied",512),[[je,t.showTooltip.show]])]),_:1})])):E("",!0),s.subtitle?(S(),z("span",It,D(s.subtitle),1)):E("",!0)]),b("div",Mt,D(a.url),1)],8,Et)}const At=x(Rt,[["render",xt],["__scopeId","data-v-feac632b"]]),Lt={name:"OPDSDialog",components:{OPDSUrl:At,PlaceholderLoading:ft},data(){return{mdiRss:ve}},computed:{...Z(M,{opdsURLs:e=>e.opdsURLs})},methods:{...G(M,["loadOPDSURLs"])}},zt={key:0,id:"opds"};function Ut(e,o,s,c,t,a){const n=$("OPDSUrl"),u=$("PlaceholderLoading");return S(),T(_t,{"max-width":"30em"},{activator:w(({props:g})=>[f(Ve,j({id:"opdsButton",icon:"",size:"small",variant:"plain"},g,{onClick:e.loadOPDSURLs}),{default:w(()=>[f(F,null,{default:w(()=>[R(D(t.mdiRss),1)]),_:1}),o[0]||(o[0]=R(" OPDS "))]),_:2,__:[0]},1040,["onClick"])]),default:w(()=>[e.opdsURLs?(S(),z("div",zt,[b("h2",null,[f(F,{size:"x=small",class:"inline"},{default:w(()=>[R(D(t.mdiRss),1)]),_:1}),o[1]||(o[1]=R(" OPDS "))]),f(n,{title:"v1.2","url-path":e.opdsURLs.v1},null,8,["url-path"]),f(n,{title:"v2.0","url-path":e.opdsURLs.v2,subtitle:"Experimental and not widely or well supported by clients"},null,8,["url-path"])])):(S(),T(u,{key:1}))]),_:1})}const Ft=x(Lt,[["render",Ut],["__scopeId","data-v-5646b9a1"]]),Ht={name:"RepoFooter",data(){return{mdiOpenInNew:me,mdiSourceRepository:Ge}}},Nt={id:"repo",href:"https://github.com/ajslater/codex",title:"Codex Source Repository",target:"_blank"};function Yt(e,o,s,c,t,a){return S(),z("a",Nt,[f(F,{id:"repoIcon",size:"x-small"},{default:w(()=>[R(D(t.mdiSourceRepository),1)]),_:1}),o[0]||(o[0]=R(" repository")),f(F,{color:e.$vuetify.theme.current.colors.iconsInactive,size:"x-small"},{default:w(()=>[R(D(t.mdiOpenInNew),1)]),_:1},8,["color"])])}const Wt=x(Ht,[["render",Yt],["__scopeId","data-v-fae4fb39"]]),qt=fe({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Me(),...we(),...Ie(),...be(),...$e(),...Oe({tag:"footer"}),..._e()},"VFooter"),xe=he()({name:"VFooter",props:qt(),setup(e,o){let{slots:s}=o;const c=ge(),{themeClasses:t}=pe(e),{backgroundColorClasses:a,backgroundColorStyles:n}=Q(()=>e.color),{borderClasses:u}=Te(e),{elevationClasses:g}=Re(e),{roundedClasses:i}=Ee(e),p=I(32),{resizeRef:m}=Ze(y=>{y.length&&(p.value=y[0].target.clientHeight)}),d=C(()=>e.height==="auto"?p.value:parseInt(e.height,10));return q(()=>e.app,()=>{const y=ke({id:e.name,order:C(()=>parseInt(e.order,10)),position:U(()=>"bottom"),layoutSize:d,elementSize:C(()=>e.height==="auto"?void 0:d.value),active:U(()=>e.app),absolute:U(()=>e.absolute)});Ce(()=>{c.value=y.layoutItemStyles.value})}),ye(()=>f(e.tag,{ref:m,class:Je(["v-footer",t.value,a.value,u.value,g.value,i.value,e.class]),style:Ke([n.value,e.app?c.value:{height:Se(e.height)},e.style])},s)),{}}}),Xt={name:"VersionFooter",data(){return{mdiOpenInNew:me,mdiContentCopy:Qe}},computed:{...Z(M,{versions:e=>e.versions}),...Pe(ee,["isUserAdmin"]),outdated:function(){return this.isUserAdmin&&this.semverGreaterThan(this.versions.latest>this.versions.installed)},versionTitle:function(){return this.outdated?`v${this.versions.latest} is available`:"up to date"}},created(){this.loadVersions()},methods:{...G(M,["loadVersions"]),semverGreaterThan(e,o){try{if(!e||!o)return!1;const s=e.split("."),c=o.split(".");for(const[t,a]of s.entries())if(+a>+c[t])return!0}catch(s){console.debug("compare codex versions",e,">",o,s)}return!1}}},jt={id:"version"},Gt={key:0,id:"latest"};function Zt(e,o,s,c,t,a){return S(),T(xe,{id:"version-footer",title:a.versionTitle},{default:w(()=>[b("div",jt,"codex v"+D(e.versions.installed),1),a.outdated?(S(),z("div",Gt," codex v"+D(e.versions.latest)+" is available ",1)):E("",!0)]),_:1},8,["title"])}const Kt=x(Xt,[["render",Zt],["__scopeId","data-v-4787569d"]]);function Jt(e){let{rootEl:o,isSticky:s,layoutItemStyles:c}=e;const t=I(!1),a=I(0),n=C(()=>{const i=typeof t.value=="boolean"?"top":t.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[i]:Se(a.value)}:{top:c.value.top}]});De(()=>{W(s,i=>{i?window.addEventListener("scroll",g,{passive:!0}):window.removeEventListener("scroll",g)},{immediate:!0})}),Be(()=>{window.removeEventListener("scroll",g)});let u=0;function g(){const i=u>window.scrollY?"up":"down",p=o.value.getBoundingClientRect(),m=parseFloat(c.value.top??0),d=window.scrollY-Math.max(0,a.value-m),y=p.height+Math.max(a.value,m)-window.scrollY-window.innerHeight,_=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;p.height<window.innerHeight-m?(t.value="top",a.value=m):i==="up"&&t.value==="bottom"||i==="down"&&t.value==="top"?(a.value=window.scrollY+p.top-_,t.value=!0):i==="down"&&y<=0?(a.value=0,t.value="bottom"):i==="up"&&d<=0&&(_?t.value!=="top"&&(a.value=-d+_+m,t.value="top"):(a.value=p.top+d,t.value="top")),u=window.scrollY}return{isStuck:t,stickyStyles:n}}const Qt=100,ea=20;function se(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function le(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let s=e.length-1;s>0;s--){if(e[s].t===e[s-1].t)continue;const c=se(o),t=(e[s].d-e[s-1].d)/(e[s].t-e[s-1].t);o+=(t-c)*Math.abs(t),s===e.length-1&&(o*=.5)}return se(o)*1e3}function ta(){const e={};function o(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new et(ea))).push([t.timeStamp,a])})}function s(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function c(t){const a=e[t]?.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const n=a[0],u=[],g=[];for(const i of a){if(n[0]-i[0]>Qt)break;u.push({t:i[0],d:i[1].clientX}),g.push({t:i[0],d:i[1].clientY})}return{x:le(u),y:le(g),get direction(){const{x:i,y:p}=this,[m,d]=[Math.abs(i),Math.abs(p)];return m>d&&i>=0?"right":m>d&&i<=0?"left":d>m&&p>=0?"down":d>m&&p<=0?"up":aa()}}}return{addMovement:o,endTouch:s,getVelocity:c}}function aa(){throw new Error}function oa(e){let{el:o,isActive:s,isTemporary:c,width:t,touchless:a,position:n}=e;De(()=>{window.addEventListener("touchstart",A,{passive:!0}),window.addEventListener("touchmove",O,{passive:!1}),window.addEventListener("touchend",X,{passive:!0})}),Be(()=>{window.removeEventListener("touchstart",A),window.removeEventListener("touchmove",O),window.removeEventListener("touchend",X)});const u=C(()=>["left","right"].includes(n.value)),{addMovement:g,endTouch:i,getVelocity:p}=ta();let m=!1;const d=I(!1),y=I(0),_=I(0);let P;function H(l,r){return(n.value==="left"?l:n.value==="right"?document.documentElement.clientWidth-l:n.value==="top"?l:n.value==="bottom"?document.documentElement.clientHeight-l:L())-(r?t.value:0)}function N(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const v=n.value==="left"?(l-_.value)/t.value:n.value==="right"?(document.documentElement.clientWidth-l-_.value)/t.value:n.value==="top"?(l-_.value)/t.value:n.value==="bottom"?(document.documentElement.clientHeight-l-_.value)/t.value:L();return r?tt(v):v}function A(l){if(a.value)return;const r=l.changedTouches[0].clientX,v=l.changedTouches[0].clientY,h=25,B=n.value==="left"?r<h:n.value==="right"?r>document.documentElement.clientWidth-h:n.value==="top"?v<h:n.value==="bottom"?v>document.documentElement.clientHeight-h:L(),V=s.value&&(n.value==="left"?r<t.value:n.value==="right"?r>document.documentElement.clientWidth-t.value:n.value==="top"?v<t.value:n.value==="bottom"?v>document.documentElement.clientHeight-t.value:L());(B||V||s.value&&c.value)&&(P=[r,v],_.value=H(u.value?r:v,s.value),y.value=N(u.value?r:v),m=_.value>-20&&_.value<80,i(l),g(l))}function O(l){const r=l.changedTouches[0].clientX,v=l.changedTouches[0].clientY;if(m){if(!l.cancelable){m=!1;return}const B=Math.abs(r-P[0]),V=Math.abs(v-P[1]);(u.value?B>V&&B>3:V>B&&V>3)?(d.value=!0,m=!1):(u.value?V:B)>3&&(m=!1)}if(!d.value)return;l.preventDefault(),g(l);const h=N(u.value?r:v,!1);y.value=Math.max(0,Math.min(1,h)),h>1?_.value=H(u.value?r:v,!0):h<0&&(_.value=H(u.value?r:v,!1))}function X(l){if(m=!1,!d.value)return;g(l),d.value=!1;const r=p(l.changedTouches[0].identifier),v=Math.abs(r.x),h=Math.abs(r.y);(u.value?v>h&&v>400:h>v&&h>3)?s.value=r.direction===({left:"right",right:"left",top:"down",bottom:"up"}[n.value]||L()):s.value=y.value>.5}const Y=C(()=>d.value?{transform:n.value==="left"?`translateX(calc(-100% + ${y.value*t.value}px))`:n.value==="right"?`translateX(calc(100% - ${y.value*t.value}px))`:n.value==="top"?`translateY(calc(-100% + ${y.value*t.value}px))`:n.value==="bottom"?`translateY(calc(100% - ${y.value*t.value}px))`:L(),transition:"none"}:void 0);return q(d,()=>{const l=o.value?.style.transform??null,r=o.value?.style.transition??null;Ce(()=>{o.value?.style.setProperty("transform",Y.value?.transform||"none"),o.value?.style.setProperty("transition",Y.value?.transition||null)}),at(()=>{o.value?.style.setProperty("transform",l),o.value?.style.setProperty("transition",r)})}),{isDragging:d,dragProgress:y,dragStyles:Y}}function L(){throw new Error}const na=["start","end","left","right","top","bottom"],sa=fe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>na.includes(e)},sticky:Boolean,...Me(),...we(),...wt(),...it({mobile:null}),...Ie(),...be(),...$e(),...Oe({tag:"nav"}),..._e()},"VNavigationDrawer"),la=he()({name:"VNavigationDrawer",props:sa(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:s,emit:c,slots:t}=o;const{isRtl:a}=ot(),{themeClasses:n}=pe(e),{borderClasses:u}=Te(e),{backgroundColorClasses:g,backgroundColorStyles:i}=Q(()=>e.color),{elevationClasses:p}=Re(e),{displayClasses:m,mobile:d}=nt(e),{roundedClasses:y}=Ee(e),_=vt(),P=st(e,"modelValue",null,k=>!!k),{ssrBootStyles:H}=Ct(),{scopeId:N}=bt(),A=ge(),O=I(!1),{runOpenDelay:X,runCloseDelay:Y}=St(e,k=>{O.value=k}),l=C(()=>e.rail&&e.expandOnHover&&O.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),r=C(()=>mt(e.location,a.value)),v=U(()=>e.persistent),h=C(()=>!e.permanent&&(d.value||e.temporary)),B=C(()=>e.sticky&&!h.value&&r.value!=="bottom");q(()=>e.expandOnHover&&e.rail!=null,()=>{W(O,k=>c("update:rail",!k))}),q(()=>!e.disableResizeWatcher,()=>{W(h,k=>!e.permanent&&dt(()=>P.value=!k))}),q(()=>!e.disableRouteWatcher&&!!_,()=>{W(_.currentRoute,()=>h.value&&(P.value=!1))}),W(()=>e.permanent,k=>{k&&(P.value=!0)}),e.modelValue==null&&!h.value&&(P.value=e.permanent||!d.value);const{isDragging:V,dragProgress:K}=oa({el:A,isActive:P,isTemporary:h,width:l,touchless:U(()=>e.touchless),position:r}),Ae=C(()=>{const k=h.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):l.value;return V.value?k*K.value:k}),{layoutItemStyles:te,layoutItemScrimStyles:Le}=ke({id:e.name,order:C(()=>parseInt(e.order,10)),position:r,layoutSize:Ae,elementSize:l,active:lt(P),disableTransitions:U(()=>V.value),absolute:C(()=>e.absolute||B.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:ze}=Jt({rootEl:A,isSticky:B,layoutItemStyles:te}),oe=Q(()=>typeof e.scrim=="string"?e.scrim:null),Ue=C(()=>({...V.value?{opacity:K.value*.2,transition:"none"}:void 0,...Le.value}));return rt({VList:{bgColor:"transparent"}}),ye(()=>{const k=t.image||e.image;return b(ct,null,[f(e.tag,j({ref:A,onMouseenter:X,onMouseleave:Y,class:["v-navigation-drawer",`v-navigation-drawer--${r.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":O.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":h.value,"v-navigation-drawer--persistent":v.value,"v-navigation-drawer--active":P.value,"v-navigation-drawer--sticky":B.value},n.value,g.value,u.value,m.value,p.value,y.value,e.class],style:[i.value,te.value,H.value,ze.value,e.style]},N,s),{default:()=>[k&&b("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?f(ht,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):f(kt,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&b("div",{class:"v-navigation-drawer__prepend"},[t.prepend?.()]),b("div",{class:"v-navigation-drawer__content"},[t.default?.()]),t.append&&b("div",{class:"v-navigation-drawer__append"},[t.append?.()])]}),f(ut,{name:"fade-transition"},{default:()=>[h.value&&(V.value||P.value)&&!!e.scrim&&b("div",j({class:["v-navigation-drawer__scrim",oe.backgroundColorClasses.value],style:[Ue.value,oe.backgroundColorStyles.value],onClick:()=>{v.value||(P.value=!1)}},N),null)]})])}),{isStuck:ae}}}),ra=ie(ue(()=>ce(()=>import("./admin-menu-Chx211s6.js"),__vite__mapDeps([7,1,2,8,4,5,9,10,11,12,13,14,3,15,16,17,18,19,20])))),ia={name:"SettingsDrawer",components:{AuthMenu:gt,OPDSDialog:Ft,RepoFooter:Wt,VersionFooter:Kt},props:{title:{type:String,required:!0}},data(){return{AdminMenu:ra}},computed:{...Pe(ee,["isUserAdmin","isAuthorized"]),...Z(M,{isSettingsDrawerOpen:e=>e.isSettingsDrawerOpen}),open:{get(){return this.isSettingsDrawerOpen||!this.isAuthorized},set(e){this.setSettingsDrawerOpen(e)}}},methods:{...G(M,["setSettingsDrawerOpen"])}},ua={class:"settingsDrawerContainer"},ca={id:"topBlock"},da={class:"settingsHeader"},va={id:"scrollFooter",class:"footer"};function ma(e,o,s,c,t,a){const n=$("AuthMenu"),u=$("OPDSDialog"),g=$("RepoFooter"),i=$("VersionFooter");return S(),T(la,{modelValue:a.open,"onUpdate:modelValue":o[0]||(o[0]=p=>a.open=p),"disable-route-watcher":"",location:"right",touchless:""},{append:w(()=>[f(xe,{id:"bottomFooter",class:"footer"},{default:w(()=>[f(i)]),_:1})]),default:w(()=>[b("div",ua,[b("div",ca,[b("header",da,[b("h3",null,D(s.title),1)]),f(J),e.isAuthorized?re(e.$slots,"panel",{key:0},void 0,!0):E("",!0),e.isAuthorized?(S(),T(J,{key:1})):E("",!0),f(n),e.isUserAdmin?(S(),T(de(t.AdminMenu),{key:2})):E("",!0),f(J)]),b("div",va,[e.isAuthorized?(S(),T(u,{key:0})):E("",!0),f(g)])])]),_:3},8,["modelValue"])}const ka=x(ia,[["render",ma],["__scopeId","data-v-0412ab42"]]);export{Sa as S,la as V,ka as a,Bt as b};
