import{g as E,p as $,u as D,a as n,n as S,d as C,K as R,b as r,aO as Z,aP as ke,aR as we,c as G,f as pe,aT as ee,j as P,_ as p,D as A,E as H,G as v,x as m,H as T,v as c,N as Ve,P as Se,s as g,e as J,r as Ce,bq as Le,t as Y,br as xe,bs as Be,m as I,F as te,B as ae,k as Pe,C as Ae,J as Te,w as k,Y as W,y as Ie,bt as Ee,q as $e,ab as De,bm as Me,L as Re,W as Fe,z as Ne,a6 as Ue,bu as ze,am as We}from"./main-CpP-5rLh.js";import{d as se,C as K,V as Oe}from"./VDialog-tf0N3lvG.js";import{a as He}from"./change-password-dialog-DqupgUbt.js";import{S as Ke,V as qe}from"./VForm-Dw7aCtM5.js";import{d as oe,u as je,h as Q,k as X,l as Ge,m as Je,f as Ye,c as O}from"./VSelectionControl-DoFzRlEh.js";import{d as q,c as ne,z as Qe,y as Xe,i as Ze,j as et,x as tt,A as at,l as V,D as st,k as le,L as ot,E as ie,o as re,F as nt,q as de,V as lt}from"./forwardRefs-CGpIPavG.js";import{u as it}from"./ssrBoot-D216TWr1.js";const rt=$({text:String,...R(),...q()},"VToolbarTitle"),dt=E()({name:"VToolbarTitle",props:rt(),setup(e,t){let{slots:o}=t;return D(()=>{const a=!!(o.default||o.text||e.text);return n(e.tag,{class:C(["v-toolbar-title",e.class]),style:S(e.style)},{default:()=>[a&&r("div",{class:"v-toolbar-title__placeholder"},[o.text?o.text():e.text,o.default?.()])]})}),{}}}),ut=[null,"prominent","default","comfortable","compact"],ct=$({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>ut.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...at(),...R(),...tt(),...et(),...q({tag:"header"}),...ee()},"VToolbar"),mt=E()({name:"VToolbar",props:ct(),setup(e,t){let{slots:o}=t;const{backgroundColorClasses:a,backgroundColorStyles:s}=ne(()=>e.color),{borderClasses:i}=Qe(e),{elevationClasses:d}=Xe(e),{roundedClasses:u}=Ze(e),{themeClasses:l}=Z(e),{rtlClasses:b}=ke(),f=we(!!(e.extended||o.extension?.())),y=G(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),w=G(()=>f.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return pe({VBtn:{variant:"text"}}),D(()=>{const L=!!(e.title||o.title),x=!!(o.image||e.image),h=o.extension?.();return f.value=!!(e.extended||h),n(e.tag,{class:C(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,i.value,d.value,u.value,l.value,b.value,e.class]),style:S([s.value,e.style])},{default:()=>[x&&r("div",{key:"image",class:"v-toolbar__image"},[o.image?n(V,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):n(se,{key:"image-img",cover:!0,src:e.image},null)]),n(V,{defaults:{VTabs:{height:P(y.value)}}},{default:()=>[r("div",{class:"v-toolbar__content",style:{height:P(y.value)}},[o.prepend&&r("div",{class:"v-toolbar__prepend"},[o.prepend?.()]),L&&n(dt,{key:"title",text:e.title},{text:o.title}),o.default?.(),o.append&&r("div",{class:"v-toolbar__append"},[o.append?.()])])]}),n(V,{defaults:{VTabs:{height:P(w.value)}}},{default:()=>[n(oe,null,{default:()=>[f.value&&r("div",{class:"v-toolbar__extension",style:{height:P(w.value)}},[h])]})]})]})}),{contentHeight:y,extensionHeight:w}}}),ft={name:"AppBanner",computed:{...H(v,["isBanner"]),...A(v,{banner:e=>e.adminFlags.bannerText})}};function gt(e,t,o,a,s,i){return e.isBanner?(c(),m(mt,{key:0,id:"banner",height:"36",density:"compact",flat:"",title:e.banner},null,8,["title"])):T("",!0)}const ht=p(ft,[["render",gt],["__scopeId","data-v-76681126"]]),vt={name:"AdminBrowserLink",components:{CodexListItem:K},data(){return{mdiBookshelf:Se}},computed:{...H(Ve,["lastRoute"])}};function bt(e,t,o,a,s,i){const d=g("CodexListItem");return c(),m(d,{to:e.lastRoute,"prepend-icon":s.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const yt=p(vt,[["render",bt]]),_t=$({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Je(),...Ge()},"VSwitch"),kt=E()({name:"VSwitch",inheritAttrs:!1,props:_t(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:o,slots:a}=t;const s=J(e,"indeterminate"),i=J(e,"modelValue"),{loaderClasses:d}=st(e),{isFocused:u,focus:l,blur:b}=je(e),f=Ce(),y=Le&&window.matchMedia("(forced-colors: active)").matches,w=Y(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),L=xe(),x=Y(()=>e.id||`switch-${L}`);function h(){s.value&&(s.value=!1)}function ue(M){M.stopPropagation(),M.preventDefault(),f.value?.input?.click()}return D(()=>{const[M,ce]=Be(o),me=Q.filterProps(e),fe=X.filterProps(e);return n(Q,I({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},d.value,e.class]},M,me,{modelValue:i.value,"onUpdate:modelValue":F=>i.value=F,id:x.value,focused:u.value,style:e.style}),{...a,default:F=>{let{id:ge,messagesId:he,isDisabled:ve,isReadonly:be,isValid:j}=F;const N={model:i,isValid:j};return n(X,I({ref:f},fe,{modelValue:i.value,"onUpdate:modelValue":[B=>i.value=B,h],id:ge.value,"aria-describedby":he.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:ve.value,readonly:be.value,onFocus:l,onBlur:b},ce),{...a,default:B=>{let{backgroundColorClasses:U,backgroundColorStyles:_}=B;return r("div",{class:C(["v-switch__track",y?void 0:U.value]),style:S(_.value),onClick:ue},[a["track-true"]&&r("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](N)]),a["track-false"]&&r("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](N)])])},input:B=>{let{inputNode:U,icon:_,backgroundColorClasses:ye,backgroundColorStyles:_e}=B;return r(te,null,[U,r("div",{class:C(["v-switch__thumb",{"v-switch__thumb--filled":_||e.loading},e.inset||y?void 0:ye.value]),style:S(e.inset?void 0:_e.value)},[a.thumb?n(V,{defaults:{VIcon:{icon:_,size:"x-small"}}},{default:()=>[a.thumb({...N,icon:_})]}):n(Ye,null,{default:()=>[e.loading?n(ot,{name:"v-switch",active:!0,color:j.value===!1?void 0:w.value},{default:z=>a.loader?a.loader(z):n(ie,{active:z.isActive,color:z.color,indeterminate:!0,size:"16",width:"2"},null)}):_&&n(le,{key:String(_),icon:_,size:"x-small"},null)]})])])}})}})}),{}}}),wt={name:"AuthLoginDialog",components:{SubmitFooter:Ke,CodexListItem:K},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:Te}},computed:{...A(Ae,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...A(v,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...Pe(v,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:t})=>(this.submitButtonEnabled=t,this.submitButtonEnabled)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){globalThis.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){globalThis.removeEventListener("keyup",this._keyUpListener)},methods:{...ae(v,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:t})=>{if(!t)return;const o=this.registerMode?"register":"login";return this.doAuth(o)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function pt(e,t,o,a,s,i){const d=g("CodexListItem"),u=g("SubmitFooter");return c(),m(Oe,{modelValue:e.showLoginDialog,"onUpdate:modelValue":t[7]||(t[7]=l=>e.showLoginDialog=l),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:k(({props:l})=>[n(d,I(l,{"prepend-icon":s.mdiLogin,title:i.loginLabel}),null,16,["prepend-icon","title"])]),default:k(()=>[n(qe,{id:"authDialog",ref:"form"},{default:k(()=>[n(O,{modelValue:s.credentials.username,"onUpdate:modelValue":t[0]||(t[0]=l=>s.credentials.username=l),autocomplete:"username",label:"Username",rules:s.rules.username,clearable:"",autofocus:"",onKeydown:t[1]||(t[1]=W(l=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),n(O,{ref:"password",modelValue:s.credentials.password,"onUpdate:modelValue":t[2]||(t[2]=l=>s.credentials.password=l),autocomplete:s.registerMode?"new-password":"current-password",label:"Password",rules:s.rules.password,clearable:"",type:"password",onKeydown:t[3]||(t[3]=W(l=>{s.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),n(oe,null,{default:k(()=>[s.registerMode?(c(),m(O,{key:0,ref:"passwordConfirm",modelValue:s.credentials.passwordConfirm,"onUpdate:modelValue":t[4]||(t[4]=l=>s.credentials.passwordConfirm=l),autocomplete:"new-password",label:"Confirm Password",rules:s.rules.passwordConfirm,clearable:"",type:"password",onKeydown:W(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):T("",!0)]),_:1}),e.adminFlags.registration?(c(),m(kt,{key:0,modelValue:s.registerMode,"onUpdate:modelValue":t[5]||(t[5]=l=>s.registerMode=l),label:"Register"},{default:k(()=>t[8]||(t[8]=[Ie(" Register ")])),_:1,__:[8]},8,["modelValue"])):T("",!0),n(u,{verb:s.registerMode?"Register":"Login",table:"",disabled:!s.submitButtonEnabled,onSubmit:i.submit,onCancel:t[6]||(t[6]=l=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Vt=p(wt,[["render",pt],["__scopeId","data-v-f5e28bf6"]]),St={name:"AuthMenu",components:{AuthLoginDialog:Vt,ChangePasswordDialog:He,CodexListItem:K},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:Ee}},computed:{...A(v,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...ae(v,["logout"])}},Ct={key:0};function Lt(e,t,o,a,s,i){const d=g("CodexListItem"),u=g("ChangePasswordDialog"),l=g("AuthLoginDialog");return e.user?(c(),$e("div",Ct,[n(d,{"prepend-icon":s.mdiLogout,title:i.logoutTitle,onClick:De(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),o.showChangePassword?(c(),m(u,{key:0,user:e.user},null,8,["user"])):T("",!0)])):(c(),m(l,{key:1}))}const xt=p(St,[["render",Lt]]),Bt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function Pt(e,t,o,a,s,i){return c(),m(ie,I({"aria-label":"loading",class:"codexProgressCircular",indeterminate:o.indeterminate},e.$attrs),null,16,["indeterminate"])}const At=p(Bt,[["render",Pt],["__scopeId","data-v-7bb4cf22"]]),Tt=$({actionText:String,bgColor:String,color:String,icon:Re,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...R(),...de(),...nt({size:void 0}),...ee()},"VEmptyState"),It=E()({name:"VEmptyState",props:Tt(),emits:{"click:action":e=>!0},setup(e,t){let{emit:o,slots:a}=t;const{themeClasses:s}=Z(e),{backgroundColorClasses:i,backgroundColorStyles:d}=ne(()=>e.bgColor),{dimensionStyles:u}=re(e),{displayClasses:l}=Me();function b(f){o("click:action",f)}return D(()=>{const f=!!(a.actions||e.actionText),y=!!(a.headline||e.headline),w=!!(a.title||e.title),L=!!(a.text||e.text),x=!!(a.media||e.image||e.icon),h=e.size||(e.image?200:96);return r("div",{class:C(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,i.value,l.value,e.class]),style:S([d.value,u.value,e.style])},[x&&r("div",{key:"media",class:"v-empty-state__media"},[a.media?n(V,{key:"media-defaults",defaults:{VImg:{src:e.image,height:h},VIcon:{size:h,icon:e.icon}}},{default:()=>[a.media()]}):r(te,null,[e.image?n(se,{key:"image",src:e.image,height:h},null):e.icon?n(le,{key:"icon",color:e.color,size:h,icon:e.icon},null):void 0])]),y&&r("div",{key:"headline",class:"v-empty-state__headline"},[a.headline?.()??e.headline]),w&&r("div",{key:"title",class:"v-empty-state__title"},[a.title?.()??e.title]),L&&r("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:P(e.textWidth)}},[a.text?.()??e.text]),a.default&&r("div",{key:"content",class:"v-empty-state__content"},[a.default()]),f&&r("div",{key:"actions",class:"v-empty-state__actions"},[n(V,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>[a.actions?.({props:{onClick:b}})??n(lt,{onClick:b},null)]})])])}),{}}}),Et={name:"EmptyState"};function $t(e,t,o,a,s,i){return c(),m(It,{class:"empty"},Fe({_:2},[Ne(e.$slots,(d,u)=>({name:u,fn:k(l=>[Ue(e.$slots,u,I({props:d},l),void 0,!0)])}))]),1024)}const Dt=p(Et,[["render",$t],["__scopeId","data-v-c7e33c8c"]]),Mt=$({scrollable:Boolean,...R(),...de(),...q({tag:"main"})},"VMain"),Rt=E()({name:"VMain",props:Mt(),setup(e,t){let{slots:o}=t;const{dimensionStyles:a}=re(e),{mainStyles:s}=ze(),{ssrBootStyles:i}=it();return D(()=>n(e.tag,{class:C(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:S([s.value,i.value,a.value,e.style])},{default:()=>[e.scrollable?r("div",{class:"v-main__scroller"},[o.default?.()]):o.default?.()]})),{}}}),Ft={name:"UnauthorizedEmptyState",components:{AppBanner:ht,AdminBrowserLink:yt,AuthMenu:xt,PlaceholderLoading:At,EmptyState:Dt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:We}},computed:{...H(v,["isAuthChecked","isAuthorized","isUserAdmin"]),...A(v,{showAdminBrowserLink(e){return this.$router.currentRoute?.value?.name?.startsWith("admin")&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},Nt={class:"login"};function Ut(e,t,o,a,s,i){const d=g("AppBanner"),u=g("AdminBrowserLink"),l=g("AuthMenu"),b=g("EmptyState"),f=g("PlaceholderLoading");return c(),m(Rt,{id:"unauthorized"},{default:k(()=>[n(d),e.isAuthChecked?(c(),m(b,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:s.mdiLockOutline},{default:k(()=>[r("div",Nt,[e.showAdminBrowserLink?(c(),m(u,{key:0})):T("",!0),n(l,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(c(),m(f,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const Gt=p(Ft,[["render",Ut],["__scopeId","data-v-347bd693"]]);export{ht as A,Dt as E,At as P,Gt as U,mt as V,dt as a,yt as b,Rt as c,xt as d};
