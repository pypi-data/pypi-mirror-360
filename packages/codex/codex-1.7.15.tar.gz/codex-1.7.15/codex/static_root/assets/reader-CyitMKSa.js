const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdf-doc-DpmuaK3i.js","assets/main-CpP-5rLh.js","assets/main-Of3aYkZ7.css","assets/pdf-doc-DxqOo2k2.css","assets/pager-full-pdf-D8B8_31l.js","assets/settings-drawer-DYzm391t.js","assets/forwardRefs-CGpIPavG.js","assets/forwardRefs-C8KYLdfc.css","assets/unauthorized-_61uqek6.js","assets/VDialog-tf0N3lvG.js","assets/VDialog-C_zlnjF1.css","assets/change-password-dialog-DqupgUbt.js","assets/VForm-Dw7aCtM5.js","assets/VSelectionControl-DoFzRlEh.js","assets/VSelectionControl-RqBzwjYi.css","assets/VForm-DxBt30-N.css","assets/admin-BQ68PA7O.js","assets/change-password-dialog-DL8UMjmX.css","assets/ssrBoot-D216TWr1.js","assets/unauthorized-DE63n2Pi.css","assets/copy-to-clipboard-DoUvDJVx.js","assets/VDivider-CTvTvFr_.js","assets/VDivider-DU47sRrT.css","assets/settings-drawer-WyG6HLH-.css","assets/VWindowItem-DL6bN3h7.js","assets/VWindowItem-CWBhiE_Y.css","assets/VSelect-Cv8OuNtL.js","assets/VCheckboxBtn-Bxf1MS02.js","assets/VSelect-DQPZyfSb.css","assets/pagination-toolbar-OKWewkNI.js","assets/VTable-C-cNChDa.js","assets/VTable-CHRVGI94.css","assets/confirm-dialog-AMnfyuMm.js","assets/confirm-dialog-BI5kQLy_.css","assets/pagination-toolbar-aHRrdz48.css","assets/VExpansionPanels-BjwwzLx6.js","assets/VExpansionPanels-RsCANmDP.css","assets/VRadioGroup-DJBFM2Br.js","assets/VRadioGroup-Cp9mZ7cb.css","assets/VCheckbox-DraWPvy6.js","assets/VCheckbox-CvH8ekHL.css","assets/index-Cu_QC2K8.js","assets/index-Czf-fUM7.css"])))=>i.map(i=>d[i]);
import{_ as k,B as b,D as v,E as P,al as c,x as g,H as S,w as d,d as C,s as u,v as l,a as r,y as _,A as w,q as f,ab as J,F as y,am as _e,an as Pe,m as F,ao as Q,ap as Se,aq as ee,I as te,n as oe,ar as ae,as as A,at as we,T,a6 as ye,au as Ce,av as se,z as I,k as re,b as h,aw as Re,C as ne,ax as Te,ay as Be,az as De,aA as Ie,aB as Le,aC as $e,aD as Oe,Z as Ve,aE as Ae,aF as Ee,G as L,ac as xe,a0 as Ne,aG as Ue,aH as Fe,P as ze,Q as Me,R as We,S as He,aI as qe,aJ as Ke,M as z,aK as Ge,W as je,aL as ie,aM as Ye}from"./main-CpP-5rLh.js";import{V as Ze,a as Xe,S as Je}from"./settings-drawer-DYzm391t.js";import{k as R,I as Qe,V as le}from"./forwardRefs-CGpIPavG.js";import{P as et,E as ce,A as tt,V as ot,a as at,U as st,c as rt}from"./unauthorized-_61uqek6.js";import{V as de,a as ue}from"./VWindowItem-DL6bN3h7.js";import{b as nt}from"./VSelect-Cv8OuNtL.js";import{C as W,a as it}from"./VDialog-tf0N3lvG.js";import{D as lt,T as ct,b as dt,V as E,a as ut,P as pe,c as pt,d as ht}from"./pagination-toolbar-OKWewkNI.js";import{V as gt,a as mt,b as kt,c as bt}from"./VExpansionPanels-BjwwzLx6.js";import{d as ft,V as vt,e as _t}from"./VSelectionControl-DoFzRlEh.js";import{V as x,a as N}from"./VRadioGroup-DJBFM2Br.js";import{a as M}from"./VDivider-CTvTvFr_.js";import{V as D}from"./VCheckbox-DraWPvy6.js";import{T as U}from"./index-Cu_QC2K8.js";function he(e,t){const{self:s=!1}=t.modifiers??{},p=t.value,n=typeof p=="object"&&p.options||{passive:!0},o=typeof p=="function"||"handleEvent"in p?p:p.handler,i=s?e:t.arg?document.querySelector(t.arg):window;i&&(i.addEventListener("scroll",o,n),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:o,options:n,target:s?void 0:i})}function ge(e,t){if(!e._onScroll?.[t.instance.$.uid])return;const{handler:s,options:p,target:n=e}=e._onScroll[t.instance.$.uid];n.removeEventListener("scroll",s,p),delete e._onScroll[t.instance.$.uid]}function Pt(e,t){t.value!==t.oldValue&&(ge(e,t),he(e,t))}const St={mounted:he,unmounted:ge,updated:Pt},wt={name:"BookChangeDrawer",props:{direction:{type:String,required:!0}},head(){if(this.isDrawerOpen)return this.prefetchLinks(this.params,this.computedDirection,!0)},computed:{...P(c,["isBTT"]),...v(c,{computedDirection(){return this.normalizeDirection(this.direction)},params(e){return e.routes.books[this.computedDirection]},isDrawerOpen(e){return e.bookChange===this.computedDirection},icon(){return this.bookChangeIcon(this.computedDirection)}}),drawerLocation(){return this.bookChangeLocation(this.direction)},cursorClass(){return this.bookChangeCursorClass(this.computedDirection)},show(){return this.bookChangeShow(this.computedDirection)},route(){return this.toRoute(this.params)},label(){return this.linkLabel(this.computedDirection,"Book")}},methods:{...b(c,["linkLabel","normalizeDirection","prefetchLinks","toRoute","bookChangeLocation","bookChangeCursorClass","bookChangeShow","bookChangeIcon"])}};function yt(e,t,s,p,n,o){const i=u("router-link");return o.show?(l(),g(Ze,{key:0,class:C(["bookChangeDrawer",{drawerActivated:e.isDrawerOpen}]),"disable-resize-watcher":"","disable-route-watcher":"",location:o.drawerLocation,"model-value":e.isDrawerOpen,scrim:!1,temporary:"",touchless:""},{default:d(()=>[r(i,{class:C({navLink:!0,[o.cursorClass]:!0}),to:o.route,"aria-label":o.label,title:o.label,onClick:t[0]||(t[0]=a=>a.stopImmediatePropagation())},{default:d(()=>[r(R,{class:"bookChangeIcon"},{default:d(()=>[_(w(e.icon),1)]),_:1})]),_:1},8,["class","to","aria-label","title"])]),_:1},8,["location","model-value","class"])):S("",!0)}const Ct=k(wt,[["render",yt],["__scopeId","data-v-bd4115bf"]]),Rt={name:"BookChangeActivator",components:{BookChangeDrawer:Ct},props:{direction:{type:String,required:!0}},computed:{show(){return this.bookChangeShow(this.computedDirection)},computedDirection(){return this.normalizeDirection(this.direction)},positionClass(){return this.bookChangeLocation(this.direction)+"Pos"},cursorClass(){return this.bookChangeCursorClass(this.direction)}},methods:{...b(c,["bookChangeCursorClass","bookChangeLocation","bookChangeShow","normalizeDirection","setBookChangeFlag"])}};function Tt(e,t,s,p,n,o){const i=u("BookChangeDrawer");return l(),f(y,null,[o.show?(l(),f("div",{key:0,class:C(["changeColumn",{[o.positionClass]:!0,[o.cursorClass]:!0}]),onClick:t[0]||(t[0]=J(a=>e.setBookChangeFlag(s.direction),["stop"]))},null,2)):S("",!0),r(i,{direction:s.direction},null,8,["direction"])],64)}const Bt=k(Rt,[["render",Tt],["__scopeId","data-v-67df236c"]]),Dt={name:"LoadingPage",components:{Placeholder:et},props:{twoPages:{type:Boolean,required:!0}}};function It(e,t,s,p,n,o){const i=u("Placeholder");return l(),f("div",{class:C(["pageLoading",{twoPages:s.twoPages}])},[r(i,{class:"pagePlaceholder"})],2)}const Lt=k(Dt,[["render",It],["__scopeId","data-v-04027168"]]),H="unauthorized",$t={name:"ErrorPage",components:{EmptyState:ce},props:{twoPages:{type:Boolean,required:!0},type:{type:String,required:!0}},emits:["retry"],computed:{text(){return this.type===H?"Protected page":"Failed to load page"},icon(){return this.type===H?_e:Pe}},methods:{onAction(e){this.$emit("retry",e)}}};function Ot(e,t,s,p,n,o){const i=u("EmptyState");return l(),g(i,{class:C(["pageError",{twoPages:s.twoPages}]),headline:o.text,icon:o.icon,"action-text":"Retry","onClick:action":o.onAction},null,8,["class","headline","icon","onClick:action"])}const Vt=k($t,[["render",Ot],["__scopeId","data-v-97fa48e8"]]),At={name:"ImgPage",props:{book:{type:Object,required:!0},src:{type:String,required:!0}},emits:["load","error"],computed:{...v(c,{scale:e=>e.clientSettings.scale}),style(){const e={};if(this.scale==1)return e;const t=this.$el;if(!t?.naturalWidth)return e;const s=t.naturalWidth/2;return e.transformOrigin=`${s}px top`,e.transform=`scale(${this.scale})`,e},bookSettings(){return this.getBookSettings(this.book)},classes(){return this.bookSettings.fitToClass}},methods:{...b(c,["getBookSettings"])}},Et=["src"];function xt(e,t,s,p,n,o){return l(),f("img",F({class:[o.classes,"img"],draggable:"false",src:s.src,style:o.style},e.$attrs,{onError:t[0]||(t[0]=i=>e.$emit("error",i)),onLoad:t[1]||(t[1]=i=>e.$emit("load",i))}),null,16,Et)}const q=k(At,[["render",xt],["__scopeId","data-v-014c2ac0"]]),K=Q(ee(()=>ae(()=>import("./pdf-doc-DpmuaK3i.js"),__vite__mapDeps([0,1,2,3])))),Nt=333,Ut={name:"BookPage",components:{ErrorPage:Vt,LoadingPage:Lt,PDFDoc:K,ImgPage:q},props:{book:{type:Object,required:!0},page:{type:Number,required:!0}},data(){return{showProgress:!1,loaded:!1,error:"",ts:0}},computed:{...v(c,{scale:e=>e.clientSettings.scale}),style(){const e={};if(this.book.fileType==="PDF"||this.scale==1)return e;const t=this.$refs.pageComponent?.$el;return t?.naturalHeight&&(e.height=t.naturalHeight*this.scale+"px",e.width=t.naturalWidth*this.scale+"px"),e},src(){const e=Math.max(this.book.mtime,this.ts),t={pk:this.book.pk,page:this.page,mtime:e};return Se(t)},component(){return this.book.fileType==="PDF"?K:q}},mounted(){setTimeout(function(){this.loaded||(this.loading=!0)},Nt)},methods:{onLoad(){this.showProgress=!1,this.loaded=!0,this.error=!1},onError(){this.error="load",this.showProgress=!1},onUnauthorized(){this.error="unauthorized",this.showProgress=!1},onRetry(){this.ts=Date.now()}}},Ft=["id","data-page"];function zt(e,t,s,p,n,o){const i=u("ErrorPage"),a=u("LoadingPage");return l(),f("div",{id:`page${s.page}`,key:n.ts,"data-page":s.page,class:"page",style:oe(o.style)},[n.error?(l(),g(i,{key:0,"two-pages":e.settings.twoPages,type:n.error,onRetry:o.onRetry},null,8,["two-pages","type","onRetry"])):n.showProgress&&!n.loaded?(l(),g(a,{key:1,"two-pages":e.settings.twoPages},null,8,["two-pages"])):(l(),g(te(o.component),{key:2,ref:"pageComponent",book:s.book,page:1,src:o.src,onError:o.onError,onLoad:o.onLoad,onUnauthorized:o.onUnauthorized},null,40,["book","src","onError","onLoad","onUnauthorized"]))],12,Ft)}const me=k(Ut,[["render",zt],["__scopeId","data-v-ea178cb3"]]),Mt=.5,Wt={name:"ScaleForScroll",emits:["click"],data(){return{mdiMagnifyMinusOutline:we}},computed:{...v(c,{scale:e=>e.clientSettings.scale}),showReset(){return this.scale!=A},style(){return{cursor:this.scale==A?"zoom-in":"all-scroll"}}},methods:{...b(c,["setSettingsClient"]),clearSelection(){globalThis.getSelection&&globalThis.getSelection().removeAllRanges()},onDoubleClick(){this.clearSelection();const e=this.scale+Mt;this.setSettingsClient({scale:e})},scaleReset(){this.setSettingsClient({scale:A})}}};function Ht(e,t,s,p,n,o){const i=Ce("drag-scroller");return T((l(),f("div",{class:"scaleForScroll",style:oe(o.style),onDblclick:t[0]||(t[0]=(...a)=>o.onDoubleClick&&o.onDoubleClick(...a))},[ye(e.$slots,"default",{},void 0,!0),o.showReset?(l(),g(R,{key:0,class:"resetIcon",onClick:J(o.scaleReset,["stop"])},{default:d(()=>[_(w(n.mdiMagnifyMinusOutline),1)]),_:1},8,["onClick"])):S("",!0)],36)),[[i,,void 0,{onlyX:!0}]])}const ke=k(Wt,[["render",Ht],["__scopeId","data-v-88f3df90"]]),qt={name:"HorizontalPages",components:{BookPage:me,ScaleForScroll:ke},props:{book:{type:Object,required:!0},page:{type:Number,required:!0}},emits:["click"],computed:{bookSettings(){return this.getBookSettings(this.book)},isReadInReverse(){return this.bookSettings.isReadInReverse},showSecondPage(){return this.bookSettings.twoPages&&this.page<this.book.maxPage&&!this.isCoverPage(this.book,this.page)},showPageOne(){return!this.isReadInReverse||this.showSecondPage},showPageTwo(){return this.isReadInReverse||this.showSecondPage},pageOne(){return this.isReadInReverse?this.page+1:this.page},pageTwo(){return this.isReadInReverse?this.page:this.page+1}},methods:{...b(c,["getBookSettings","isCoverPage"])}};function Kt(e,t,s,p,n,o){const i=u("BookPage"),a=u("ScaleForScroll");return l(),g(a,{class:"noWrap"},{default:d(()=>[o.showPageOne?(l(),g(i,{key:0,ref:"pageOne",book:s.book,page:o.pageOne,class:"horizontalPage"},null,8,["book","page"])):S("",!0),o.showPageTwo?(l(),g(i,{key:1,book:s.book,page:o.pageTwo,class:"horizontalPage"},null,8,["book","page"])):S("",!0)]),_:1})}const Gt=k(qt,[["render",Kt],["__scopeId","data-v-ce77a1b1"]]),jt={name:"PageChangeLink",props:{direction:{type:String,required:!0}},head(){return this.prefetchLinks(this.params,this.computedDirection)},computed:{...P(c,["isFirstPage","isLastPage"]),...v(c,{params(e){return e.routes[this.computedDirection]}}),computedDirection(){return this.normalizeDirection(this.direction)},show(){return this.computedDirection==="prev"?!this.isFirstPage:!this.isLastPage},pageChangeClass(){return"pageChangeColumn"},directionClass(){return this.direction},route(){return this.toRoute(this.params)},label(){return this.linkLabel(this.computedDirection,"Page")}},methods:{...b(c,["linkLabel","normalizeDirection","prefetchLinks","toRoute"])}};function Yt(e,t,s,p,n,o){const i=u("router-link");return o.show?(l(),g(i,{key:0,to:o.route,"aria-label":o.label,class:C(["changeColumn",{[o.directionClass]:!0}]),onClick:t[0]||(t[0]=a=>a.stopImmediatePropagation())},null,8,["to","aria-label","class"])):S("",!0)}const Zt=k(jt,[["render",Yt],["__scopeId","data-v-e7f427cd"]]),Xt=48,Jt=48,Qt={name:"PagerHorizontal",components:{HorizontalPages:Gt,PageChangeLink:Zt},props:{book:{type:Object,required:!0}},data(){return{activePage:0,pages:[]}},computed:{...v(c,{prevBook:e=>e.routes.books?.prev,nextBook:e=>e.routes.books?.next,storePage:e=>e.page,storePk:e=>e.books.current.pk,transition:e=>e.readerSettings.pageTransition}),bookSettings(){return this.getBookSettings(this.book)},twoPages(){return this.bookSettings.twoPages},isReadInReverse(){return this.bookSettings.isReadInReverse},windowIndex(){const e=this.activePage-this.pages[0];return Math.min(Math.max(0,e),this.book.maxPage)}},watch:{twoPages(){this.setActivePage(this.storePage,!0)},storePage(e){if(this.book.pk===this.storePk){this.activePage=e;const t=this.pages.at(0),s=this.pages.at(-1);(e<t||e>s)&&this.setPages()}}},created(){this.book.pk===this.storePk?this.activePage=+this.$route.params.page:this.book.pk===this.prevBook.pk?this.activePage=this.book.maxPage:this.activePage=0,this.setPages()},methods:{...b(c,["getBookSettings","setBookChangeFlag","setActivePage"]),setPages(){const e=Math.max(this.activePage-Xt,0),t=Math.min(this.activePage+Jt,this.book.maxPage);this.pages=se(e,t+1)}}};function eo(e,t,s,p,n,o){const i=u("PageChangeLink"),a=u("HorizontalPages");return l(),g(de,{"show-arrows":"",continuous:"","model-value":o.windowIndex,reverse:o.isReadInReverse},{prev:d(()=>[r(i,{direction:"prev"})]),next:d(()=>[r(i,{direction:"next"})]),default:d(()=>[(l(!0),f(y,null,I(n.pages,m=>(l(),g(ue,{key:`c/${s.book.pk}/${m}`,class:"windowItem",disabled:"",eager:m>=e.storePage-1&&m<=e.storePage+2,"model-value":m,transition:e.transition,"reverse-transition":e.transition},{default:d(()=>[r(a,{book:s.book,page:m},null,8,["book","page"])]),_:2},1032,["eager","model-value","transition","reverse-transition"]))),128))]),_:1},8,["model-value","reverse"])}const G=k(Qt,[["render",eo],["__scopeId","data-v-a55977d3"]]),j=250,to={name:"PagerVertical",components:{BookPage:me,ScaleForScroll:ke},props:{book:{type:Object,required:!0}},data(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth,intersectorOn:!1,programmaticScroll:!1,intersectOptions:{handler:this.onIntersect,options:{threshold:[.75]}}}},computed:{...v(c,{storePage:e=>e.page,showToolbars:e=>e.showToolbars}),...re(c,["reactWithScroll"]),bookSettings(){return this.getBookSettings(this.book)},isReadInReverse(){return this.bookSettings.isReadInReverse},items(){const e=this.book?.maxPage?this.book.maxPage+1:0,t=se(0,e);return this.isReadInReverse&&t.reverse(),t}},watch:{storePage(e){this.reactWithScroll&&this.scrollToPage(e)}},mounted(){window.addEventListener("resize",this.onResize),setTimeout(()=>{this.scrollToPage(this.storePage)},j)},beforeUnmount(){window.removeEventListener("resize",this.onResize)},methods:{...b(c,["getBookSettings","setActivePage","setBookChangeFlag"]),onIntersect(e,t){if(e&&this.intersectorOn){const p=+t[0].target.dataset.page;this.setActivePage(p,!1)}},onScroll(){if(this.programmaticScroll)return;this.intersectorOn=!0;const e=this.$refs.verticalScroll.$el,t=e.scrollTop;if(this.storePage===0&&t===0)this.setBookChangeFlag("prev");else if(this.storePage===this.book.maxPage){const s=e.scrollTopMax||e.scrollHeight-e.clientTop;window.innerHeight+t+1>=s&&this.setBookChangeFlag("next")}},scrollToPage(e){this.intersectorOn=!1,this.programmaticScroll=!0;const t=this.$refs.verticalScroll;t?t.scrollToIndex(e):console.debug("Can't find verticalScroll component."),setTimeout(()=>{this.programmaticScroll=!1},j)},onResize(){this.innerHeight=window.innerHeight,this.innerWidth=window.innerWidth}}},oo=["data-page"];function ao(e,t,s,p,n,o){const i=u("BookPage"),a=u("ScaleForScroll");return l(),g(a,null,{default:d(()=>[T((l(),g(nt,{id:"verticalScroll",key:o.isReadInReverse,ref:"verticalScroll",items:o.items,height:n.innerHeight,width:n.innerWidth},{default:d(({item:m})=>[r(i,{book:s.book,page:m,class:"verticalPage"},null,8,["book","page"]),T(h("div",{class:C(["pageTracker",{pageTrackerToolbars:e.showToolbars}]),"data-page":m},null,10,oo),[[Qe,n.intersectOptions,void 0,{quiet:!0}]])]),_:1},8,["items","height","width"])),[[St,o.onScroll,"#verticalScroll"]])]),_:1})}const Y=k(to,[["render",ao],["__scopeId","data-v-4fdc17f1"]]),Z=Q(ee(()=>ae(()=>import("./pager-full-pdf-D8B8_31l.js"),__vite__mapDeps([4,1,2,0,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42])))),so={name:"PagerSelector",components:{PagerHorizontal:G,PagerPDF:Z,PagerVertical:Y},props:{book:{type:Object,required:!0}},emits:["click"],head(){return this.prefetchBook(this.book)},computed:{...P(c,["cacheBook"]),...v(c,{storePk:e=>e.books?.current?.pk||0}),isActiveBook(){return this.book&&this.storePk===this.book?.pk},bookSettings(){return this.getBookSettings(this.book)},readerFullPdf(){return this.book?.fileType=="PDF"&&this.cacheBook&&!this.bookSettings.isVertical},component(){let e;return this.readerFullPdf?e=Z:this.bookSettings.isVertical?e=Y:e=G,e}},watch:{$route(e){+e.params.pk===this.book.pk&&this.setActivePage(+e.params.page,!0)}},created(){this.isActiveBook&&this.setActivePage(+this.$route.params.page,!0)},methods:{...b(c,["getBookSettings","isBookVertical","setActivePage","prefetchBook"])}};function ro(e,t,s,p,n,o){return l(),g(te(o.component),{book:s.book},null,8,["book"])}const no=k(so,[["render",ro]]),io={name:"BooksWindow",components:{BookChangeActivator:Bt,Pager:no},computed:{...P(c,["isBTT"]),...v(c,{books:e=>[e.books.prev,e.books.current,e.books.next].filter(Boolean),bookChange:e=>e.bookChange,currentBookPk:e=>e.books?.current?.pk||0,bookRoutes:e=>e.routes.books,transition:e=>e.readerSettings.pageTransition}),bookChangePrev(){return this.bookChangeShow("prev")},bookChangeNext(){return this.bookChangeShow("next")}},watch:{$route(e,t){(!t||!t.params||+e.params.pk!=+t.params.pk)&&this.loadBooks({params:e.params})}},beforeMount(){this.setBookChangeFlag(),this.loadBooks({})},methods:{...b(c,["loadBooks","setBookChangeFlag","toggleToolbars"]),click(){this.toggleToolbars(),this.setBookChangeFlag()},eager(e){return this.bookChange&&this.bookRoutes[this.bookChange]&&this.bookRoutes[this.bookChange].pk===e}}};function lo(e,t,s,p,n,o){const i=u("BookChangeActivator"),a=u("Pager");return l(),g(de,{id:"booksWindow",direction:"vertical","model-value":e.currentBookPk,reverse:e.isBTT,"show-arrows":"",onClick:e.toggleToolbars},{prev:d(()=>[r(i,{direction:"prev"})]),next:d(()=>[r(i,{direction:"next"})]),default:d(()=>[(l(!0),f(y,null,I(e.books,m=>(l(),g(ue,{key:`c/${m.pk}`,class:"windowItem",disabled:"",eager:o.eager(m.pk),value:m.pk,transition:e.transition,"reverse-transitin":e.transition},{default:d(()=>[r(a,{book:m,onClick:o.click},null,8,["book","onClick"])]),_:2},1032,["eager","value","transition","reverse-transitin"]))),128))]),_:1},8,["model-value","reverse","onClick"])}const co=k(io,[["render",lo],["__scopeId","data-v-4293272b"]]),uo={name:"DownloadPanel",components:{CodexListItem:W,DownloadButton:lt},data(){return{mdiDownload:De,mdiFileImage:Be}},computed:{...P(c,["activeTitle","routeParams"]),...v(c,{currentBook:e=>e.books?.current,fileType:e=>e.books?.current?.fileType,mtime:e=>e.books?.current?.mtime,pk:e=>e.books?.current?.pk,filename:e=>e.books?.current?.filename,storePage:e=>e.page}),pageSrc(){const e={pk:this.pk,page:this.storePage,ts:this.ts};return Te(e)},pageName(){const e=this.fileType==="PDF"?"pdf":"jpg";return`${this.activeTitle} - page ${this.storePage}.${e}`},downloadPageTitle(){return`Download Page ${this.storePage}`},downloadItem(){return{group:"c",ids:[this.pk],childCount:1,name:this.filename,mtime:this.mtime}}},methods:{...b(ne,["downloadIOSPWAFix"]),downloadPage(){Re(this.pageSrc,this.pageName)}}},po={key:0,id:"downloadPanel"};function ho(e,t,s,p,n,o){const i=u("CodexListItem"),a=u("DownloadButton");return e.currentBook?(l(),f("div",po,[r(i,{"prepend-icon":n.mdiFileImage,title:o.downloadPageTitle,onClick:o.downloadPage},null,8,["prepend-icon","title","onClick"]),r(a,{button:!1,item:o.downloadItem},null,8,["item"])])):S("",!0)}const go=k(uo,[["render",ho],["__scopeId","data-v-9c04e057"]]),mo={name:"KeyboardShortcutsTable",data(){return{mdiMenuLeft:Oe,mdiMenuRight:$e,mdiKeyboardSpace:Le,mdiAppleKeyboardShift:Ie}}},ko={class:"highlight-table"};function bo(e,t,s,p,n,o){return l(),f(y,null,[t[9]||(t[9]=h("h4",null,"Navigation",-1)),h("table",ko,[h("tbody",null,[h("tr",null,[h("td",null,[r(R,{class:"keyIcon",density:"compact"},{default:d(()=>[_(w(n.mdiMenuLeft),1)]),_:1}),t[0]||(t[0]=_(", j, ")),h("div",null,[r(R,{class:"keyIcon",density:"compact"},{default:d(()=>[_(w(n.mdiAppleKeyboardShift),1)]),_:1}),r(R,{class:"keyIcon",density:"compact"},{default:d(()=>[_(w(n.mdiKeyboardSpace),1)]),_:1})])]),t[1]||(t[1]=h("td",null,"Previous page",-1))]),h("tr",null,[h("td",null,[r(R,{class:"keyIcon",density:"compact"},{default:d(()=>[_(w(n.mdiMenuRight),1)]),_:1}),t[2]||(t[2]=_(", k, ")),r(R,{class:"keyIcon",density:"compact"},{default:d(()=>[_(w(n.mdiKeyboardSpace),1)]),_:1})]),t[3]||(t[3]=h("td",null,"Next page",-1))]),t[4]||(t[4]=h("tr",null,[h("td",null,","),h("td",null,[_("Next "),h("em",null,"only"),_(" one page in two page mode.")])],-1)),t[5]||(t[5]=h("tr",null,[h("td",null,"."),h("td",null,[_("Previous "),h("em",null,"only"),_(" one page in two page mode.")])],-1)),t[6]||(t[6]=h("tr",null,[h("td",null,"p"),h("td",null,"Previous Book")],-1)),t[7]||(t[7]=h("tr",null,[h("td",null,"n"),h("td",null,"Next Book")],-1)),t[8]||(t[8]=h("tr",null,[h("td",null,"esc"),h("td",null,"Close book")],-1))])]),t[10]||(t[10]=Ve('<h4 data-v-1624cd48>Fit Page To</h4><table class="highlight-table" data-v-1624cd48><tbody data-v-1624cd48><tr data-v-1624cd48><td data-v-1624cd48>s</td><td data-v-1624cd48>screen</td></tr><tr data-v-1624cd48><td data-v-1624cd48>h</td><td data-v-1624cd48>screen height</td></tr><tr data-v-1624cd48><td data-v-1624cd48>w</td><td data-v-1624cd48>screen width</td></tr><tr data-v-1624cd48><td data-v-1624cd48>o</td><td data-v-1624cd48>Show page at original size</td></tr><tr data-v-1624cd48><td data-v-1624cd48>2</td><td data-v-1624cd48>Toggle two page view</td></tr><tr data-v-1624cd48><td data-v-1624cd48>r</td><td data-v-1624cd48>Read Right to Left</td></tr><tr data-v-1624cd48><td data-v-1624cd48>l</td><td data-v-1624cd48>Read Left to Right</td></tr><tr data-v-1624cd48><td data-v-1624cd48>t</td><td data-v-1624cd48>Read Top to Bottom</td></tr><tr data-v-1624cd48><td data-v-1624cd48>b</td><td data-v-1624cd48>Read in Bottom to Top</td></tr></tbody></table><h4 data-v-1624cd48>Other</h4><table class="highlight-table" data-v-1624cd48><tbody data-v-1624cd48><tr data-v-1624cd48><td data-v-1624cd48>m</td><td data-v-1624cd48>Show comic&#39;s metadata</td></tr><tr data-v-1624cd48><td data-v-1624cd48>double click</td><td data-v-1624cd48>Zoom page</td></tr></tbody></table>',4))],64)}const fo=k(mo,[["render",bo],["__scopeId","data-v-1624cd48"]]),vo=/iP(?:ad|hone|od)|Android/,_o=vo.test(navigator.userAgent),Po=_o||globalThis.orientation!==void 0,So={name:"KeyboardShortcutsPanel",components:{CodexListItem:W,KeyboardShortcutsTable:fo},data(){return{mdiKeyboardOutline:Ae,IS_MOBILE:Po}}};function wo(e,t,s,p,n,o){const i=u("CodexListItem"),a=u("KeyboardShortcutsTable");return n.IS_MOBILE?S("",!0):(l(),g(gt,{key:0},{default:d(()=>[r(mt,{id:"readerKeyboardShortcuts"},{default:d(()=>[r(kt,{id:"shortcutsTitle"},{default:d(()=>[r(i,{id:"keyboardShortcutsItem","prepend-icon":n.mdiKeyboardOutline,title:"Keyboard Shortcuts"},null,8,["prepend-icon"])]),_:1}),r(bt,null,{default:d(()=>[r(a)]),_:1})]),_:1})]),_:1}))}const yo=k(So,[["render",wo],["__scopeId","data-v-8285795a"]]),be=["fitTo","readingDirection","twoPages"];Object.freeze(be);const Co={name:"ReaderSettingsPanel",components:{CodexListItem:W},data(){return{isGlobalScope:!1,mdiOpenInNew:Ne,mdiEye:xe,openDelay:2e3,scopeItems:[{title:"Only this comic",value:!1},{title:"Default for all comics",value:!0}]}},computed:{...P(L,["isAuthDialogOpen"]),...P(c,["isVertical","isPDF","cacheBook"]),...v(c,{choices:e=>e.choices,validBook:e=>!!e.books?.current,selectedSettings(e){return this.isGlobalScope||!e.books?.current?e.readerSettings:e.books?.current.settings},isClearSettingsButtonDisabled(e){if(this.isGlobalScope||!e.books?.current)return!0;for(const t of be){const s=e.books?.current.settings[t];if(!e.choices.nullValues.has(s))return!1}return!0},pdfInBrowserURL(e){return this.isPDF&&e.books?.current?Ee(e.books?.current):""},finishOnLastPage:e=>e.readerSettings.finishOnLastPage,pageTransition:e=>e.readerSettings.pageTransition}),...re(c,["readRtlInReverse"]),fitToChoices(){return this.choicesWithoutNull("fitTo")},readingDirectionChoices(){return this.choicesWithoutNull("readingDirection")},disableTwoPages(){return this.isVertical||this.isPDF&&this.cacheBook},disableCacheBook(){return this.isVertical&&this.isPDF},disablePageTransition(){return this.isVertical&&this.isPDF}},mounted(){document.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){document.removeEventListener("keyup",this._keyUpListener)},methods:{...b(c,["clearSettingsLocal","setSettingsGlobal","setSettingsLocal","setSettingsClient"]),settingsDialogChanged(e){this.isGlobalScope?this.setSettingsGlobal(e):this.setSettingsLocal(e)},choicesWithoutNull(e){const t=[];for(const s of this.choices[e])s.value&&t.push(s);return Object.freeze(t),t},_keyUpListener(e){if(e.stopPropagation(),this.isAuthDialogOpen)return;let t;switch(e.key){case"w":t={fitTo:"W"};break;case"h":t={fitTo:"H"};break;case"s":t={fitTo:"S"};break;case"o":t={fitTo:"O"};break;case"2":t={twoPages:!this.selectedSettings.twoPages};break;case"l":t={readingDirection:"ltr"};break;case"r":t={readingDirection:"rtl"};break;case"t":t={readingDirection:"ttb"};break;case"b":t={readingDirection:"bbt"};break}t&&this.setSettingsLocal(t)}}},Ro={id:"readerScopedSettings",class:"readerCodexListItem"};function To(e,t,s,p,n,o){const i=u("CodexListItem");return l(),f(y,null,[t[9]||(t[9]=h("h4",{class:"readerSettingsHeader"},"Comic Settings Scope",-1)),r(x,{modelValue:n.isGlobalScope,"onUpdate:modelValue":t[0]||(t[0]=a=>n.isGlobalScope=a),class:"scopeRadioGroup readerCodexListItem",density:"compact","hide-details":"auto"},{default:d(()=>[(l(!0),f(y,null,I(n.scopeItems,a=>(l(),g(N,{key:a.value,label:a.title,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(ft,null,{default:d(()=>[h("div",Ro,[r(x,{class:"displayRadioGroup",density:"compact",label:"Display","hide-details":"auto","model-value":e.selectedSettings.fitTo,"onUpdate:modelValue":t[1]||(t[1]=a=>o.settingsDialogChanged({fitTo:a}))},{default:d(()=>[(l(!0),f(y,null,I(o.fitToChoices,a=>(l(),g(N,{key:a.value,label:a.title,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"]),r(D,{disabled:o.disableTwoPages,class:"scopedCheckbox",density:"compact",label:"Two pages","hide-details":"auto","model-value":e.selectedSettings.twoPages,"true-value":!0,indeterminate:e.selectedSettings.twoPages===null||e.selectedSettings.twoPages===void 0,"onUpdate:modelValue":t[2]||(t[2]=a=>o.settingsDialogChanged({twoPages:a}))},null,8,["disabled","model-value","indeterminate"]),r(x,{class:"displayRadioGroup",density:"compact",label:"Reading Direction","hide-details":"auto","model-value":e.selectedSettings.readingDirection,"onUpdate:modelValue":t[3]||(t[3]=a=>o.settingsDialogChanged({readingDirection:a}))},{default:d(()=>[(l(!0),f(y,null,I(o.readingDirectionChoices,a=>(l(),g(N,{key:a.value,label:a.title,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"]),r(D,{"model-value":e.selectedSettings.readRtlInReverse,class:"scopedCheckbox",density:"compact",label:"Read RTL Comics LTR","hide-details":"auto","true-value":!0,"onUpdate:modelValue":t[4]||(t[4]=a=>o.settingsDialogChanged({readRtlInReverse:a}))},null,8,["model-value"]),n.isGlobalScope?S("",!0):T((l(),g(le,{key:0,id:"clearSettingsButton",disabled:e.isClearSettingsButtonDisabled,onClick:e.clearSettingsLocal},{default:d(()=>t[8]||(t[8]=[_(" Clear Settings ")])),_:1,__:[8]},8,["disabled","onClick"])),[[U,{openDelay:n.openDelay,text:"Use the default settings for all comics for this comic"}]])])]),_:1}),r(M),t[10]||(t[10]=h("h4",{class:"readerSettingsHeader"},"Reader Settings",-1)),r(D,{class:"readerCodexListItem","model-value":e.finishOnLastPage,density:"compact",label:"Finish Book On Last Page","hide-details":"auto","true-value":!0,"onUpdate:modelValue":t[5]||(t[5]=a=>e.setSettingsGlobal({finishOnLastPage:a}))},null,8,["model-value"]),T(r(D,{"model-value":e.pageTransition,class:"readerCodexListItem",density:"compact",disabled:o.disablePageTransition,label:"Animate Page Turns","hide-details":"auto","true-value":!0,"onUpdate:modelValue":t[6]||(t[6]=a=>e.setSettingsGlobal({pageTransition:a}))},null,8,["model-value","disabled"]),[[U,{openDelay:n.openDelay,text:"Animate page turns when reading horizontally."}]]),T(r(D,{"model-value":e.cacheBook,class:"readerCodexListItem",density:"compact",disabled:o.disableCacheBook,label:"Cache Entire Book","hide-details":"auto","true-value":!0,"onUpdate:modelValue":t[7]||(t[7]=a=>e.setSettingsClient({cacheBook:a}))},null,8,["model-value","disabled"]),[[U,{openDelay:n.openDelay,text:"Cache all pages from this book in the browser"}]]),e.pdfInBrowserURL?(l(),g(i,{key:0,"prepend-icon":n.mdiEye,"append-icon":n.mdiOpenInNew,title:"Read in Tab",href:e.pdfInBrowserURL,target:"_blank"},null,8,["prepend-icon","append-icon","href"])):S("",!0)],64)}const Bo=k(Co,[["render",To],["__scopeId","data-v-9c6e0d8b"]]),Do={name:"ReaderSettingsSuperPanel",components:{DownloadPanel:go,ReaderKeyboardShortcutsPanel:yo,ReaderSettingsPanel:Bo}};function Io(e,t,s,p,n,o){const i=u("ReaderSettingsPanel"),a=u("ReaderKeyboardShortcutsPanel"),m=u("DownloadPanel");return l(),f(y,null,[r(i),r(M),r(a),r(M),r(m)],64)}const Lo=k(Do,[["render",Io]]),$o={name:"ReaderSettingsDrawer",components:{SettingsDrawer:Xe,ReaderSettingsSuperPanel:Lo}};function Oo(e,t,s,p,n,o){const i=u("ReaderSettingsSuperPanel"),a=u("SettingsDrawer");return l(),g(a,{title:"Reader",temporary:"","disable-resize-watcher":""},{panel:d(()=>[r(i)]),_:1})}const Vo=k($o,[["render",Oo]]),X={a:qe,f:He,p:We,i:Me,s:ze,v:Fe},Ao={a:"Story Arc",f:"Folder",p:"Publisher",i:"Imprint",s:"Series",v:"Volume"},Eo={name:"ReaderArcSelect",components:{ToolbarSelect:ct},data(){return{mdiFilterOutline:Ke}},computed:{...v(c,{arcGroup:e=>e.arc?.group||"s",arc:e=>e.arc,arcName:e=>{for(const t of e.arcs)if(e.arc.group===t.group&&e.arc.pks===t.pks)return t.name;return"Unknown"},arcItems:e=>{const t=[];for(const s of e.arcs){const p={value:s,title:s.name,group:s.group,filters:s.filters,subtitle:Ao[s.group],prependIcon:X[s.group]};t.push(p)}return t}})},methods:{...b(c,["loadBooks"]),arcIcon(e){return X[e]},checkIcon(e){return e.group===this.arc.group&&e.pks==this.arc.pks?Ue:""},subtitle(e){let t=e.subtitle;return e.filters&&(t+=" (filtered)"),t},onUpdate(e){const t={group:e.group,pks:e.pks};this.loadBooks({arc:t})}}},xo={id:"arcPos"};function No(e,t,s,p,n,o){const i=u("ToolbarSelect");return l(),g(i,{"model-value":e.arc,class:"arcSelect","select-label":"reading order",items:e.arcItems,disabled:!e.arcItems||e.arcItems.length<=1,"onUpdate:modelValue":o.onUpdate},{item:d(({item:a,props:m})=>[r(it,F(m,{density:"compact",variant:"plain","prepend-icon":a.raw.prependIcon,subtitle:o.subtitle(a.raw),"append-icon":o.checkIcon(m.value)}),null,16,["prepend-icon","subtitle","append-icon"])]),selection:d(({item:a,props:m})=>[r(R,F({size:"large"},m,{class:"arcSelectIcon"}),{default:d(()=>[_(w(o.arcIcon(a.raw.group)),1)]),_:2},1040),h("span",xo,w(e.arc.index)+" / "+w(e.arc.count),1)]),_:1},8,["model-value","items","disabled","onUpdate:modelValue"])}const Uo=k(Eo,[["render",No],["__scopeId","data-v-f5975fea"]]),Fo={name:"ReaderTitleToolbar",components:{AppBanner:tt,MetadataDialog:dt,ReaderArcSelect:Uo,SettingsDrawerButton:Je},data(){return{mdiClose:Ge,routeChanged:!1}},head(){return{meta:[{hid:"description",name:"description",content:`reader ${this.activeTitle} page ${this.storePage}`}]}},computed:{...P(L,["isAuthDialogOpen"]),...P(c,["activeTitle","closeBookRoute"]),...v(c,{showToolbars:e=>e.showToolbars,currentBook:e=>e.books?.current||{},empty:e=>e.empty,subtitle:e=>e.books?.current?.name||""}),title(){return this.activeTitle},extensionHeight(){let e=32;return this.subtitle&&(e*=2),e+=4,e},closeRoute(){const e=z(this.closeBookRoute),t=z(e.params);return delete t.name,e.params=t,e}},watch:{$route(e,t){t&&(this.routeChanged=!0)}},mounted(){document.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){document.removeEventListener("keyup",this._keyUpListener)},methods:{...b(ne,["setTimestamp"]),...b(c,["routeToDirection","routeToDirectionOne","routeToBook","setBookChangeFlag"]),openMetadata(){this.$refs.metadataDialog.dialog=!0},onCloseBook(){this.routeChanged&&this.setTimestamp()},_keyUpListener(e){if(e.stopPropagation(),!this.isAuthDialogOpen)switch(e.key){case"Escape":this.$refs.closeBook.$el.click();break;case"m":this.empty||this.openMetadata();break}}}},zo={id:"readerTopToolbarHeader"},Mo={id:"title"},Wo={key:0,id:"subtitle"};function Ho(e,t,s,p,n,o){const i=u("AppBanner"),a=u("ReaderArcSelect"),m=u("MetadataDialog"),B=u("SettingsDrawerButton");return l(),g(vt,null,{default:d(()=>[T(h("header",zo,[r(i),r(ot,{id:"readerToolbarTop",density:"compact","extension-height":o.extensionHeight},je({default:d(()=>[r(E,null,{default:d(()=>[r(le,{ref:"closeBook",class:"closeBook",to:o.closeRoute,size:"large",density:"compact",variant:"plain",onClick:o.onCloseBook},{default:d(()=>t[0]||(t[0]=[_(" close book ")])),_:1,__:[0]},8,["to","onClick"])]),_:1}),r(ut),e.empty?S("",!0):(l(),g(E,{key:0},{default:d(()=>[r(a),r(m,{ref:"metadataDialog",group:"c",toolbar:!0,book:e.currentBook},null,8,["book"])]),_:1})),r(E,null,{default:d(()=>[r(B)]),_:1})]),_:2},[o.title?{name:"extension",fn:d(()=>[r(at,{class:"readerTitle"},{default:d(()=>[h("div",Mo,w(o.title),1),e.subtitle?(l(),f("div",Wo,w(e.subtitle),1)):S("",!0)]),_:1})]),key:"0"}:void 0]),1032,["extension-height"])],512),[[ie,e.showToolbars]])]),_:1})}const fe=k(Fo,[["render",Ho],["__scopeId","data-v-cab0ef78"]]),qo={name:"ReaderEmptyBooks",components:{ReaderTopToolbar:fe,EmptyState:ce},data(){return{mdiBookRemoveOutline:Ye}},methods:{...b(c,["loadBooks","setShowToolbars"]),onAction(){this.loadBooks({mtime:Date.now()})}},created(){this.setShowToolbars()}};function Ko(e,t,s,p,n,o){const i=u("ReaderTopToolbar"),a=u("EmptyState");return l(),f(y,null,[r(i),r(a,{headline:"Book Not Found",title:"Close the reader and find another book",icon:n.mdiBookRemoveOutline,"action-text":"Try to load book again","onClick:action":o.onAction},null,8,["icon","onClick:action"])],64)}const Go=k(qo,[["render",Ko]]),jo={name:"ReaderBookChangeNavButton",components:{PaginationNavButton:pe},props:{direction:{type:String,required:!0}},computed:{...P(c,["isBTT"]),...v(c,{toRoute(e){const t=e?.routes?.books[this.direction];return t?{params:z(t)}:""}}),title(){return(this.direction==="prev"?"Previous":"Next")+" Book"},icon(){return this.bookChangeIcon(this.direction)},classes(){return{bookChangeNavButtonLeft:this.direction==="prev",bookChangeNavButtonRight:this.direction==="next"}}},methods:{...b(c,["bookChangeIcon"])}};function Yo(e,t,s,p,n,o){const i=u("PaginationNavButton");return e.toRoute?(l(),g(i,{key:0,class:C(o.classes),icon:o.icon,variant:"plain",title:o.title,to:e.toRoute},null,8,["class","icon","title","to"])):S("",!0)}const Zo=k(jo,[["render",Yo],["__scopeId","data-v-0cead61e"]]),Xo={name:"ReaderNavButton",components:{PaginationNavButton:pe},props:{value:{type:Number,required:!0},twoPages:{type:Boolean,default:!1}},computed:{...P(c,["isVertical"]),...v(c,{storePage:e=>e.page,toRoute(e){if(!this.isVertical)return{params:{pk:e.books.current.pk,page:this.value}}},isBookPrev:e=>!!e.routes.books.prev,isBookNext:e=>!!e.routes.books.next}),classes(){return{readerNavButtonLeft:!this.isBookPrev&&this.value===0,readerNavButtonRight:!this.isBookNext&&this.value!=0}},title(){return"Page "+this.value},disabled(){return this.value===this.storePage||this.twoPages&&!!(this.value%2)&&this.value-1===this.storePage}},methods:{...b(c,["setActivePage"]),onClick(){this.isVertical&&this.setActivePage(this.value,!0)}}};function Jo(e,t,s,p,n,o){const i=u("PaginationNavButton");return l(),g(i,{key:e.isVertical,disabled:o.disabled,class:C(["readerNavButton",o.classes]),title:o.title,to:e.toRoute,onClick:o.onClick},{default:d(()=>[_(w(s.value),1)]),_:1},8,["disabled","class","title","to","onClick"])}const Qo=k(Xo,[["render",Jo],["__scopeId","data-v-222c7076"]]),$="prev",O="next",ea={name:"ReaderNavToolbar",components:{PaginationSlider:ht,ReaderNavButton:Qo,PaginationToolbar:pt,ReaderBookChangeNavButton:Zo},computed:{...P(L,["isAuthDialogOpen"]),...P(c,["activeSettings","isReadInReverse","isVertical"]),...v(c,{showToolbars:e=>e.showToolbars,storePage:e=>e.page,key(e){return`${e.books?.current?.pk}:${this.step}:${this.isReadInReverse}`},maxPage:e=>e.books?.current?.maxPage||0}),twoPages(){return this.activeSettings.twoPages},step(){return this.activeSettings.twoPages?2:1},trackColor(){return this.twoPages&&+this.storePage>=this.maxPage-1?this.$vuetify.theme.current.colors.primary:""},min(){return this.isReadInReverse?this.maxPage:0},max(){return this.isReadInReverse?0:this.maxPage},bookPrev(){return this.isReadInReverse?"next":"prev"},bookNext(){return this.isReadInReverse?"prev":"next"}},mounted(){document.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){document.removeEventListener("keyup",this._keyUpListener)},methods:{...b(c,["routeToBook","routeToDirection","routeToDirectionOne","routeToPage","setActivePage"]),onSliderUpdate(e){this.isVertical?this.setActivePage(e,!0):this.routeToPage(e)},_keyUpListener(e){if(e.stopPropagation(),!this.isAuthDialogOpen)switch(e.key){case" ":!e.shiftKey&&window.innerHeight+window.scrollY+1>=document.body.scrollHeight?this.routeToDirection(O):e.shiftKey&&window.scrollY===0&&this.routeToDirection($);break;case"j":case"ArrowRight":this.routeToDirection(O);break;case"k":case"ArrowLeft":this.routeToDirection($);break;case",":this.routeToDirectionOne($);break;case".":this.routeToDirectionOne(O);break;case"n":this.routeToBook(O);break;case"p":this.routeToBook($);break}}}};function ta(e,t,s,p,n,o){const i=u("ReaderBookChangeNavButton"),a=u("ReaderNavButton"),m=u("PaginationSlider"),B=u("PaginationToolbar");return l(),g(_t,null,{default:d(()=>[e.maxPage?T((l(),g(B,{key:0,id:"readerToolbarNav"},{default:d(()=>[r(i,{direction:o.bookPrev,narrow:!1},null,8,["direction"]),r(a,{value:o.min,"two-pages":o.twoPages},null,8,["value","two-pages"]),(l(),g(m,{key:e.key,"model-value":e.storePage,min:0,max:e.maxPage,step:o.step,"track-color":o.trackColor,reverse:e.isReadInReverse,"onUpdate:modelValue":t[0]||(t[0]=V=>o.onSliderUpdate(V))},null,8,["model-value","max","step","track-color","reverse"])),r(a,{value:o.max,"two-pages":o.twoPages},null,8,["value","two-pages"]),r(i,{direction:o.bookNext,narrow:!1},null,8,["direction"])]),_:1},512)),[[ie,e.showToolbars]]):S("",!0)]),_:1})}const oa=k(ea,[["render",ta],["__scopeId","data-v-955ab3ce"]]),aa={name:"MainReader",components:{BooksWindow:co,ReaderEmpty:Go,ReaderNavToolbar:oa,ReaderTopToolbar:fe,ReaderSettingsDrawer:Vo,Unauthorized:st},data(){return{showToolbars:!1}},computed:{...P(L,["isAuthorized"]),...v(L,{user:e=>e.user}),...v(c,{empty:e=>e.empty,arc:e=>e.arc})},watch:{user(){this.loadReaderSettings()}},created(){this.reset();const e=this.user?0:300,t=this.user;setTimeout(()=>{this.user?.id===t?.id&&this.loadReaderSettings()},e)},methods:{...b(c,["loadReaderSettings","reset"])}},sa={key:0},ra={id:"readerContainer"};function na(e,t,s,p,n,o){const i=u("ReaderTopToolbar"),a=u("BooksWindow"),m=u("ReaderNavToolbar"),B=u("ReaderEmpty"),V=u("ReaderSettingsDrawer"),ve=u("Unauthorized");return e.isAuthorized?(l(),g(rt,{key:0,id:"readerWrapper"},{default:d(()=>[e.empty?(l(),g(B,{key:1})):(l(),f("div",sa,[h("div",ra,[r(i),r(a),r(m)])])),r(V)]),_:1})):(l(),g(ve,{key:1}))}const ia=k(aa,[["render",na],["__scopeId","data-v-59216c34"]]),Sa=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"}));export{Zt as P,ke as S,Sa as r};
