import{p as I,aR as _,c as L,bX as m,bg as O,bB as w,bU as j,b as M,d as k,F as S}from"./main-CpP-5rLh.js";const v=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const s=[];let r=e.indexOf(t);for(;~r;)s.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return s.length?s:-1};function p(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const B=I({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function A(e,t,n){const s=[],r=n?.default??v,f=n?.filterKeys?w(n.filterKeys):!1,o=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return s;e:for(let c=0;c<e.length;c++){const[l,y=l]=w(e[c]),d={},a={};let i=-1;if((t||o>0)&&!n?.noFilter){if(typeof l=="object"){const b=f||Object.keys(y);for(const g of b){const F=j(y,g),K=n?.customKeyFilter?.[g];if(i=K?K(F,t,l):r(F,t,l),i!==-1&&i!==!1)K?d[g]=p(i,t):a[g]=p(i,t);else if(n?.filterMode==="every")continue e}}else i=r(l,t,l),i!==-1&&i!==!1&&(a.title=p(i,t));const u=Object.keys(a).length,h=Object.keys(d).length;if(!u&&!h||n?.filterMode==="union"&&h!==o&&!u||n?.filterMode==="intersection"&&(h!==o||!u))continue}s.push({index:c,matches:{...a,...d}})}return s}function C(e,t,n,s){const r=_([]),f=_(new Map),o=L(()=>s?.transform?m(t).map(l=>[l,s.transform(l)]):m(t));O(()=>{const l=typeof n=="function"?n():m(n),y=typeof l!="string"&&typeof l!="number"?"":String(l),d=A(o.value,y,{customKeyFilter:{...e.customKeyFilter,...m(s?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),a=m(t),i=[],u=new Map;d.forEach(h=>{let{index:b,matches:g}=h;const F=a[b];i.push(F),u.set(F.value,g)}),r.value=i,f.value=u});function c(l){return f.value.get(l.value)}return{filteredItems:r,filteredMatches:f,getMatches:c}}function R(e,t,n){return n==null||!n.length?t:n.map((s,r)=>{const f=r===0?0:n[r-1][1],o=[M("span",{class:k(`${e}__unmask`)},[t.slice(f,s[0])]),M("span",{class:k(`${e}__mask`)},[t.slice(s[0],s[1])])];return r===n.length-1&&o.push(M("span",{class:k(`${e}__unmask`)},[t.slice(s[1])])),M(S,null,[o])})}export{R as h,B as m,C as u};
