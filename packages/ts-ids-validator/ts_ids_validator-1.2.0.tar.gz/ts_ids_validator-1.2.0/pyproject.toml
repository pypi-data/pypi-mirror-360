[[tool.poetry.source]]
name = "ts_pypi_virtual"
url = "https://tetrascience.jfrog.io/artifactory/api/pypi/ts-pypi-virtual/simple"
priority = "primary"

[tool.poetry]
name = "ts-ids-validator"
version = "1.2.0"
description = "TetraScience IDS artifact validator"
authors = ["TetraScience <developers@tetrascience.com>"]
packages = [
    { include = "ids_validator" }
]
include = ["ids_validator/templates"]
homepage = "https://developers.tetrascience.com"
readme = "README.md"
license = "Apache-2.0"
classifiers=[
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: OS Independent",
]

[tool.poetry.dependencies]
python = ">=3.9,<4.0"
jsonref = "*"
pydash = "*"
rich = "*"
jsonschema = "^4.22.0"
deepdiff = ">=6.3.0"
faker = ">18.4.0"
typing-extensions = "^4"
semver = "^3.0.1"
rfc3986-validator = "^0.1.1"
requests = ">=2.31"
requests-cache = "^1.2.1"
gitpython = "^3.1.43"
pyarrow = ">=16.1.0"
typer = ">=0.14.0,<1"

[tool.poetry.group.dev.dependencies]
python-dotenv = "^0.21.1"
pytest = "*"
pytest-cov = "*"
pytest-mock = "*"
black = ">=22.1.0"
pre-commit = ">2.0"
pylint = ">=2.17.2"
pytest-snapshot = "^0.9.0"

[tool.poetry.scripts]
validate-ids-artifact = "ids_validator.__main__:app"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"


[tool.black]
line-length = 88
target-version = ['py37', 'py38', 'py39', 'py310', 'py311']
include = '\.pyi?$'
extend-exclude = "snapshots"


[tool.pytest.ini_options]
testpaths = [
    "__tests__"
]

[tool.coverage.run]
branch = true
source = [
    "ids_validator"
]
omit = ["snapshots"]

# Many options copied from the docs here:
# https://coverage.readthedocs.io/en/coverage-5.5/config.html#syntax
[tool.coverage.report]
show_missing = true
# Regexes for lines to exclude from consideration
exclude_lines = [
    # Have to re-enable the standard pragma
    "pragma: no cover",

    # Don't complain about missing debug-only code:
    "def __repr__",
    "if self\\.debug",

    # Don't complain if tests don't hit defensive assertion code:
    "raise AssertionError",
    "raise NotImplementedError",

    # Don't complain if non-runnable code isn't run:
    "if 0:",
    "if __name__ == .__main__.:",
]
ignore_errors = true
