name: "ğŸ€ è‰¾è‰ä¸çš„é­”æ³•é‚®ä»¶æœåŠ¡ ~"
description: "é€šè¿‡ Resend å‘é€é­”æ³•ç”µå­é‚®ä»¶é€šçŸ¥"
inputs:
  subject:
    type: string
    default: "[è‰¾è‰ä¸å¿«æŠ¥] é»˜è®¤ä¸»é¢˜"
    description: "é‚®ä»¶ä¸»é¢˜"
  content:
    type: string
    required: true
    description: "é‚®ä»¶æ­£æ–‡å†…å®¹"
  recipients:
    type: json
    required: true
    description: "æ”¶ä»¶äººåˆ—è¡¨ JSON æ•°ç»„"
  resend_api_key:
    type: string
    required: true
    description: "Resend API å¯†é’¥"
  feishu_smtp_password:
    type: string
    required: true
    description: "é£ä¹¦ SMTP å¯†ç "

runs:
  using: "composite"
  steps:
    - name: å®‰è£…ä¾èµ–
      run: python -m pip install requests
      shell: bash

    - name: å‘é€é‚®ä»¶
      env:
        RECIPIENTS_JSON: ${{ inputs.recipients }}
        SUBJECT: ${{ inputs.subject }}
        CONTENT: ${{ inputs.content }}
        RESEND_API_KEY: ${{ inputs.resend_api_key }}
        FEISHU_SMTP_PASSWORD: ${{ inputs.feishu_smtp_password }}
      run: |
        python ${{ github.action_path }}/send_mail.py
      shell: bash
