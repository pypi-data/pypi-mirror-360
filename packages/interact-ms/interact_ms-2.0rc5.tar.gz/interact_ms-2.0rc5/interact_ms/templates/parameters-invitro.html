<!DOCTYPE html>
<html>
<head>
	<link rel='stylesheet' type="text/css" href="{{ url_for('static',filename='styles/style.css') }}">
	<script src="{{url_for('static', filename='index.js')}}"></script>
	<title>interact-ms</title>
</head>
<body onload="parametersCheck('{{ server_address }}', '{{ user }}', '{{ project }}', 'invitro')">	
	{{ INTERACT_HEADER|safe }}
	<hr>
	<br><br>
	<div class = "download-div">
		<div style=" width:1404px; padding-left: 30px; text-align: left; background: linear-gradient(to right, aquamarine 40%, #FFFFFF 58%); ">
		   <p>Configuration</p>
	   </div>
	</div>
	
	<div class = "parameter-second-section" style = "height:240px;">
		<div class = "parameter-second-section-left" style = "height:240px;">
			<div style = "font-size: larger;">
				<p><b>Instrument Settings</b></p>
			</div>
			<div > 
				Enter the MS1 Accuracy of the Mass Spectrometer:
				<div id="ms1-settings-entry"  style="margin-left:0;">
					<form id="ms1-settings-form">
						<input type="text" id="ms1-accuracy-input" style = "width:96%; border:2px solid  rgb(5, 208, 141); "  name="mz-accuracy-input" onkeypress="textSubmit(event, '{{ server_address }}', 'noAction')">
						<select id="ms1-unit-selection" class="ms-data-extra" style = "font-size: medium;" >
							<option value="ppm">ppm</option>
						</select>
					</form>
				</div>
				<br>
				Enter the MS2 Accuracy of the Mass Spectrometer:
				<div id="ms2-settings-entry"  style="margin-left:0;">
					<form id="ms2-settings-form">
						<input type="text" id="ms2-accuracy-input"  style = "width:96%; border:2px solid  rgb(5, 208, 141); "   name="ms2-accuracy-input" onkeypress="textSubmit(event, '{{ server_address }}', 'noAction')">
						<select id="ms2-unit-selection" class="ms-data-extra" style = "font-size: medium;" >
							<option value="Da">Da</option>
							<option value="ppm">ppm</option>
						</select>
					</form>
				</div>
			</div>
		</div>
		<div class = "parameter-second-section-right" style = "height:240px;">
			<div style = "font-size: larger;">
				<p><b>Spliced Peptide Limits</b></p>
			</div>
			<div>
				Enter the maximum length to search for spliced peptide. In general use 30, use 22 for long 
				proteins substrates (1,000+ residues):
				<div id="spliced-upper-entry"  style="margin-left:0;">
					<form id="spliced-upper-form">
						<input type="text" id="spliced-upper-input" style = "width:96%; border:2px solid  rgb(5, 208, 141); "  name="spliced-upper-input" onkeypress="textSubmit(event, '{{ server_address }}', 'noAction')">
					</form>
				</div>
			</div>
		</div>
	</div>

	
	<br><br><br>
	<!-- save and execution button -->

	<div id="execution-div" class="container" style=" height:200px;">
		<div class="vertical-center" style = "margin-top: 0%; height:200px;">
			<button id="parameter-save-button" class = "ms-data-extra" style = " border-radius: 10px; cursor: pointer;font-size:x-large; width :250px; height:90px; margin-right: 40px;" onclick="saveParameters('{{ server_address }}', '{{ user }}', '{{ project }}', 'invitro')">
				Save Parameters
			</button>
			<br><br>
			<button id="execute-button" class=" ms-data-extra" style = " border-radius: 10px;cursor:pointer; font-size:x-large;width:250px; margin-left: 40px; height:90px; margin-right: 40px;" onclick="executePipeline('{{ server_address }}', '{{ user }}', '{{ project }}', 'invitro')">
				Execute Pipeline
			</button>
			<br><br>
			<button id="subset-button" class=" ms-data-extra" style = " border-radius: 10px;cursor:pointer; font-size:x-large;width:250px; margin-left: 40px; height:90px" onclick="subsetPipeline('{{ server_address }}', '{{ user }}', '{{ project }}', 'invitro')">
				Execute Subset of Tasks
			</button>
		</div>
	</div>

	<div style = "display:flex;
			flex-direction: column;
			justify-content: center;
			align-items:center;">
		<div class="parameter-third-section-right">
			<div id="params-save-text" class = "ms-data-extra" style="display: none; font-size: larger; padding-left:2%; padding-right:2%;">
				<p>Parameters saved</p>
			</div>
		</div>
		<div class="parameter-third-section-right">
			<div id="loading-text" class = "ms-data-extra" style="display: none; font-size: larger; padding-left:2%; padding-right:2%;">
				<p>Just a moment, we are setting up your pipeline</p>
			</div>
		</div>
		<div id="file-download-text" class='ms-data-extra' style="display: none; font-size: larger; padding-left:2%; padding-right:2%;">
			<p>Pipeline running. Results will be accessible via:</p>
			<a id="file-download" href></a>
			<p>You can also access the results from the main interact page by selecting the workflow "Retrieve Results".
			</p>
		</div>
		<br><br>
	</div>

	<div style="display:flex; justify-content:center; align-items:center; font-size: larger; ">
		<div style="width:200px;">
			<button id="back-button" class="ms-data-extra-button"onclick="revertGUI('{{ server_address }}', '{{ user }}', '{{ project }}', 'parameters')">
				&xlarr; Go back
			</button>
		</div>
	</div>
	<div style = "height: 100px;"></div>
	{{ INTERACT_FOOTER|safe }}
</body>
</html>